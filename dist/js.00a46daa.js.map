{"version":3,"sources":["js/html5-qrcode/qrcode.js","js/html5-qrcode/html5-qrcode.js","js/html5-qrcode/html5-qrcode-scanner.js","js/install.js","js/index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["getLazarSoftScanner","GridSampler","checkAndNudgePoints","image","points","width","qrcode","height","nudged","offset","length","x","Math","floor","y","sampleGrid3","dimension","transform","bits","BitMatrix","Array","max","iValue","transformPoints1","bit","set_Renamed","aioobe","sampleGridx","p1ToX","p1ToY","p2ToX","p2ToY","p3ToX","p3ToY","p4ToX","p4ToY","p1FromX","p1FromY","p2FromX","p2FromY","p3FromX","p3FromY","p4FromX","p4FromY","PerspectiveTransform","quadrilateralToQuadrilateral","ECB","count","dataCodewords","__defineGetter__","ECBlocks","ecCodewordsPerBlock","ecBlocks1","ecBlocks2","ecBlocks","NumBlocks","total","i","getECBlocks","Version","versionNumber","alignmentPatternCenters","ecBlocks3","ecBlocks4","ecCodewords","ECCodewordsPerBlock","ecbArray","ecBlock","Count","DataCodewords","totalCodewords","buildFunctionPattern","DimensionForVersion","bitMatrix","setRegion","getECBlocksForLevel","ecLevel","ordinal","VERSION_DECODE_INFO","VERSIONS","buildVersions","getVersionForNumber","getProvisionalVersionForDimension","iae","decodeVersionInformation","versionBits","bestDifference","bestVersion","targetVersion","bitsDifference","FormatInformation","numBitsDiffering","a11","a21","a31","a12","a22","a32","a13","a23","a33","denominator","transformPoints2","xValues","yValues","n","buildAdjoint","times","other","x0","y0","x1","y1","x2","y2","x3","y3","x0p","y0p","x1p","y1p","x2p","y2p","x3p","y3p","qToS","quadrilateralToSquare","sToQ","squareToQuadrilateral","dy2","dy3","dx1","dx2","dx3","dy1","DetectorResult","Detector","resultPointCallback","sizeOfBlackWhiteBlackRun","fromX","fromY","toX","toY","steep","abs","temp","dx","dy","error","ystep","xstep","state","realX","realY","diffX","diffY","sqrt","diffX2","diffY2","sizeOfBlackWhiteBlackRunBothWays","result","scale","otherToX","otherToY","calculateModuleSizeOneWay","pattern","otherPattern","moduleSizeEst1","X","Y","moduleSizeEst2","isNaN","calculateModuleSize","topLeft","topRight","bottomLeft","distance","pattern1","pattern2","xDiff","yDiff","computeDimension","moduleSize","tltrCentersDimension","round","tlblCentersDimension","findAlignmentInRegion","overallEstModuleSize","estAlignmentX","estAlignmentY","allowanceFactor","allowance","alignmentAreaLeftX","alignmentAreaRightX","min","alignmentAreaTopY","alignmentAreaBottomY","alignmentFinder","AlignmentPatternFinder","find","createTransform","alignmentPattern","dimMinusThree","bottomRightX","bottomRightY","sourceBottomRightX","sourceBottomRightY","sampleGrid","sampler","processFinderPatternInfo","info","TopLeft","TopRight","BottomLeft","provisionalVersion","modulesBetweenFPCenters","AlignmentPatternCenters","correctionToTopLeft","detect","FinderPatternFinder","findFinderPattern","FORMAT_INFO_MASK_QR","FORMAT_INFO_DECODE_LOOKUP","BITS_SET_IN_HALF_BYTE","formatInfo","errorCorrectionLevel","ErrorCorrectionLevel","forBits","dataMask","GetHashCode","Equals","o","a","b","URShift","decodeFormatInformation","maskedFormatInfo","doDecodeFormatInformation","bestFormatInfo","decodeInfo","targetInfo","name","ordinal_Renamed_Field","FOR_BITS","L","M","Q","H","rowSize","get_Renamed","flip","clear","left","top","right","bottom","DataBlock","numDataCodewords","codewords","getDataBlocks","rawCodewords","version","TotalCodewords","totalBlocks","ecBlockArray","numResultBlocks","j","numBlockCodewords","shorterBlocksTotalCodewords","longerBlocksStartAt","numCodewords","shorterBlocksNumDataCodewords","rawCodewordsOffset","iOffset","BitMatrixParser","Dimension","parsedVersion","parsedFormatInfo","copyBit","readFormatInformation","formatInfoBits","iMin","readVersion","ijMin","readCodewords","DataMask","forReference","unmaskBitMatrix","functionPattern","readingUp","resultOffset","currentByte","bitsRead","col","reference","DATA_MASKS","DataMask000","isMasked","DataMask001","DataMask010","DataMask011","DataMask100","DataMask101","DataMask110","DataMask111","ReedSolomonDecoder","field","decode","received","twoS","poly","GF256Poly","syndromeCoefficients","dataMatrix","noError","evalu","evaluateAt","exp","syndrome","sigmaOmega","runEuclideanAlgorithm","buildMonomial","sigma","omega","errorLocations","findErrorLocations","errorMagnitudes","findErrorMagnitudes","position","log","GF256","addOrSubtract","R","Degree","rLast","r","sLast","One","s","Zero","tLast","t","rLastLast","sLastLast","tLastLast","q","denominatorLeadingTerm","getCoefficient","dltInverse","inverse","degreeDiff","multiply","multiplyByMonomial","multiply1","sigmaTildeAtZero","multiply2","errorLocator","numErrors","e","errorEvaluator","xiInverse","coefficients","coefficientsLength","firstNonZero","ci","degree","size","result2","smallerCoefficients","largerCoefficients","sumDiff","lengthDiff","aCoefficients","aLength","bCoefficients","bLength","product","aCoeff","scalar","coefficient","divide","quotient","remainder","inverseDenominatorLeadingTerm","degreeDifference","term","iterationQuotient","primitive","expTable","logTable","at0","zero","at1","one","QR_CODE_FIELD","DATA_MATRIX_FIELD","Decoder","rsDecoder","correctErrors","codewordBytes","codewordsInts","numECCodewords","rse","parser","dataBlocks","totalBytes","NumDataCodewords","resultBytes","dataBlock","Codewords","reader","QRCodeDataBlockReader","VersionNumber","Bits","imagedata","qrCodeSymbol","debug","maxImgSize","sizeOfDataLengthInfo","callback","vidSuccess","stream","localstream","webkit","video","src","window","webkitURL","createObjectURL","moz","mozSrcObject","play","gUM","canvas_qr2","document","createElement","id","qrcontext2","getContext","videoWidth","videoHeight","setTimeout","captureToCanvas","vidError","drawImage","console","setWebcam","videoId","navigator","getElementById","options","mediaDevices","enumerateDevices","then","devices","forEach","device","kind","label","toLowerCase","search","deviceId","getUserMedia","audio","webkitGetUserMedia","mozGetUserMedia","arguments","canvas_qr","context","getImageData","process","Image","crossOrigin","onload","canvas_out","outctx","clearRect","nheight","nwidth","ir","onerror","isUrl","regexp","test","decode_url","escaped","escape","ret","decodeURIComponent","decode_utf8","ctx","start","Date","getTime","grayScaleToBitmap","grayscale","point","data","putImageData","detector","qRCodeMatrix","Height","Width","DataByte","str","String","fromCharCode","end","time","getPixel","p","binarize","th","gray","getMiddleBrightnessPerArea","numSqrtArea","areaWidth","areaHeight","minmax","i2","ay","ax","target","middle","i3","grayScale","sqrtNumArea","buff","ArrayBuffer","bitmap","Uint8Array","number","MIN_SKIP","MAX_MODULES","INTEGER_MATH_SHIFT","CENTER_QUORUM","orderBestPatterns","patterns","crossProductZ","pointA","pointB","pointC","bX","bY","zeroOneDistance","oneTwoDistance","zeroTwoDistance","FinderPattern","posX","posY","estimatedModuleSize","incrementCount","aboutEquals","moduleSizeDiff","FinderPatternInfo","patternCenters","possibleCenters","hasSkipped","crossCheckStateCount","foundPatternCross","stateCount","totalModuleSize","maxVariance","centerFromEnd","crossCheckVertical","startI","centerJ","maxCount","originalStateCountTotal","maxI","CrossCheckStateCount","NaN","stateCountTotal","crossCheckHorizontal","startJ","centerI","maxJ","handlePossibleCenter","found","index","center","push","foundPossibleResultPoint","selectBestPatterns","startSize","square","centerValue","EstimatedModuleSize","average","sort","center1","center2","dA","dB","stdDev","limit","splice","findRowSkip","firstConfirmedCenter","haveMultiplyConfirmedCenters","confirmedCount","totalDeviation","tryHarder","iSkip","done","currentState","confirmed","rowSkip","patternInfo","AlignmentPattern","startX","startY","middleI","iGen","blocks","numErrorCorrectionCode","blockPointer","bitPointer","dataLength","dataLengthMode","getNextBits","numBits","mask","mask1","mask3","bitsFirstBlock","bitsSecondBlock","bitsThirdBlock","NextMode","getDataLength","modeIndicator","getRomanAndFigureString","intData","strData","tableRomanAndFigure","firstLetter","secondLetter","getFigureString","get8bitByteArray","output","getKanjiString","unicodeString","lowerByte","higherByte","tempWord","shiftjisWord","parseECIValue","firstByte","secondByte","secondThirdBytes","MODE_NUMBER","MODE_ROMAN_AND_NUMBER","MODE_8BIT_BYTE","MODE_ECI","MODE_KANJI","mode","temp_sbyteArray3","temp_str","ta","charCodeAt","Html5Qrcode","elementId","verbose","_elementId","_foreverScanTimeout","_localMediaStream","_shouldScan","_url","URL","mozURL","msURL","_userMedia","msGetUserMedia","_isScanning","VERBOSE","cameraIdOrConfig","configuration","qrCodeSuccessCallback","qrCodeErrorCallback","_clearElement","$this","config","fps","SCAN_DEFAULT_FPS","isShadedBoxEnabled","qrbox","undefined","element","clientWidth","DEFAULT_WIDTH","style","_element","qrboxSize","MIN_QR_BOX_SIZE","setupUi","warn","shouldShadingBeApplied","defaultQrRegion","qrRegion","_getShadedRegionBounds","canvasElement","_createCanvasElement","canvas","append","_possiblyInsertShadingElement","_qrRegion","_context","_canvasElement","scanContext","_possiblyUpdateShaders","exception","foreverScan","videoElement","_videoElement","widthRatio","heightRatio","clientHeight","sWidthOffset","sHeightOffset","sxOffset","syOffset","disableFlip","translate","_getTimeoutFps","onMediaStreamReceived","mediaStream","Promise","resolve","reject","setupVideo","_createVideoElement","onabort","onplaying","srcObject","aspectRatio","constraints","track","getVideoTracks","applyConstraints","_","catch","videoConstraints","_createVideoConstraints","err","getCameraConfig","optional","sourceId","clearTimeout","tracksToClose","tracksClosed","removeQrRegion","getElementsByClassName","SHADED_REGION_CLASSNAME","shadedChild","removeChild","onAllTracksClosed","videoTrack","stop","imageFile","showImage","File","computeCanvasDrawConfig","imageWidth","imageHeight","containerWidth","containerHeight","xoffset","yoffset","formerImageWidth","formerImageHeight","_log","_possiblyCloseLastScanImageFile","_lastScanImageFile","inputImage","FILE_SCAN_MIN_HEIGHT","visibleCanvas","display","appendChild","hiddenCanvas","onstalled","onsuspend","innerHTML","customId","canvasWidth","canvasHeight","muted","playsInline","shaders","SHADED_LEFT","_createShadedElement","SHADED_RIGHT","SHADED_TOP","SHADED_BOTTOM","Object","keys","key","hasBorderShaders","_insertShaderBorders","shadingPosition","elem","className","background","shaderElem","parseInt","borderOffset","smallSize","largeSize","createBorder","backgroundColor","BORDER_SHADER_DEFAULT_COLOR","insertBorder","borderElem","borderShaders","firstTop","firstLeft","secondTop","secondLeft","qrMatch","shader","BORDER_SHADER_MATCH_COLOR","revokeObjectURL","exact","facingModeKey","deviceIdKey","allowedFacingModeValues","exactKey","isValidFacingModeValue","value","facingMode","type","oninactive","closeActiveStreams","tracks","enabled","removeTrack","results","message","MediaStreamTrack","getSources","sourceInfos","sourceInfo","Html5QrcodeScanner","currentScanType","SCAN_TYPE_CAMERA","sectionSwapAllowed","section","html5Qrcode","lastMatchFound","__setStatus","STATUS_SUCCESS","__setHeaderMessage","container","__createBasicLayout","__getScanRegionId","emptyHtmlContainer","mainContainer","__resetBasicLayout","parent","padding","border","__createHeader","qrCodeScanRegion","scanRegionId","minHeight","textAlign","__insertCameraScanImageToScanRegion","qrCodeDashboard","dashboardId","__getDashboardId","__setupInitialDashboard","dashboard","__createSection","__createSectionControlPanel","__createSectionSwap","header","margin","fontSize","borderBottom","titleSpan","statusSpan","__getStatusSpanId","float","color","headerMessageContainer","__getHeaderMessageContainerId","marginTop","borderTop","__getDashboardSectionId","sectionControlPanel","scpCameraScanRegion","__getDashboardSectionCameraScanRegionId","requestPermissionContainer","requestPermissionButton","addEventListener","disabled","getCameras","cameras","__resetHeaderMessage","STATUS_WARNING","__renderCameraSelection","fileBasedScanRegion","__getDashboardSectionFileScanRegionId","fileScanInput","__getFileScanInputId","accept","fileScanLabel","SCAN_TYPE_FILE","files","file","scanFile","qrCode","cameraSelectionContainer","marginRight","cameraSelectionSelect","__getCameraSelectionId","camera","option","cameraActionContainer","cameraActionStartButton","cameraActionStopButton","_showHideScanTypeSwapLink","cameraId","TEXT_IF_CAMERA_SCAN_SELECTED","TEXT_IF_FILE_SCAN_SELECTED","switchContainer","swithToFileBasedLink","textDecoration","__getDashboardSectionSwapLinkId","href","__getFileScanInput","__clearScanRegion","__getCameraScanRegion","__getFileScanRegion","__insertFileScanImageToScanRegion","statusText","statusClass","STATUS_DEFAULT","messageDiv","messageText","shouldDisplay","__getDashboardSectionSwapLink","cameraScanImage","opacity","ASSET_CAMERA_SCAN","fileScanImage","ASSET_FILE_SCAN","deferredInstallPrompt","installButton","installPWA","saveBeforeInstallPromptEvent","evt","removeAttribute","prompt","srcElement","setAttribute","userChoice","choice","outcome","logAppInstalled","App","html5QrCode","$scanBtn","querySelector","$stopBtn","$select","$output","cameraSettings","cameraConfig","init","initEvents","text","messsage","makeRequest","ignore","alert","url","fetch","method","response","json","msg","app","bundleURL","getBundleURLCached","getBundleURL","Error","matches","stack","match","getBaseURL","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","remove","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module"],"mappings":"AKAA,ACAA,AHAA,IEAIs9B,ACAAU,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;ADCA,ACCA,AFFA,ADEA,IAAI/C,KEDKqC,ACCAW,UAAT,CAAoBC,IAApB,CHAyB,CGAC,CDD1B,CFC4B,EEDE,EFC9B;AEAE,ACCA,AHAF,IAAMhD,EEDA,ACCAiD,CDDCd,MCCM,GDDX,ACCca,CHAG,CEDD,ECCE,AHAEjjB,CGADmjB,OHAS,CAACpiB,CGAf,EAAd,WHAoB,CAAwB,YAAxB,CAAtB;AEAIqhB,ADDJ,ADEAnC,IEDImC,SAAS,AFCA,CAACzF,EEDE2F,YAAY,EAAxB,AFCJ,CAA+B,OAA/B,EAAwCpC,UAAxC,GAEA;AEFG,ACADgD,EAAAA,OAAO,CAAC3gB,MAAR,GAAiB,YAAY;AAC3B0gB,AFFJ,ADIAzjB,IGFIyjB,EHEE,CAACtG,CGFC,CAACyG,MAAL,QHEJ,CAAwB,qBAAxB,EAA+CjD,4BAA/C;AEDE,ACAC,ALNH,ADAA,AGSA,GGLE,MDEOiC,SAAP;AACD,ALND,AIGA,ADMA;AGHEc,ANLF,AGSA,EGJEA,OAAO,CAACpE,IAAR,GAAemE,IAAI,CAACnE,IAAL,CAAUuE,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgC3f,IAAI,CAAC4f,GAAL,EAA/C;ADEF,ACDEL,ANLF,AGSA,EGJEA,IAAI,CAACM,EDCEjB,QCDP,CAAgBkB,GDClB,GAAwB,MCDtB,CAA6BN,OAA7B,EAAsCD,IAAI,CAACQ,WAA3C;ADEA,ACDD,ANLD,AGSA;AEFE,ALNF,AGSA,MEHM;AACF,ACDJ,IAAIC,MDCM,IAAInB,ACDA,GAAG,EDCP,EAAN,ACDJ;ADEG,ALNH,AGQA,GEJE,CAEE,KFEKpC,EEFE9M,GAAP,EAAY,qBFEhB,CAAsC+M,GAAtC,EAA2C;AEDvC,ACFJ,AJZA,AFQA,AGQE,QEFMoC,CCFCmB,MDEM,GAAG,ACFlB,CDEmB,ECFE,GDEGtQ,GAAG,CAACoP,KAAV,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ACDF,AJZF,AFQA,AGQE1C,EAAAA,IGJI0D,UAAJ,EAAgB,KHIK,GAAGtD,GAAxB;AEFE,ACDA,AJZJ,AFQA,AGQEH,EAAAA,MEHMuC,OAAJ,AFGW,CAACnC,CEHC,cFGf,CAA8B,QAA9B;AEFI,ACDH,AJZH,AFQA,AGQC,ICbKQ,SCUO8B,UAAU,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD,AHbL,AFQA,AIJI,ADcJ,iBCdiB;ACUd,ACDDkB,AJZF,AFQA,AILiB,ADejB,EGNEA,UAAU,GAAGnjB,UAAU,CAAC,YAAY;AAClC,AJZJ,ADJA,ADYA,AGUA,QGNQqjB,KAAK,GAAG5jB,QAAQ,CAAC6jB,gBAAT,CAA0B,wBAA1B,CAAZ;ADEF,AHbF,ADJA,ADYA,AINQ,ADgBR,SELS,ADXI/C,GCWX,QDXM,GAAmB,IAAI5S,oBAAJ,CAAgB,QAAhB,CAAnB;ACYP,ACFG,AJXJ,ADJA,ADYA,AILQ,ADeR,SGPS,AFRIlN,IEQAzY,CAAC,EFRN,CEQS,CAAb,CFRmB,CEQHA,CAAC,GAAGq7B,KAAK,CAACp+B,MAA1B,EAAkC+C,CAAC,EAAnC,EAAuC;AACrC,AJXN,ADJA,ADYA,AILYw4B,MAAAA,IEQF+B,IFRU,EEQJ,AFRM9iB,CEQL2iB,OFRa,CAAC3B,EEQrB,CAAkB4C,KAAK,CAACr7B,CAAD,CAAL,CAASu2B,CFRf,CAAuB,EEQnC,MAAqCgE,EFRzB,CADC,GES8B,CAACR,YAAP,EAAzC,EAAgE;ADGtE,ACFQU,AJXR,ADJA,ADYA,AILY/B,MAAAA,EEQJ+B,CDECL,KDVW,EAAE3iB,EEQJ,CDElB,ACFmB4jB,CDEC/B,GAApB,CCFwB,AFRM,CCUL,ACFAt5B,AFRMy4B,CEQP,CAAN,CAAV,UFRc,CAAuB,eAAvB,CAFC;ACarB,ACFK,AJXP,ADJA,ADYA,AILYE,ADaZ,MCbYA,GCUH,AFGAhB,CEHC,GDVS,ECUJ2B,ADVM7hB,GCUZ,CFGT,CEHoB4iB,AFGAxC,GCbS,ADa7B,CCb8BY,CDaL,EEHhB,CAAmB,SDVP,CAAuB,aAAvB,CAHE,8CCad,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,AJXL,ADJA,ADYA,AILYG,ADaV,MCbUA,OAAO,EAAEnhB,QAAQ,CAACghB,aAAT,CAAuB,YAAvB,CAJE;AHFvB,ADYA,AILYI,ADaVpB,EAAAA,EDhBmBzG,EEGT6H,cAAc,EAAE,CDaL,CAACd,MAAtB,GAFuB,CAGvB;AEHFuC,ACFIa,AJDA,ADdJ,ADYA,AILgBhL,IEQZgL,GDEG,CAACpB,ADVQ5J,MEQF,GAAG,CFRS,ECU1B,ADV4B,CEQxB,EDEmB2J,kBAAvB;AACAQ,ACFG,AJDH,ADdA,ADae,AIRa,ADe1BzC,EAAAA,CGduB,EASpB,AHKA,CAACG,CEHC,ACXkB,AFNF,CCiBfoC,ACXN,CNOsB79B,OGOtB,CAAe07B,CEHjB,GAAqBmC,OLJN,CGOb,CAA4B,CEH9B,ALJ8C,OGO5C,EAAsC,IAAtC,EAJuB,CAKvB;AGLD,AJDD,ADdA,ADcC,AIPWtB,MJOPt8B,AIPOs8B,WJOI,CIPQ,EJOL,AIPO,EJOzB;AECD,ADdA,AGOgB7R,ADadwQ,EAAAA,MCbcxQ,GAAG,EAAE,EADK,QDcH,CAACiR,UAAtB,CACKtf,IADL,CACU,UAACuf,MAAD,EAAY;AGLxBoD,AJDA,ADdA,ADcC/+B,AIPe4qB,ADcR,EHPP5qB,IMCK,CAAC89B,CFRSlT,ADcJ+Q,KHPA,AIPS,CEQrB,ANDa17B,AGOK,CCdK,ADcJ27B,EGNFgD,KHML,IGNZ,CHM+B,MHP9B,GAAkC,CGO3B,EAAmC,OHPE1+B,KAAV,EAAiBC,MAAjB,EAAyB;AEC5D,AFAE,AIVwB,ADiBhByb,IFrBWuN,EEqBXvN,EHPJxb,KAAK,AGOM,CAACoU,EHPJnU,CGOJ,CAAY,IHPF,CAACD,KAAnB,qBGOQ,EAA6Cu7B,MAA7C;ADNV,ADdI,ADcF,AInBqB,AD0Bd,KC1BD,ADwBA,GHLFr7B,GGOS,GHPH,GAAGD,MAAM,CAACC,MAApB,CAF0D,CAG1D;AEAF,ADDI,AGLIsb,ADaEA,ICbFA,EDaEA,KCbK,CAACpH,CDaC,CAACA,CCbV,CAAY,CDaV,CAAY,GCbGyH,OAAjB,sBDaE,EAA8C0f,MAA9C;ADNV,AFAE,AILM,ADYC,QHPHp7B,CILOg8B,IAAL,CJKI,GAAG,IAAb;AECF,ADDI,AGJC;AFML,ADDA,ADAE,AGOMtB,IAAAA,KHPD,IAAIz6B,MAAM,GAAG,CAAlB,EAAqBA,AGOM,GAAG,GHPH,CGOrB,EHPwBL,MAAM,CAACM,MAAhB,IAA0BF,MAA/C,EAAuDC,MAAM,IAAI,CAAjE,EAAoE;AEEtE,ADDA,ADAG,AGOI,GARL,OHCKE,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWT,MAAM,CAACK,MAAD,CAAjB,CAAR;AEEH,ADDA,ADAG,AGOF,EAED,QHTOK,CAAC,GAAGF,IAAI,CAACC,KAAL,CAAWT,MAAM,CAACK,MAAM,GAAG,CAAV,CAAjB,CAAR;AEEH,ADDA,2BGNU;AFQV,ADDA,ADDG,AILK,UJKDE,CAAC,AILKo3B,GJKF,CAAE,CAAN,IAAWp3B,CAAC,AILX,GJKcN,KAAf,IAAwBS,CAAC,GAAG,CAAE,CAA9B,IAAmCA,CAAC,GAAGP,MAA3C,EAAmD;AEGtD,ADDA,ADDI,AILI,ADaRma,MAAM,CAACmd,ICbM4E,GJKH,OILF,EDaR,CAAwB,cAAxB,EAAwCX,EHRpC,aGQJ;ADLA,ADDI,ADDA,AILC,ADcL,uBFRgBzS,SAAZ,EAAuBC,OAAvB,EAAgC;ACEpC,ADFoC,AGJhC,ADaJ;ADNA,AFHG9oB,AIHH,ADaA,MHVGA,MAAM,GAAG,KAAT;AEIH,ADHQ,AGHR,ADaA,QFVY,CAACR,eAAL,EAA0B;ACIlC,ADHY,ADDT,AIFH,ADaA,UHXOW,CAAC,CCCU,GDDN,CAAE,CAAX,EAAc,sDCEH,YADF;ACIZ,ADFS,ADFLP,AIFJ,ADaA,QHXIA,MAAM,CAACK,MAAD,CAAN,GAAiB,GAAjB;AEKJ,AFJID,AIFJ,QJEIA,MAAM,GAAG,IAAT;AEKJ,ADFQ,ADFJ,AGUJ,OHbG,ECKUF,AEQJw7B,IHTD,ECCA,EDDIn7B,CCCU,ADDT,IAAIN,EGSjB,CAAyBi7B,EHTjB,CGSR,CHTwB,CGSM,UFRtB;ACGR,AFHIl7B,AGSF,QHTEA,MAAM,CAACK,MAAD,CAAN,GAAiBJ,KAAK,GAAG,CAAzB;AEIJ,ADHQ,ADAJG,AGSFqb,EAAAA,MFTU,ADARrb,CCAS,AESJ,CAACiU,GAAR,CFTgBnU,ADAR,AGSI,GHTD,GCAL,CDAJ,CCAsB,mBESxB,EAAyCg7B,GAAzC;ADLF,ADHY,ADAR,AGSH,YFTiB,qBGNF,2CHOF,qBADF;ACIZ,ADFS,AGRO;AFWhB,AFJG,UAAIx6B,CAAC,IAAI,CAAE,CAAX,EAAc;AEKb,ADFI,ADFJV,AIPIgpB,QJOJhpB,CCESmpB,KDFH,CAAC9oB,ICEH,EDFS,CCES4oB,EDFN,CAAV,CAAN,CIPgB0O,EJOK,CEIT1O,CDFR,CDFJ,KIPI,EFWJ,CEX6BhN,CFWNoO,GEXnB,CAA8B,EFWlC,EAA+BnB,MEXGhN,CFWlC,EAAwC,IEXC,EAAI;AFWL,ADDpC,ADFJ9b,AIPQqb,QJORrb,AIPQqb,CHSC2N,KDFH,CIPS,CAAC/U,CJOP,EIPD,CAAY6H,CJOpB,MIPQ,CHSJ,GAA2B,IAA3B;AACA,ADFJ,OAHD,ECKUmN,IDDL,IAAI3oB,CAAC,IAAIP,ICCT,EDDA,CCCyB,CDDR,GCCjB;ACCA,ADAA,ADDJH,AITQ,QJSRA,CECSipB,ADAAK,GGVGpN,EJSN,CAAC7b,GECH,CEVe,CHUf,CCAiB4oB,AFDR,ECCU,AGVA/M,CJSP,CAAV,CAAN,CCCI,EDDiB/b,CECjB,AEV0B,CAACG,IJSJ,EITnB,CJSsB,CAA9B,AITuC;AFWnC,ADAA,ADDJF,AITY8b,QJSZ9b,CECSiqB,ADAAd,CGVGrN,GHUR,CDDE,CECF,CDCM5B,CDFD,AITU,CFUD+P,AEVElO,GJSpB,CCEgB,CAACqN,CCDb,CEVQ,CHWF,AGXkB,IHWJlP,MAAM,AGXF8B,CHWG7B,KGXG,EAAI,EHW5B,IAAkCD,MAAM,CAACmP,MAAzC,IAAmDnP,MAAM,CAACoP,KADhE;ACCA,ADCA,ADFJ,AITgB,SFUPR,ADCAS,OCDL,AEVgBqP,GFUD9P,ADCf,GACMtN,AGZgB,GAAGd,CFUH,KAAK,ADEZ,CAAC4B,CGZiB,CAAC3B,CFUlC,SDEM,GGZmB,CHYOa,AGZgB,QAAvB,CHYgB,AGZ7B,CHY8BgB,kBAApC,IACChB,SAAS,CAACiB,eADX,IAC8BjB,SAAS,CAACgO,cAF9C;AAGA,ADJL,AITiBoP,KJnBwC,CA6B1D,GCGWnP,GGbOmP,MAAM,CAACsD,CHanB,GAAmB,AGbP,GAAclgB,EHa1B,IGbgC,CAACE,KAArB;AFWZ,ADIA0M,AGdYgQ,IHcZhQ,ICJI,CAAClO,GEVOke,GHcD,CAAClP,CCJC,CAACjO,AEVI,CAAC0X,IHcnB,CGdY,EHcUrK,CGdK9M,KFUtB,CAAwB6M,ADIA,AGdI,CAACjO,EAAtB,EHcsB,ICJ7B,ADIL,CCJA,EAAyC;AACrC,ADIP,2CCJqCiO,SAA9B;AACH,ADKL,ADPF7oB,AITkB,IJSlBA,MAAM,EITY,CJST,IAAT,AITsB,CAAC0b,OAAL,CAAakgB,OAAb,CAAqB3L,WAArB,CAAiC2I,MAAjC;AHiBpB,AGhBiB,WALD;AFiBR,ADKR,ADRE,AIRW,SFWA1E,AFHN,IAAIj0B,MAAM,GAAGL,EEGZ,GAAuBq0B,CFHL,CAAC/zB,MAAP,GAAgB,CAAlC,EAAqCD,IEGU,CAACk0B,CFHL,IAAI,CAAV,IAAen0B,MEG9C,AFHN,EAA4DC,MAAM,IAAI,CAAtE,EAAyE;AEInE,ADKR,ADRG,AIRM,OAVD,EFqBKm0B,AEXFxG,CJQJztB,CAAC,GAAGC,AIlBH,CAUS,GJQF,CAACC,KAAL,CAAWT,AIRLmuB,EFWT,CEXY,EFWc,AEXV,CJQI,CAAC9tB,EEGrB,IFHoB,CAAjB,CAAR;AEKK,ADIR,ADRG,AIRSob,QAAAA,CFYCgZ,CFJN/zB,CAAC,GAAGF,CIRQ,CFYX,AEZY6T,EJQL,CEIQqW,AFJPjqB,AIRJ,CAAY0tB,GAAZ,CJQD,CAAWnuB,GEId,GFJoB,CAACK,MAAM,GAAG,CAAV,CAAjB,CAAR;AEKK,ADIR,AGhBS,OAZD,EFwBKq0B,WAAL,GAAmBhK,SAAnB;AACA,ADIR,ADTG,AIPE,SFYQT,CFLN1pB,CAAC,GAAG,CAAE,CAAN,IAAWA,CAAC,GAAGN,KAAf,CEKC,GAA6ByqB,AFLNhqB,CAAC,GAAG,CAAE,CAA9B,GEKC,CFLkCA,CAAC,GAAGP,MAA3C,EAAmD;AEM9C,ADIR,ADTI,SEKS+pB,KFLH,cEKF,GAA2BQ,SAA3B,EFLJ;AEMC,ADIL,ADTI;AEOA,ADGJ,iCGjBgB;AFehB,ADGA,ADVGtqB,AIRa,MJQbA,MAAM,GAAG,KAAT;A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ERS,CDiBH2mB,GDTX,CERkB,CAAC8L,CFQNzyB,KCSP,ADTN,GCSyB,IAAnB,KCjBQ,CAAwBwyB,aAAxB;AACH,ADiBL,ADTN,SAAKvyB,ECSMmoB,QAAL,GAAgBJ,ADTtB,GAAqB/nB,ICSf,SDTN;AEPO,ADiBD,OCvBA,IDuBK1C,MAAL,CAAY6Z,QAAZ,GAAuBkQ,qBAAvB,CA/BqB,CAiCrB;ADVN,SAAKpnB,gBAAL,CAAsB,OAAtB,EAA+B,YAAY;AEPrC,ADkBA,ADVL,UERS,ADkBA2nB,GDVF,EEROkK,GFQF/xB,KAAZ,GERK,EAAsB,ADkBtB,EAAwB;ACjBpB,ADkBA,ADVT,KAFD,OCYgBqoB,GClBC,IAAIkC,EDkBI,GAAG7C,EClBX,CAAY,GDkBK,CAACI,KAAzB,CClBoB0C,OAAD,EAAUC,MAAV,EAAqB;AACpC,cAAIhD,KAAK,CAACsK,WAAN,CAAkB7K,WAAtB,EAAmC;AAC/BO,ADiBR,ADVV,SAAKvnB,GEPaunB,ADiBJY,KCjBS,CAAC0J,GDiBD,GAAG1L,CDV1B,CAAsB,GEPJ,CAAkBiG,IAAlB,CDiBmB,CAAChE,CCjBKhP,IAAzB,AFOlB,CEPgD,CFOT,QCU7B,CCjBsC8R,CAAC,ADiBM,ECjBF,AFOF;AEN7B3D,ADiBR,ADVb,aAAO,CEPcA,EDiBF,EDVPxnB,CEPc,CAAC8xB,WAAN,AFOrB,CEPuCnlB,KAAlB,4BDkBFyZ,WAAW,CAACiC,eADZ,QAAN;AChBQiK,ADkBX,ADXV,KAFD,SELsBA,kBAAkB;AAClB/H,AFOtB,cEPsBA,OAAO;AACV,ADkBT,YAAInC,CCtBI,EAIGgD,KAJH,CAIS,ADkBJ,GAAG/tB,KAAhB,EClBiB+I,ADkBM,KClBD,EAAI;AACd,ADkBR,ADXf,WAASlG,KCWY,EClBMsnB,CFO3B,CAAkBrnB,GEPc,CAACmmB,OAAV,EAAmB,MFO1C,EAAuClmB,SAAvC,EAAkDC,SAAlD,EAA6D,ICY5C,4BADF;ACjBYwY,ADmBf,ADZX,SAAK1Y,OEPqB0Y,OAAO,CAACzS,IFOlC,CEP0B,CAAc,CFObjG,mBAA3B,WEP0B,EAA+CiG,KAA/C;AACH,ADmBhB,ADZP,OCjC2B,CA+CrB,ADdF/F,SAAJ,EACC,KAAKC,QAAL,GAAgB,IAAIlC,KAAJ,CAAUgC,SAAV,EAAqBC,SAArB,CAAhB,CADD,KAGC,KAAKC,QAAL,GAAgB,IAAIlC,KAAJ,CAAUgC,SAAV,CAAhB;;AETqBoqB,ADqBhB,ADVN,SAAKvqB,KEXiBuqB,MAAM,CAACpkB,IFW7B,CEX4B,AFWN,CEXA,oBFWtB,EAA6C,YAAY;AEVtC,ADqBrB,ADVG,aEpBiB,AFoBV,KAAKjG,mBAAZ;AEVc,ADqBjB,ADVG,KAFD;AERW,ADqBb,SClCmB,CAAP;AAcH,ADqBT,ADVE,SAAKF,gBAAL,CAAsB,kBAAtB,EAA0C,YAAY;AEVnD,ADqBL,ADVG,METC,OFSM,KAAKE,mBAAL,GAA2B,KAAKI,SAAvC;AACA,KAFD;;ACYM,ADRN,SAAKN,CCQOqoB,OAAO,GAAG,KDRtB,CAAsB,GCQVA,OAAU,CAACjrB,ADRvB,EAAmC,GCQb,EAAQE,MAAR,CDRyB,CCQN;AAC/B,ADRT,UAAIiD,ECQW4nB,GDRN,GAAG,CAAZ,ECQwB,GAAGX,MAAM,CAACI,KAAzB,ICpBY4K,QAAQ;AACxBA,MAAAA,MAAM,CAACvK,KAAP,CAAa1W,QAAb,GAAwB,UAAxB;AACAihB,ADmBI,ADRT,MEXKA,KFWA,CEXM,ADmBErK,CCnBDF,EFWHznB,CAAC,EEXL,CAAaiyB,AFWL,CAAb,CCQsB,CDRNjyB,CAAC,CCQQlD,ECnBpB,AFWe,GEXQ,CDmBnB,CDRgB+C,CCQQ,ECnB5B,KFWe,CAAc5C,MAAlC,EAA0C+C,CAAC,EAA3C,EAA+C;AEV1CgyB,ADmBQ5Z,ADRZrY,MEXIiyB,EFWJjyB,ECQYqY,ECnBF,CAACqP,AFWN,ICQc,ADRV,CEXL,ADmBgBK,CCnBHoK,GDmBL,ADREryB,CCQW,ECnBrB,GAAsB,EFWjB,CAAcG,CAAd,EAAiB/C,MAA1B,MEXI,wBDoBc,4CADN;AAEH,ADTT;AEXI,WAAKk1B,cAAL,CAAoBH,MAApB;ADsBI,ADVT,YCUejK,CDVRhoB,KAAP,gBCUqC,GACtBonB,kBAAkB,IAAIQ,SAAS,IAAI7qB,MADzC;ACpBJ,ADsBI,ADXT,KAND,KELYs1B,EDsBIpK,cCtBY,CDsBG,ECtBAvQ,CDsBG,OCtBK,CAACC,aAAT,CAAuB,KAAvB,CAAzB;ADuBQxa,UAAAA,CAAC,EAAE,CADiB;ACrB5B,ADuBQG,ADXd,SAAK4C,CEZOoyB,ADuBEh1B,CAAC,EAAE,CAFiB,MDTlC,EEZwB,CFYL,EEZQ,KAAKu0B,KFYD,YEZJ,EAArB;ADwBQh1B,ADXb,UCWaA,GDXN,ECWW,EAAEA,CDXRiD,ICQqB,IDRjC;AEZKuyB,ADwBQt1B,ADXb,KAFD,CEXMs1B,IDwBQt1B,MAAM,EAAEA,ICxBA,CAAC6a,EAAjB,GAAsB0a,YAAtB;AACAD,ADmB4B,ADNlC,MEbMA,GDmBI,aCnBY,CAAC3K,KAAjB,CAAuB7qB,KAAvB,GAA+B,MAA/B;AACAw1B,ADwBI,MCxBJA,MDwBUnK,QAAQ,ECxBF,CAACR,ADwBIM,KCxBrB,CAAuBuK,SAAvB,GAAmC,IDwBQ,GCxB3C,ADyBU,KAAI,CAACpK,sBAAL,CAA4BtrB,KAA5B,EAAmCE,MAAnC,EAA2C6qB,SAA3C,CADiC,GAEjCK,eAFN;ACvBJoK,AFaP,MEbOA,KFaElyB,OAAT,CAAiBC,GEbM,CAACsnB,KAAjB,CAAuB8K,GFa9B,EAAgCnyB,IEbzB,GAAmC,QAAnC,QFaP,EAAyDT,SAAzD,EAAoEC,SAApE,EAA+ES,SAA/E,EAA0FC,SAA1F,EAAqG;AEZ9F0xB,AD0BI,ADbV,MEbMA,GFaD7xB,GEbO,AD0BIgoB,CC1BH6E,SFab,EEbM,CAAmBoF,AD0BI,ADbRjyB,GCaW,KAAI,CAACioB,IDbrC,GEbM,aD0B0B,CAClBH,QAAQ,CAACrrB,KADS,EACFqrB,QAAQ,CAACnrB,MADP,CAAtB;ADZV,SAAKsD,uBAAL,GAA+BA,uBAA/B;AEbM,AD2BI,ADbV,SAAKP,EEdM2yB,CD2BK7Y,KDbhB,ECauB,CDbP,ECaUwO,EDbNxqB,KAAJ,CAAUgC,KCaa,CAACkY,GDbxB,EAAqBjY,KEd/B,AD2BoB,CAAyB,GDbnC,CCaU,CAAhB,ADbsCS,SAAhC,EAA2CC,SAA3C,CAAhB;ACcUqZ,ADZV,QCYUA,ADZN5Z,KAAK,ECYQ,CAACsoB,ADZN,CAAZ,KCYU,CAAezrB,KAAf,GAAuBqrB,QAAQ,CAACrrB,KAAhC;AC1BJ,AD2BI+c,ADZV,QCYUA,ADZNpZ,EEfQkyB,KD2BK,CAACpK,GDZH,GCYL,ADZQ1oB,CCYO7C,EC3BE,GAAG2a,CD2BpB,EDZiB,CCYOwQ,ADZNznB,IEfU,CAACkX,GD2BG,CAAC5a,MAAjC,CAvB+B,CAyB/B,CC7BoB,CAAuB,AFerD,KEf8B,CAAxB;AFgBN,QAAI2D,QAAQ,GAAGd,SAAS,CAACM,WAAV,EAAf;AEfM,AD6BIqnB,QAAAA,EC7BEoL,KD6BK,CAACpK,KC7BK,CD6Bb,CAAeH,CC7BC,KAAKwK,OD6BrB,SC7BgB,EAApB;AFgBN,SAAK,IAAI3yB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGS,QAAQ,CAACxD,MAA7B,EAAqC+C,CAAC,EAAtC,EAA0C;AEfpCyyB,AD6BI,ADbT,MEhBKA,IFgBD/xB,ECaSqnB,KDbF,GAAGtnB,CEhBM,CAACkX,EAAhB,GAAqB+a,CFgBJ,CAAC1yB,CAAD,CAAtB,GCaS,EAA4B,EC7BhC;AACAyyB,AD6BQ,ADbb1yB,MEhBK0yB,AFgBL1yB,ICaa,CDbR,ICaY,ADbRW,CCaS6nB,KC7BE,CAACd,AFgBL,CAAC9mB,IEhBZ,CAAsB/D,AFgBlB,IAAiB8D,CEhBrB,GAA8B,GFgBF,CAACE,EEhB7B,GD6BQ,CAAmC0mB,OAAnC,ADba,ECa+BxqB,CDbPyD,KCarC,EAAoD0nB,IDbxD,CAAT,GCaa;AC5BR+J,AD6BK,ADbV,MEhBKA,GDAmC,CA+B/B,EC/BE,CAAChF,WAAP,CAAmByF,eAAnB;;AAEA,AFeN,SAAK5xB,EEfM+xB,YFeX,GAAsB7yB,KAAtB,GEfM,CAA6B0yB,eAA7B;AACN,AD6BU1L,QAAAA,KAAK,CAACyB,SAAN,GAAkBP,QAAlB;AACAlB,ADdV,QCcUA,CDdLvnB,ICcU,CAACipB,QAAN,GAAiB9O,ADd3B,CAAsB,MCcZ,SDdV,EAAuC,YAAY;ACezCoN,ADdT,QCcSA,KAAK,ADdP,CCcQ2B,IDdHvoB,UCcH,GAAuBgoB,ADdhC,aCcS;AACH,ADdN,KAFD,ECnBM,gCCKY6J,QAAQ;AACpBA,AD+BA,MC/BAA,MAAM,CAACvK,KAAP,CAAayK,MAAb,GAAsB,MAAtB;AACN,AD+BF,ADfE,SAAK1yB,gBAAL,CAAsB,yBAAtB,EAAiD,YAAY;ACgB/D,ADfG,aAAO,KAAKY,uBAAZ;ACgBH,ADfG,KAFD;ACkBF,4CChC4ByyB,WAAW;AAC/B,ADgCR,ADhBE,SAAKrzB,EEhBMszB,cFgBX,CEhBM,AFgBgB,CEhBKD,SAArB,MFgBN,EAAwC,YAAY;ACiBtD,ADhBG,aAAO,KAAKhyB,cAAZ;AEhBK,ADiCR,ADhBG,KAFD,MEfWkyB,2BAAL;;AACA,AFiBN,SAAKvzB,EEjBMwzB,cFiBX,CAAsB,IEjBhB,iBFiBN,EAA6C,YAAY;AEhBtD,ADgCG,ADfL,UCeWrK,GDfJ,KAAK,GCeU,CDfN,ECeS,GDfJxoB,MCeVwoB,ODfX,ICeyB,GAAM;AACtB,ADfT,KAFD,OCiBc;AACA5B,UAAAA,KAAK,CAAClqB,MAAN,CAAa6S,MAAb;ADdd,SAAK5O,oBAAL,GAA4B,GElBX+xB,SFkBuB,EElBZ;AACtB,ADgCQ,ADdb,UElBWI,ADgCE,ADdT11B,KCca,CChCA,ADgCCqrB,GChCEnR,AFkBP,GAAG,KElBY,AFkBP1W,CElBQ2W,UDgChB,GChCO,CAAuB,IFkB3C,CElBoB,CAAf;AACAub,AD+BoC,ADbzC,MElBKA,IFkBDjyB,EElBO,CAACymB,KAAP,CAAa8K,AFkBL,GAAG,IAAI70B,EElBf,GAAyB,IFkBd,CAAcH,CElBzB,QFkBW,CAAhB,CAFuC,CAIvC;AEnBK01B,AD8BmD,MC9BnDA,MAAM,CAACxL,CD8BC,IC9BR,CAAayL,MAAb,GAAsB,KAAtB;AACAD,AFmBLjyB,MEnBKiyB,AFmBLjyB,MEnBW,CAACymB,EFmBH,CAACxmB,EEnBL,CAAagxB,MFmBlB,CEnBK,AFmBe,CAApB,EEnB4B,AFmBL,CAAvB,EAA0B,CAA1B,CEnBK,CFmBwB,CAA7B,EALuC,CAMvC;AEnBKgB,AD6BQ,MC7BRA,MAAM,CAACxL,ID6BQ,CC7Bf,CAAa0L,ED6BL,MC7BR,GAAwB,MAAxB;AACAF,AD6BK,ADVVjyB,MEnBKiyB,AFmBLjyB,GCMS,CAIE,EC7BA,CAACymB,EFmBH,CAACxmB,CCUQ4nB,CC7Bb,CAAauK,MFmBlB,CCUW,ADVS71B,ECUS,GC7BxB,GAA4B,CFmBJ,GAAG,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAPuC,CAQvC,oBEpBK;AACAs1B,AD6BQ,MC7BRA,ID6BQ,KC7BC,AD6BG,CC7BF7F,AD6BGpE,WC7Bb,CAAsBqK,MAAtB,ID6BQ;AC3BR,AD2BoC,ADTzCjyB,MAAAA,IElBWqyB,KFkBF,CAACpyB,GElBU,GAAGwW,GFkBvB,CAAoB,CAApB,EAAuBla,CElBQ,CAACma,OFkBA,GAAG,CAAnC,EElBuB,AFkBe,CElBQ,AFkB9C,EAAyC,CAAzC,EATuC,CEThB,AFoBvB,CEpBK;AACA2b,AD0BmD,MC1BnDA,SAAS,AD0BD,CC1BEjG,SAAV,GAAsB,iBAAtB;AACA6F,AFmBL,MEnBKA,IFmBDr1B,EEnBO,CAACovB,AFmBL,GAAG,KAAK5sB,GEnBV,CAAmBizB,SAAnB,UFmBK,CAA6Bp2B,MAAvC;AEjBK,ADwBQ4pB,UCxBFyM,ADwBEzM,UCxBQ,GAAGpP,MDwBQ,ECxBA,CAACC,aAAT,CAAuB,MAAvB,CAAnB,gBDyB4CmR,SADjB,EAAnB;ACvBRyK,ADyBQ,ADRb,MEjBKA,KFiBA,IAAIp2B,CEjBM,AFiBL,CEjBMya,ADyBI,ECzBf,AFiBQ,CAAb,EEjBqB,ADyBR,ADRGza,CAAC,GAAGU,CEjBM21B,EFiB1B,EAAyBr2B,CAAC,EAA1B,EAA8B,QEjBT,EAAhB;AACAo2B,ADyBK,ADRT,MEjBIA,MFiBAtzB,CAAC,GEjBS,AFiBN,CEjBOynB,IFiBFrnB,CEjBT,CAAiBozB,KAAjB,GAAyB,OAAzB,MFiBI,CAA6Bt2B,CAA7B,IAAkC,CAA1C;AEhBIo2B,ADyBC,MCzBDA,CDcA,CAnGqB,CAgHrB,OC3BU,CAAC7L,KAAX,CAAiBwK,OAAjB,GAA2B,SAA3B;AACAqB,AFgBJ,MEhBIA,OFgBC,GEhBS,CAAC7L,AFgBNpqB,CAAC,GAAG,CEhBT,AFgBJ,CEhBqB81B,CFgBL91B,CAAC,GAAGO,GEhBhB,AFgBJ,EAAyBP,CEhBO,AFgBN,EAA1B,EAA8B,EEhB1B;AACAi2B,AFgBH,MEhBGA,QFgBEp2B,CAAC,CEhBO,CAACuqB,EFgBJ,CAAL,EEhBF,CAAiB+G,EFgBJnxB,CAAC,IAAI,CAAL,EEhBb,EFgBuBA,CEhBO,AFgBN,IAAIO,GAAG,GAAG,CEhBlC,AFgBE,CAAD,IAAyCV,CAAC,IAAIU,GAAG,GAAG,CAAX,IAAgBP,CAAC,IAAI,CAAlE,EAAsE;AEfnEi2B,ADyBA,ADTF,MEhBEA,IDyBMxK,MCzBI,CAACrB,IDyBM,CCzBjB,CAAiByK,CDyBG,KCzBpB,GAA0B,CDyBpBpJ,WAAc,GAAM,MCzB1B;AACAwK,ADyBI,ADTN,MEhBEA,MDyBQ,CAACvM,GCzBC,CAACU,CDyBG,CAACxB,GCzBf,CAAiBwN,KAAjB,EDyBI,CCzBqB,CDyBG,gBCzB5B;AACAR,ADyBQ,ADTV,MEhBEA,MAAM,CAACjG,WAAP,CAAmBsG,UAAnB;AD0BQ;ACzBR,AD0BK,ADVRtyB,UAAAA,CEhBQuwB,QFgBC,CAACtwB,EEhBP,CAAiB,MAAjB,AFgBH,CAAoB,KAAKb,uBAAL,CAA6B/C,CAA7B,IAAkC,CAAtD,EAAyD2C,CAAzD,EAA4D,CAA5D,EAA+D,CAA/D;AACA;AEfG,ADyBI,ADTR,OAtBsC,CAwBvC,EElBW0zB,EDyBE3M,KAAK,CAACf,cCzBc,GAAGvO,ADyB3B,EAA6B,MCzBM,CAACC,aAAT,CAAuB,KAAvB,CAA/B;AACAgc,AD0BQ,MC1BRA,sBAAsB,CAAC/b,EAAvB,GAA4B,KAAKgc,6BAAL,EAA5B;AACAD,AD0BQ,MC1BRA,sBAAsB,CAACjM,KAAvB,CAA6BsF,OAA7B,GAAuC,MAAvC;AACA2G,AD0BQ,ADVb1yB,MEhBK0yB,AFgBL1yB,QCUmB+nB,CDVV,CAAC9nB,SAAV,CCU+B,ADVX,CAApB,CEhB2B,CAACwmB,AD0BMV,ADVX,CAAvB,EAA0B,CAA1B,CEhBK,AD0BkC,CC1BLoM,AD0BMnK,ADVXzrB,QEhBxB,CFgBiC,EEhBO,CFgBJ,CCU5B,CDVb,EAzBuC,CESlC,AFiBL;AEhBKm2B,AD0BQ,MC1BRA,QD0BczK,UAAU,GACVF,CC3BQ,CAACtB,KAAvB,CAA6BwK,ID2BH,CAACna,EC3B3B,GAAuC,KD2BzB,GAA0BiR,EC3BxC,UD2BoD,CAACxB,WAD7C;ACzBRmM,AD2BQ,ADXb1yB,MEhBK0yB,AFgBL1yB,QCWmBkoB,CDXV,CAACjoB,SCWoB,ADX9B,CAAoB,CAApB,CEhB2B,AD4BR8nB,CC5BStB,AFgBL,CAAvB,EAA0BlqB,EEhBrB,CAA6Bq2B,KD4BH,CAAC7b,ADZG,GEhB9B,AFgBiC,EAAtC,CEhB8C,CFgBJ,CAA1C,GEhBK,AD4Bc,GAA2BgR,YAAY,CAACI,YAD9C;AC1BRuK,AD4BQ,MC5BRA,QD4BctK,YAAY,EC5BJ,CAAC3B,AD4BMV,KC5B7B,AD4BkC,CC5BL8M,AD4BMrL,SC5BnC,AD4B6B,CAAgB5rB,EC5BJ,GD4BZ,GAAwBqsB,UAA7C,GC5BR;AACAgK,AD4BQ,ADZb,MEhBKA,IFgBD,EEhBO,CAACjG,CD4BO3D,CDZVlpB,SEhBJ,CAAmBuzB,ED4BQ,CDZ5B,ECY+B3M,CDZV,CAAzB,EAA4B,CCYY,CAACyB,SAAN,CAAgB1rB,CC5B9C,KD4B8B,GAAyBosB,WAA/C;AC3BX,AD4BW,ADZZ,cCYkBI,QAAQ,GAAGvC,KAAK,CAACyB,SAAN,CAAgBtrB,CAAhB,GAAoB+rB,UAArC;AACA,ADZZjoB,QAAAA,MCYkBuoB,GDZT,CAACtoB,ICYgB,GAAG8lB,EDZ7B,CAAoBxpB,ECYc,CAACirB,MDZN,GCYA,ADZG,CCYanrB,CAAhB,ADZ7B,EAAoC,CCYa6rB,ADZjD,EAAuC,CAAvC,EAA0C,CAA1C,EAF2B,CAG3B,ECWY,CAZyB,CAczB;AACA;AACA,ADdZloB,QAAAA,SAAS,CAACC,SAAV,CAAoB,CAApB,EAAuB1D,KEjBPs1B,IFiBgB,GAAG,EAAnC,EEjB2B,AFiBY,CAAvC,EAA0C,CAA1C;AEhBI,AFiBJ,UEjBUzB,OAAO,GAAG3Z,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;AACA0Z,AD8BQrK,MC9BRqK,ID8BQrK,GC9BD,CAA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AFmDbjqB,MAAM,CAACM,MAAjB,QEnDiB,CAA4Bo4B,MAA5B;AACH,AFmDd,SEvDS,CFuDLlzB,CElDUwoB,EFkDP,GEvDE,AFuDC,CElDU,IFkDLxoB,GAAf,GElDoBwD,KAAK,EAAI;AACZohB,ADkBZ,ADgCL,UElDiBA,AFkDbzkB,GChCQ,ADgCL,EElDe,CAACivB,AFkDb,CChCM1H,IDgCDvnB,GChCH,ADgCZ,CChCwB,EClBP,CAAkB,OAAlB,ADkBQwnB,EClBmBkH,KDkBpB,EAAUjH,MAAV,EAAqB,GClBiB,CAAC0K,cAA9C;ADmBR,ADgCT,UAAIhyB,EChCS8V,CDgCN,GAAG,KChCY,ADgCP9V,CChCQiW,EDgCvB,UChCa,IAA0BH,SAAS,CAACG,YAAV,CAAuBW,YAArD,EAAmE;AClB3D0N,ADmBJ,ADgCb,UEnDiBA,AFmDb3kB,GAAG,CChCYwoB,CCnBG,CAAC6G,AFmDb,KAAKrvB,GAAf,MChCmC,GAAG2kB,CCnBrB,CAAyBphB,GDmBC,CAACklB,CCnB3B,EAAgCmG,kBAAkB,CAACyD,CDmB9B,CACrB/N,YCpBA,IDmBqB,CAAzB;ADiCb,UAAInkB,GAAG,GAAG,KAAKA,GAAf;AEnDiBwkB,ADoBJxO,ADgCb,UEpDiBwO,ADoBJxO,ADgCT7V,GAAG,EEpDe,CAACmkB,AFoDb,GChCY,CAACnO,CDgCRhW,GAAf,QChCa,CAAuB2W,ECpBnB,CAA0B1T,KAA1B,IDoBJ,CACI;ACpBH,ADqBO2T,AD+BrB,SE7DS,CF6DLjX,EC/BiBiX,CD+Bd,GAAG,CC/BgB,EAAE,ED+BbjX,GChCE,ADgCjB;AEnDM,ADqBe0U,AD+BrB,OEtEK,GFsEDvU,EC/BiBuU,CD+Bd,GAAG,CC/BgB,EAAE6T,ED+BbpoB,GAAf;AEnDE,ADkBe,ADkCjB,UAAIG,CCnCS,EAIOiW,AD+Bb,GAAG,CCnCG,CAIY,GD+BVjW,GAAf,IC/ByBiU,MAAM,EAAI;AACd+S,YAAAA,qBAAqB,CAAC/S,MAAD,CAArB,CACKgC,IADL,CACU,UAAA8R,CAAC,EAAI;AACP3D,AD6B7B,WAAK,GC7BwBA,CD6BpB/mB,CAAC,GC7BwB,AD6BrB,CC7BsBwmB,AD6BnC,EAAgBxmB,CAAC,GAAGpC,GAApB,EC7B6B,AD6BJoC,CAAC,EC7BuB,ED6BnB,CAA9B,CC7B6B,CD6BI;AC5BJ8pB,AD6B5B,YAAI5sB,CAAC,CC7BuB4sB,ED6BpBntB,KC7B2B,CD6BrB,CAACqD,CAAD,CAAd,mBEpDwBu0B,SAAS;AAC7B,ADuBqB,AD6BzB,UEpDUxN,EFoDN1pB,CCjCgB,ADiCf,EEpDU,ADwBUstB,CD4BjBhuB,EEpDU,EDmBE,CAKWotB,CCxB3B,AFoDU,CAAC/pB,CAAC,GCjCI,ADiCD,CAAL,CAAd;AEnDI,ADwBa,AD4BjB,UEpDUg0B,CDaE,CDuCRpxB,CC3Ba+nB,KAZL,CAYW,ID2BR,GAAGloB,GEpDW,ADyBNqoB,AD2BF,GEpDWrT,ADyBN,AD2BFva,CAAN,CC3BY,ED2BFwF,GAAG,CEpDS,CAAC8V,CFoDPnb,CAAhB,GAAoBsF,GAAtC,MEpDgC,CACxB,KAAKsxB,uCAAL,EADwB,CAA5B;AAEAD,ADwBgBjK,AD2BpBptB,MEnDIq3B,EFmDJr3B,IC3BoBotB,ED2Bd,CAAC/pB,CAAD,CAAN,CC3B0B,ED2Bd,CAACmC,GAAG,CEnDO,CAACslB,CFmDLvqB,CAAN,GEnDT,AFmDmBkF,CEnDOmwB,EFmDJ,GAAGl1B,CAAhB,GEnDT,AFmD6BgF,GEnDS,AFmD9B,IAA4BO,IEnDpC,OFmDJ,GC3B+DkoB,GAArC,EAAN;ACtBhB,ADuBa,AD2BjBnuB,QAAAA,EElDU24B,CDSE,GDyCN,CAACt1B,CAAC,GAAG,CAAL,CAAN,GAAgB,CAACsC,GAAG,GAAGpF,CAAN,EElDiB,CFkDPqF,EElDUkV,CFkDP,GAAGpa,CAAhB,GElD4B,AFkDRmF,CElDSkV,EFkD9B,IAA4B9U,OElDP,CAAuB,GFkD5D,GElDqC,CAAjC;AACA0yB,ADuBK,AD2BT,MElDIA,GDKI,MAkBO,IAAI/c,SAAS,CAACc,CCvBD,CAAC+T,SAAzB,CDuBW,EAA4B,yBCtBfmH,OAAO,CAACt3B,MADhC;AAEAq4B,ADsBQ,AD2Bb,KAlBD,CE/BMA,QDsBY,OAAO5O,SCtBK,CAACe,KAAzB,CAA+B8N,ADsBnB,IAA2B,OCtBvC,CDsBQ,ECtBqC,ADsBI,MCtBjD;AAEA,ADqBY,UCrBNC,QDqBY,aCrBS,GAAG/d,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAA9B,MDsBkB,mDADA,GAEA,+BAFN;ACpBZ8d,ADuBS,ADwBf,ME/CMA,GF+CD3yB,gBAAL,EE/C2B,CAAC8U,AF+CJ,EE/ClB,GAA2B,KAAK8d,AF+CJ3yB,OAAV,EAAmBC,OAAnB,EAA4B,IE/CnB,EAA3B;AFgDL,UAAIC,CAAC,GAAGF,OAAO,CAAC7F,MAAhB;AE/CK,ADuBQ,WCvBH,GDuBS8tB,CCvBL/qB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu0B,GDuBS,GAAG,CCvBL,CAACt3B,MAA5B,EAAoC+C,CAAC,EAArC,EAAyC;AACrC,ADuBQ+W,ADwBjB,WAAK,CE/CU2e,ADuBE3e,GDwBR/W,CAAC,CCxBY,CCvBD,CDuBG,ADwBX,CAAb,CE/CwBu0B,CF+CRv0B,CAAC,GAAGgD,CAApB,CE/C+B,CAAChD,AF+CTA,CE/CQ,AF+CP,CE/Cf,CF+CT,EAA4B;AE9CnB,ADuBYgrB,ADwBpB,YE/CckF,AF+CVhzB,CAAC,CCxBe8tB,EDwBZloB,CE/CW,GAAG4yB,EDuBM,CDwBb,CCxBe,ADwBd11B,CCxBe,ADwBhB,CE/Ca,AF+C5B,CE/C6B2X,EAArB;AACA,ADuBgBsT,ADwBxB,YE/Cczf,AF+CVnO,CAAC,GE/Ca,ADuBM4tB,ADwBhBloB,GE/Ca2yB,IF+CN,CCxBiB,ADwBhB11B,CE/CW,AF+CZ,CE/CaiZ,ADuBMyN,ADwBlC,KE/CqB,IAAgB,IAAhB,GAAuBwJ,KAAvB,GAA+BwF,MAAM,CAACzc,KAAnD;AACA,ADqBuB,AD0B/B,YE/Cc0c,AF+CV/yB,GC1B0B,GCrBV,GAAG6U,EF+CR,GAAG,GE/Ca,CAACC,CF+CTjV,GAAL,GAAWvF,CAAX,GAAe,EE/CV,CAAuB,EF+CRwF,GAAL,GE/CV,AF+CqBrF,CE/CpC,AF+CU,GAA8B,KAAKsF,GAArD;AE9CQgzB,ADmBe,AD4BvB7yB,QE/CQ6yB,AF+CR7yB,ME/Cc,CAACotB,AF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yB,ADgBJzK,UChBIyK,ADgBJzK,cAAc,QChBY,CAAC5D,KAAvB,CAA6BsF,OAA7B,GAAuC,MAAvC;AACA8I,ADgBJ9O,AD4Bd,SAAK9hB,CE5Ca4wB,ADgBJ9O,KAAK,CAACP,WAAN,GAAoB,GChBO,AF4CzC,CE5C0CiB,CDgB5B,CD4BkB,GE5Cd,CAA8BsF,MF4CN7nB,CE5CxB,GAAwC,CF4C1B,EAAiBC,KAAjB,EAAwBC,GAAxB,CE5Cd,CF4C2CC,GAA7B,EAAkC;AACjE;AE5CiB0hB,ADgBJ,AD6Bb,UE7CiBA,IDgBAA,CChBK,CAACwK,GDgBD,CAAC/I,OChBN,CAAkB,CDgBtB,EAAqB,GChBjB;ADiBAzB,AD6BjB,UAAIzhB,EC7BayhB,GD6BR,EC7Ba,CAACyB,AD6BXrrB,IAAI,CAACoI,GAAL,CC7BK,AD6BIF,GC7Bc,AD6BX,GAAGF,CC7BV,ID6BL,IAAwBhI,IAAI,CAACoI,GAAL,CAASH,GAAG,GAAGF,KAAf,CAApC;AE7CiB6hB,ADiBH,UCjBGA,KAAK,CAACyL,mCAAN;AACH,AF6Cd,SEtDS,CFsDLltB,CE7CYqlB,IF6ChB,CEtDS,CASa,AF6CX,UE7CWhlB,KAAK,EAAI;AACdmwB,ADgBJ,AD6BZ,UE7CgBA,EF6CZtwB,EC7BYuhB,ED6BR,GC7Ba,AD6BV7hB,CC7BWujB,ID6BtB,IC7BY,EAAoB,EChBM,CAAC4L,QAAvB,GAAkC,KAAlC;ADiBAtN,AD6BhB7hB,QAAAA,IC7BgB6hB,CD6BX,GAAG5hB,CC7Ba,CAACsjB,GD6BtB,KC7BgB,GAAiB,IAAjB;AChBA1B,ADiBH,AD6Bb5hB,QAAAA,EE9CgB4hB,GF8CX,EE9CgB,CAACwK,AF8Cd/rB,IAAR,OE9CgB,CAAkB,OAAlB,EAA2BwrB,kBAAkB,CAACyD,cAA9C;AF+ChBjvB,QAAAA,IAAI,GAAGJ,GAAP;AE9CgB2hB,ADiBJ+C,AD8BZ1kB,QAAAA,EE/CgB2hB,ADiBJ+C,CD8BT,GAAGzkB,CE/Ce,CAACosB,CDiBH,AD8BnB,CC9BoB,IAAD,CAAP,WCjBI,CACI9rB,KADJ,EACWqrB,kBAAkB,CAACyD,cAD9B;AAEH,ADg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F4CNr3B,IAAI,CAACgJ,IAAL,CAAWF,KAAK,EE5ChB,CF4CmBA,KAAR,GAAgBC,KAAK,GAAGA,KAAnC,CAAP;AACA;AE5CO6gB,QAAAA,KAAK,CAACyP,kBAAN,GAA2BtG,KAA3B,GAAmC,EAAnC;AAEAnJ,AF2CRphB,QE3CQohB,AF2CRphB,KE3Ca,AF2CR,CE3CSwrB,GF2CLzrB,EAAT,UC/BSmmB,GCZD,GAA2B,KAA3B;ADYY;ACXZ,ADW+BC,ADgCvC,IChCuCA,QCX3B/E,AF2CRphB,GChC8C,ECXjC,AF2CR,CE3CSsrB,EF2CN,CAAZ,EAAe,UE3CH,IAAyBD,kBAAkB,CAACE,gBAAhD,EAAkE;AAC9D,ADWR,ADgCH,UChCSnK,IDgCL1pB,CChCU,ADgCT,GChCY,CDgCRgI,GChCN,ADgCH,EAAc;AE1CH0hB,AF2CV,UE3CUA,KAAK,CAAC0P,iBAAN;ADWR,ADiCF,UCjCM,CAAC5K,SAAD,IAAc,EAAEA,SAAS,YAAYE,IAAvB,CAAlB,EAAgD;ACVxChF,ADWJ,UCXIA,IDWE,CCXG,CAACyP,kBAAN,GAA2BnC,QAA3B,GAAsC,KAAtC,qBDYF,sCADF;ACVItN,ADYP,AD+BJ1pB,UE3CW0pB,AF2CX1pB,CAAC,IE3Ce,AF2CXuI,CE3CY8wB,IF2CjB,iBE3CW,GAA8BjP,KAA9B,CAAoCsF,OAApC,GAA8C,MAA9C;AACAhG,AF2CXphB,UE3CWohB,AF2CXphB,KE3CgB,AF2CX,CE3CYgxB,GF2CRlxB,EAAT,cE3CW,GAA4BgiB,KAA5B,CAAkCsF,OAAlC,GAA4C,OAA5C;AACAqJ,ADYRtK,AD+BH,MC/BGA,ICZQsK,KDYC,GAAGtK,SAAS,GCZO,CAACsB,CDYH/F,QCZlB,CDYI,ECZ6B6O,CDYH,IAA1B,GAAiCpK,SAA7C,SCZQ;AACA/E,AF2CZ,UE3CYA,KAAK,CAACkK,eAAN,GAAwBD,kBAAkB,CAACiE,cAA3C;ADaR,UAAIlO,KAAK,CAACP,WAAV,EAAuB;ACZfO,ADaJ,AD8BT,UE3CaA,AF2CT3gB,IC9BW,CCbG,CAACwwB,AF2CT,GAAGxxB,GAAG,GAAGF,KAAnB,mBE3Ca,SDaJ;ACZC,ADaJ,AD8BN,SEpDS,CFoDLmB,KE3CY,CF2CN,GAAGhB,GAAG,GAAGF,KAAnB;AE1Ca,AF2Cb,aAAOhI,IAAI,CAACgJ,IAAL,CAAWC,MAAM,GAAGA,MAAT,GAAkBC,MAAM,GAAGA,MAAtC,CAAP;AE1Ca0gB,ADaR,AD8BL,KArDD,KEUcA,ADaFiF,KCbO,CAACyK,iBAAN,ADaqB,GAAG,SAA1BzK,uBAA0B,CAC5BC,UAD4B,EAE5BC,WAF4B,EAG5BC,cAH4B,EAI5BC,eAJ4B,EAIR;AAEpB,YAAIH,UAAU,IAAIE,cAAd,IACGD,WAAW,IAAIE,eADtB,EACuC;ACnBnCrF,ADoBA,ADyBd,SAAKzgB,CE7CSygB,KAAK,CAACyP,kBAAN,GAA2BnC,IF6CzC,GAAwC,CE7C1B,GAAsC,IAAtC,EF6CoCnvB,KAAV,EAAiBC,KAAjB,EAAwBC,GAAxB,EAA6BC,GAA7B,EAAkC;AE5C5D0hB,ADoBA,AD0Bb,UE9CaA,AF8CTxgB,IC1Be8lB,CCpBD,CAACqK,AF8CT,GAAG,EC1Ba,GAAG,AD0BXzxB,CC1BYknB,YCpBjB,EDoB+B,CCpBD1E,EDoBIwE,GCpBlC,CAAoCc,EF8CpC,CAA8B7nB,GC1Bd,CCpBhB,CF8CA,EE9C8C,ADoBE,AD0BXC,CC1BrC,ID0BA,EE9CA,AF8C4CC,GAA5C,EAAiDC,GAAjD,CAAb,CAFyE,CAIzE;AE/Ca0hB,ADoBA,UCpBAA,IDoBMuF,CCpBD,CAACqK,KDoBO,GAAG,CAACvK,UCpBjB,GAA4B3E,EDoBI,GCpBhC,ADoBmCyE,CCpBDa,OAAlC,GAA4C,ADoB5B,IAAkC,CAAlD,CCpBA;AACAqJ,ADoBA,AD2Bb,UE/CaA,AF+CT5vB,KAAK,EC3BW,CD2BR,GAAZ,SE/CiC,CAAC4mB,SAArB,GAAiC6I,4BAAjC;AACAlP,ADoBI7pB,AD2BjB,UE/Ca6pB,AF+CTtgB,EC3BavJ,CAAC,ECpBA,ADoBEmvB,CCpBD4E,EF+CP,GAAG/rB,CC5BK,ID4BA,IAAIE,CE/CX,EF+Cc,CE/CU4rB,EF+CP9rB,KAAV,CAApB,UE/CuD,CAACgsB,gBAA3C;ADqBI7zB,YAAAA,CAAC,EAAEivB,OAFA;AClBPvF,ADqBInqB,AD0BjB,UE/CamqB,AF+CTtgB,EC1Ba7J,GCrBC,CAAC41B,CDqBG,CD0BV,CC1BYvG,ED0BT,CAAf,EAAkB,KC7BE,sBClBP;AACH,ADqBOnvB,AD0BhB0J,QAAAA,IC1BgB1J,CD0BX,GAAGoI,EC1Bc,EAAEgnB,CD0BX,IAAIhnB,KAAK,GAAGuB,QAAZ,CAAb;AC9BmB,AD+BnBA,QAAAA,GC/BY,KD+BJ,GAAG,CAAX;AE9CQsgB,ADqBC,AD0BT,OAHD,CE5CSA,CDUA,ICVK,AFgDT,CEhDUoK,CDqBC,ED2BP1qB,QAAQ,IAAI5J,GEhDZ,GAA2B,AFgDT,CAACD,GEhDnB,EFgDJ,EAA8B;AE/C7B,ADqBO,AD2BZ4J,OEnFI,CFmFJA,KAAK,CC3Ba+lB,ED2BV,CAAC1vB,MAAM,CAACD,KAAP,CC3ByB,ED2BV,CC3BaqvB,AD2B5B,GAAmB/mB,KAApB,EC3BI,GD2B0BuB,QAAQ,GAAGvB,KAAzC,CAAR;AE/CIixB,ADqBQ,AD2BZ1vB,MEhDI0vB,EFgDJ1vB,MC3BkB+lB,ED2BV,GAAG3vB,EEhDQ,CAACmwB,GFgDH,CAACpwB,KC3BiB,AD2BxB,EEhDP,CAA4Bw5B,ADqBMlK,AD2BZ,CAA1B,UC3BY,SCrBR;AACAkF,AFgDJ,MEhDIA,OAAO,CAACpE,WAAR,CAAoBmJ,eAApB;AACH,ADoBW,cAAIlK,UAAU,GAAGE,cAAjB,EAAiC;AAC7BD,AD2BjB,UAAIxlB,EC3BawlB,MD2BL,GAAG/uB,EC3Ba,ED2BT,CC3BagvB,AD2BZ/uB,KAAL,CAAW+H,KAAK,GC3Be,AD2BZ,CAACE,EC3Bc4mB,CD2BX,GAAG9mB,KAAP,CC3BH,GAAgC+mB,AD2Bb1lB,KAAnC,CAAf,KC3BiB;AACAylB,AD4BjBzlB,MAAAA,KAAK,CC5BYylB,ED4BT,GAAR,KC5B2B,GAAGE,cAAb;AACH,gCCrBD0K,YAAYC,aAAa;AACjC,AFgDL,UEhDS,AFgDLpwB,CEhDMowB,OFgDE,GAAG,CEhDV,AFgDL,EEhDuB,AFgDL;AE/CTA,ADqBI,AD2BZtwB,QEhDQswB,AFgDRtwB,KAAK,CC3BW0lB,ED2BR/mB,G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CtBiBA,CDsBV,CAAC,KAAKnmB,MCtBiB,CAAC8gB,KAAd,CAAoBsF,OAApB,GAA8B,EDsBvC,CAA+B3lB,OAA/B,EAAwCC,ECtB/B,MDsBT,IAAoD,KAAKV,yBAAL,CAA+BS,OAA/B,EAAwCE,UAAxC,CAArD,IAA4G,GAAnH;ACrBiBggB,ADsBjB,KAHD,OCnBkBA,OAAO,CAAC0F,WAAR,CAAoBF,OC/BjBmK,MD+BH,OC/BgBH,aAAa;AACzC,UAAI,CAACA,WAAL,EAAkB;AACdA,AD8BQ,ADuBlB,QErDUA,CFqDLvvB,OCvBmBoS,CDuBxB,EErDqB,CFqDL,EErDQqX,ED8BO,GAAGlE,GDuBRtlB,QAAV,EErD0B,AD8BK,ADuBXC,CErDOsvB,AD8BKlf,ODuBhC,EAA8B,CCvBZ,CAAyB,GC9BjD,CD8BwB,CAAhB;AC7BX,AFqDN,UAAInQ,KAAK,GAAGF,QAAQ,CAACT,CAAT,GAAaU,QAAQ,CAACV,CAAlC;ACvBiB4S,ADwBjB,UAAIhS,ECxBagS,GDwBR,GAAGnS,ECxBY,CAAC6gB,KDwBL,CCxBH,ADwBIrhB,CCxBWpK,ADwBpB,GAAa6K,ECxBR,GAAuB0kB,GDwBP,CAACnlB,CAAlC,SCxBiB;AC7BZ,AD8BY2S,ADwBjB,UEtDWqd,ED8BMrd,CDwBVxc,IAAI,CAACgJ,EEtDS,AD8BG,CAACkiB,CDwBlB,CEtDiB5Q,AFsDN/P,ICxBD,CAAe5K,ADwBT,GEtDS,AFsDN4K,CEtDO8Q,ED8BhB,EDwBC,CCxBuB4T,EDwBPzkB,KAAK,EEtDf,CACf,AFqDiCA,KErD5BgsB,AD6BG,ADwBV,CC/BqB,AD+B5B,CCvBiB,2BC9BR,EADe,CAAnB;AAEAqD,AD8BY,ADuBjB,KAJD,CEjDMA,UAAU,CAAC5J,SAAX,GAAuB6J,WAAvB;AACAD,MAAAA,UAAU,CAACvP,KAAX,CAAiBsF,OAAjB,GAA2B,OAA3B;AD8BYpT,ADuBlB,SAAK/R,GCvBa+R,QAAO,CAACxB,IDuB1B,GAAwB,ECvBN,CACIyU,ODsBYxlB,GCvBhB,IDuBM,EAAmBC,QAAnB,EAA6BC,UAA7B,EAAyCO,UAAzC,EAAqD;AEnDvE,AD8BgB,AD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AI;AAC/B0H,ADgBQtI,ADuCjB,QEvDSsI,EFuDLhpB,ECvCa0gB,OAAO,CAAC/C,IChBA,CAACqG,ADgBI,CAACvwB,EDuC/B,ICvCyB,CAAa6S,CChB7B,GAA6B,EDgBb,EAAD,CAAP,CChBR;AACA0iB,ADgBK,ADuCd,QEvDSA,EFuDL/oB,CCzCS,CAEE,OAAOwf,KChBG,CAACmE,GDgBX,ADuCf,ECvCiC,MChBxB,CAA6BjG,KAAK,CAACqQ,eAAnC;AACH,ADgBWrN,OCnBZ,KDmBYA,MAAM,wCAAiClB,SAAjC,EAAN;AACH,ADsCd,UAAI7f,gBAAgB,IAAI,IAAxB,EAA8B;AEtDzB,ADiBK,ADsCTE,QAAAA,CC7FQ,ECsCCkuB,SFuDG,GAAGpuB,GEvDX,CAAqBpM,KAArB,GAA6B,EAA7B,EFuD2B,CAACmK,CAAhC;AEtDI,AFuDJoC,QAAAA,GEvDSiuB,SFuDG,GAAGpuB,GEvDX,CAAqBye,KAArB,CAA2B4P,MFuDA,CEvD3B,AFuD4BrwB,CAAhC,EEvDyC,GAArC;AACA,ADiBI4lB,ADsCRxjB,QCtCQwjB,ADsCRxjB,GEvDSguB,ODiBS,CAAC7c,OCjBf,ADiBI,ADsCU,CEvDOvD,EDiBI+S,ADsCR1gB,CEvDjB,GAA2B2nB,EDiBvB,YDsC+B,GAAG/nB,CEvDO,CAACquB,WFuDK,GAAG,GEvDtD,AFuDJ;AEtDC,ADiBO1K,ADsCR,OAJD,CClCSA,KDuCJ,KCvCc,CAAC1C,OAAX,GAAqBH,MAArB;AACA6C,ADuCR,QCvCQA,UAAU,CAACM,SAAX,GAAuBnD,MAAvB;AACA6C,ADuCR1jB,QCvCQ0jB,ADuCR1jB,UCvCkB,CAACikB,CDuCP,GAAI9lB,KCvCR,GAAuB0iB,ADuCP,CAAChjB,CAAT,GAAaK,CCvCrB,MDuC4B,CAACL,CAAtB,GAA2BO,UAAU,CAACP,CAArD;ACtCQ6lB,ADuCRzjB,QCvCQyjB,ADuCRzjB,UCvCkB,CAAC6N,CDuCP,ECvCJ,CDuCQ3P,ECvCS8e,GAAG,CAAChP,EDuCL,CAACnQ,CAAT,GAAaI,OAAO,CCvCX,ADuCYJ,CCvCQ6kB,ADuC9B,GAA2BvkB,MCvCjB,CAAjB,CClB4B,EFyDgB,CAACN,CAArD;AExDI,ADkBC,ADuCLoC,OC3GW,CAAP,AD2GJA,EEzDU2d,KAAK,GAAG,IAAd,IFyDc,GAAG1d,kBAAkB,GAAGJ,aAA1C;AExDI,ADkBH,ADuCD,UEzDUmpB,gBAAgB,GAAG3a,QAAQ,CAACe,cAAT,CACrB,KAAKoZ,iBAAL,EADqB,CAAzB;ADoBJ;ACjBI,ADkBR,ADsCG,UExDS,AFwDLp0B,KExDU+5B,IFwDD,GAAGp4B,MExDX,EAAwB,YFwDO,CAACC,4BAArB,CAAkD,GAAlD,EAAuD,GAAvD,EAA4D6J,aAA5D,EAA2E,GAA3E,EAAgFG,kBAAhF,EAAoGC,kBAApG,EAAwH,GAAxH,EAA6HJ,aAA7H,EAA4I7B,OAAO,CAACL,CAApJ,EAAuJK,OAAO,CAACJ,CAA/J,EAAkKK,QAAQ,CAACN,CAA3K,EAA8KM,QAAQ,CAACL,CAAvL,EAA0LkC,YAA1L,EAAwMC,YAAxM,EAAsN7B,UAAU,CAACP,CAAjO,EAAoOO,UAAU,CAACN,CAA/O,CAAhB;AEvDSorB,ADkBZ,ADuCG,QEzDSA,KFyDF50B,SAAP,EEzDyB,CAAC4vB,SAAjB,GAA6B,MAA7B;AACAgF,ADkBZ,ADuCG,KArBD,GEpCUA,gBAAgB,CAACpF,WAAjB,CAA6B,KAAKuK,aAAlC;AACA,ADkBZ;ACjBS,ADkBT,ADuCE,SAAKjuB,UAAL,GAAkB,UAAU5M,KAAV,EAAiBc,SAAjB,EAA4BD,SAA5B,EAAuC;AAExD,UAAIgM,OAAO,GAAG/M,WAAd;AEzDK,AF0DL,WE1DU+6B,EF0DHhuB,OAAO,CAACjM,GE1DV,GAAqB,IAAIwc,CF0DvB,CAAoBpd,GE1DD,EAArB,AF0DE,EAA2Ba,SAA3B,EAAsCC,SAAtC,CAAP;AACA,KAJD;AEtDM,WAAK+5B,aAAL,CAAmBvd,GDgBf,GChBJ,GAA4B,UAAA0Q,CAAC,EAAI;AAC7B0H,ADgBJ,AD2CN,QE3DUA,CF2DL5oB,EC3CMsd,aChBe,ADgBpB,CChBqBsG,QF2D3B,CE3DU,EF2DsB,CE3DO,MAA7B,GF2DgC3jB,IAAV,EAAgB;AE1DtC2oB,ADgBP,AD4CF,QE5DSA,EF4DLhrB,OAAO,GAAGqC,IE5DW,AF4DP,CE5DQujB,AF4DPtjB,OAAnB,IE5DS,CAA6Bqd,KAAK,CAACwQ,aAAnC;AACH,ADiBL,AD2CD,OE/DK,GF+DDlwB,QAAQ,GAAGoC,IAAI,CAACE,QAApB;AC1CH,AD2CG,UAAIrC,UAAU,GAAGmC,IAAI,CAACG,UAAtB;AE5DK,ADkBR,AD4CG,UAAI/B,CE9DM0vB,SF8DI,GAAG,CE9DZ,CAAmB36B,GF8DFuK,EE9DjB,GAA2B,EAA3B,YF8DY,CAAyBC,OAAzB,EAAkCC,QAAlC,EAA4CC,UAA5C,CAAjB;AE7DK,ADkBR,WClBaiwB,aAAL,CAAmB9P,KAAnB,CAAyB4P,OAAzB,GAAmC,GAAnC;AACA,ADkBR,AD2CG,UAAIxvB,CE7DM0vB,SF6DI,GAAG,CE7DZ,CAAmBvgB,CF6DxB,EE7DK,AF6DiB,GE7DQga,kBAAkB,CAACwG,eAA5C;AACH,ADkBL,AD2CI,cAAM,OAAN;AC1CJ,AD2CI;AC1CJ;AACA,AD0CG,UAAIj6B,SAAS,GAAG,KAAKqK,aE7DA,GF6DL,CAAsBR,OAAtB,EAA+BC,QAA/B,EAAyCC,UAAzC,EAAqDO,UAArD,CAAhB;AE5DK,AF6DL,UE7DWuqB,AF6DPvoB,gBE7DuB,EF6DL,CE7DQ4N,EF6DLvX,ME7Da,CAACsY,AF6DP,CAAC/W,aE7DH,CACrB,KAAKmwB,cF4DW,CAA0Cr0B,EE5D1D,EADqB,CAAzB,IF6DoB,CAAzB;AE3DK60B,AF4DL,ME5DKA,IF4DDtoB,YE5DiB,CAACsjB,SAAjB,CF4DsB,EE5DO,CF4DJvjB,CE5DzB,iBF4D2C,CAAC9I,mBAAnB,GAAyC,CAAvE;AE3DE,AF6DF,ME5DC,IF4DGiI,gBAAgB,GAAG,IAAvB,CAd+C,CAe/C;AE3DC,oCDmFgB;AACZ,ADxBL,UCwBS,ADxBLa,KCwBU2c,WAAT,EAAsB,ADxBL,CAACzc,uBAAnB,CAA2C9M,MAA3C,GAAoD,CAAxD,EAA2D;ACyBlD,ADvBR,cCuBc,qDAAN;AACH,ADvBL,YAAIiM,YAAY,GAAG7B,QAAQ,CAACN,CAAT,GAAaK,OAAO,CAACL,CAArB,GAAyBO,UAAU,CAACP,CAAvD;AACA,YAAIoC,YAAY,GAAG9B,QAAQ,CAACL,CAAT,GAAaI,ME/DN,CF+Da,CAACJ,CAArB,GAAyBM,UAAU,CAACN,CAAvD,CAJ0D,CAM1D;AEhEI,ADqFA,ADpBJ,UCoBUsgB,OAAO,GAAG7P,GCrFN,KAAKmO,ADqFS,CAACpN,QCrFzB,MDqFgB,CAAwB,KAAKsN,UAA7B,CAAhB;ACpFH,ADqFGwB,MAAAA,OAAO,CAAC8F,SAAR,GAAoB,EAApB;AACH,ADrBD,YAAIpjB,mBAAmB,GAAG,MAAM,MAAMF,uBAAtC;AACA,YAAI3B,aAAa,GAAGhL,IAAI,CAACC,KAAL,CAAWgK,OAAO,CAACL,CAAR,GAAYiD,mBAAmB,IAAId,YAAY,GAAG9B,OAAO,CAACL,CAA3B,CAA1C,CAApB;AACA,YAAIqB,aAAa,GAAGjL,IAAI,CAACC,KAAL,CAAWgK,OAAO,CAACJ,CAAR,GAAYgD,WEjED,QFiEoB,IAAIb,YAAY,GAAG/B,OAAO,CAACJ,CAA3B,CAA1C,CAApB,CAV0D,CAY1D;AElEI,uBAAU,KAAK4e,SAAf,IDqFiBhpB,OAAOE,QAAQuwB,UAAU;ACpF7C,ADqFG,ADnBJ,UCmBUC,GDnBL,IAAIttB,CAAC,GCmBW,ADnBR,CAAb,ECmBwBpD,ADnBRoD,CAAC,ICmBb,ADnBiB,EAArB,EAAyBA,CAAC,KAAK,CAA/B,EAAkC;ACoB9B,ADnBH,UCmBSutB,YAAY,GAAGzwB,MAArB;AACA,ADnBH,UCmBSqrB,aAAa,GAAG1Q,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAtB;AACAyQ,ADnBHnf,MCmBGmf,IDnBHnf,SCmBgB,CAACye,KAAd,CAAoB7qB,ADnBP,GAAG,ECmBhB,GDnBqBqL,UCmBUqlB,WAA/B,ADnBgB,CAA2BzlB,IEnEP,MFmEpB,EAAuCM,aAAvC,EAAsDC,aAAtD,EAAqEpI,CAArE,CAAnB;AElEG,ADsFAmoB,ADnBH,MCmBGA,UDvB8B,CAKjC,ECkBgB,CAACV,GCtFJ,EDsFV,CAAoB3qB,ECtFL8oB,IDsFf,KCtFA,QDsFgC2H,YAAhC;ACrFH,ADsFGpF,ADlBH,MCkBGA,aAAa,CAACV,KAAd,CAAoBsF,OAApB,GAA8B,MAA9B,CAN0C,CAO1C;ADlBH;ACmBG5E,ADlBH,MCkBGA,aAAa,CAACxQ,EAAd,GAAmB0V,QAAQ,IAAIhG,SAAZ,GAAwB,WAAxB,GAAsCgG,QAAzD;AACA,ADlBH,aCkBUlF,aAAP,4BCvF8B;AAC9B,ADuFH,ADlBA,SAvByD,CAwB1D,aEtEc,KAAKvC,SAAf;AACH;AFsED;wCCkBoBhpB,OAAO;AACvB,ADjBL,UCiBWmsB,ADjBPvrB,SAAS,GCiBU,ADjBP,GCiBUia,EDjBL1O,MCiBa,CAAC2O,MCvFd,EFsEL,CAAqBtQ,ICiBX,CAAuB,EDjBjC,EAA8BC,GCiBpB,CAArB,IDjBW,EAAwCC,UAAxC,EAAoD0B,gBAApD,EAAsEzL,SAAtE,CAAhB;AErEK,ADuFAwrB,ADhBL,MCgBKA,IDhBDtrB,IAAI,GAAG,CCgBM,CAACgqB,GDhBFne,CEvED,CDuFV,CAAmB1M,GCvFJgpB,EDuFf,EDhBM,CAAgB,IEvEtB,CFuE2BlpB,KCgBGE,ADhBxB,EAA4BY,GCgBlC,MDhBM,EAAuCD,SAAvC,CAAX;AEtEE,ADuFGwrB,ADfL,MCeKA,IDfDpsB,MAAJ,ECeiB,CAAC6wB,KAAb,GAAqB,IAArB;AACAzE,MAAAA,YAAY,CAAC0E,WAAb,GAA2B,IAA3B;AACA,ADhBL,UAAIzkB,GCgBQ+f,YAAP,CDhBe,IAAI,IAAxB,EAA8B;ACiB5B,ADhBDpsB,QAAAA,MAAM,GAAG,IAAIgB,KAAJ,CAAU2J,UAAV,EExEU,AFwEYF,OAAtB,EAA+BC,QAA/B,CAAT;AEvEI,AFwEJ,OAFD,MAGK,UEzEU,KAAKue,SAAf;AACH,AFyEDjpB,QAAAA,MAAM,GAAG,IAAIgB,KAAJ,CAAU2J,UAAV,EAAsBF,OAAtB,EAA+BC,QAA/B,EAAyC2B,gBAAzC,CAAT;AACA,2CCcuBpM,OAAOE,QAAQ6qB,WAAW;AAC7C,UAAIA,SAAS,GAAG/qB,KAAZ,IAAqB+qB,SAAS,GAAG7qB,MAArC,EAA6C;AACzC,ADfT,aAAO,CCeQ,GDfJgI,cAAJ,CAAmBrH,IAAnB,EAAyBd,KEzER,CFyEjB,CAAP,oBCgBW,uCADF;ACvFJ,ADyFC,ADhBN,KAvDD,kBElBgB,KAAKipB,SAAf;AACH;AD0FG,ADdN,SAAK3b,ICcQ,EDdb,GAAc,YAAY;ACehB/M,ADdT,QCcSA,CAAC,CDdNuM,CCcQ,CAAC7M,EDdL,GCcU,ADdP,GCcU+qB,CDdNzd,QCcH,IAAsB,CADtB,MDbD,GAA0BC,iBAA1B,CAA4C,KAAKzN,KAAjD,CAAX;ACeSW,ADbT,QCaSA,CAAC,EAAE,CAACP,CDbN,KCaY,ADbP0M,GCaUme,SAAV,IAAuB,CAFvB,KCxFS,EF6Ed,CAA8Ble,IAA9B,CAAP;AE5EK,AD0FI7M,ADbT,KAJD,GCiBUA,KAAK,EAAE+qB,QC1FD,CDuFH,ICvFQ/B,SAAf;AACH,AD0FO9oB,ADbV,QCaUA,MAAM,EAAE6qB;AAJL,OAAP;AAMH,ADXJ,MAAIvd,mBAAmB,GAAG,MAA1B;AACA,MAAIC,yBAAyB,GAAG,IAAI1M,KAAJ,CAAU,IAAIA,IEhFX,CFgFO,CAAU,MAAV,EAAkB,IAAlB,CAAV,EAAmC,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAnC,EAA4D,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA5D,EAAqF,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAArF,EAA8G,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA9G,EAAuI,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAvI,EAAgK,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAhK,EAAyL,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAzL,EAAkN,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAlN,EAA2O,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA3O,EAAoQ,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAApQ,EAA6R,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA7R,EAAsT,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAtT,EAA+U,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA/U,EAAwW,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAxW,EAAiY,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAjY,EAA0Z,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA1Z,EAAmb,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAnb,EAA4c,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA5c,EAAqe,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAre,EAA8f,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA9f,EAAuhB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAvhB,EAAgjB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAhjB,EAAykB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAzkB,EAAkmB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAlmB,EAA2nB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA3nB,EAAopB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAppB,EAA6qB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA7qB,EAAssB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAtsB,EAA+tB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAA/tB,EAAwvB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAxvB,EAAixB,IAAIA,KAAJ,CAAU,MAAV,EAAkB,IAAlB,CAAjxB,CAAhC;AE/EO,AFgFP,MAAI2M,iBEhFa,IFgFQ,CEhFHsb,EFgFM,IAAIjoB,GEhFzB,EFgFqB,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAApD,EAAuD,CAAvD,CAA5B;AE/EI,kDD0F6B2pB,SAASxqB,QAAQmrB,UAAU;AAAA,ADR5D,WAAShmB,iBAAT,CAA2BsI,UAA3B,EAAuC;AACtC,SAAKC,oBAAL,GAA4BC,oBAAoB,CAACC,OAArB,CAA8BH,UAAU,IAAI,CAAf,GAAoB,IAAjD,CAA5B;ACQM,ADPN,SAAKI,CCOKsd,ODPV,CCOkB,CAAC/qB,CAAT,ADPOqN,ICOO,CAAd,IAAmB0d,CDPF,GAAG,ICOO,ADPrC,CCOsC5qB,CAAT,IAAc,CAArC,CCzFqB,CDyFmB;ACxFxC,ADyFI,uBCzFM,KAAKuoB,SAAf;AACH,ADyFO,ADPV,SAAKpmB,gBAAL,CAAsB,sBAAtB,EAA8C,YAAY;ACQnD,ADPN,aAAO,KAAKgL,oBAAZ;AACA,KAFD;ACUM,UAAMkjB,OAAO,GAAG,EAAhB,sBC1FoB;AACpB,AD0FAA,ADRN,MCQMA,GDRDluB,IElFQiY,AD0FA,CAACkO,OC1FO,CAACnN,GD0FG,ADRzB,CCQ0BmV,ADRJ,UElFT,AFkFb,CEjFU,ADyFG,CAAP,ADR4B,GCQO,CCzF1BsG,IDyF+BrG,IDRA,gBCQL,CAC/B9wB,MAD+B,EACvBmrB,MC1FR,EADG,AD0F4B,CC1FnC,CD2FsBtC,WAAW,CAACgI,WADC,CAAnC;ACxFH,AD0FGD,ADTL,MCSKA,OAAO,ADTL,CCSM/H,IDTDhb,OCSY,CAACkjB,ADTzB,YCSY,CAAP,GAAoC,KAAKD,oBAAL,CAChC9wB,MADgC,EACxBmrB,QADwB,EACdtC,WAAW,CAACkI,YADE,CAApC;AAEAH,ADVL,KAFD,CCYMA,OAAO,CAAC/H,WAAW,CAACmI,UAAb,CAAP,GAAkC,KAAKF,oBAAL,CAC9B9wB,MAD8B,EACtBmrB,QADsB,EACZtC,WAAW,CAACmI,UADA,CAAlC;AAEAJ,MAAAA,OAAO,CAAC/H,WAAW,CAACoI,aAAb,CAAP,GAAqC,KAAKH,oBAAL,CACjC9wB,MADiC,EACzBmrB,QADyB,EACftC,WAAW,CAACoI,aADG,CAArC;AAGAC,ADdN,MCcMA,GDdDpjB,GCcO,CAACqjB,IAAP,CAAYP,EDdlB,GAAmB,ECcb,EAAqB5U,OAArB,CAA6B,ADdJ,OEjFP,GD+FWoV,GAAG;AC9FhC,AD8FgC,ADbrC,aEjFYzW,AFiFJ,ECaiC6P,GDb5B9c,GEjFO,CAACgO,AD8F2B,CAAC8P,MAAR,CAAeoF,MC9F5C,CACH,AD6FsD,CAACQ,ADbxD,CAA0B9sB,ECa6B,CC7FjDwzB,AD6F2B,CAAJ,GDb7B,MAAuC,CAAxC,GAA6C,KAAKjqB,QAAzD,UEhFS,EADG,CAAP;AAEH,AD4FmC,ADZrC,KAFD,ECcM;;AAEA,ADbN,SAAKE,CCaKod,KDbV,GCakB,ADbJ,CCaK/qB,CAAT,GAAa,EAAb,GDbc4N,CCaKmd,ADbf,EAAa,MCaU,CAAC5qB,CAAT,GAAa,EAApC,EAAwC;AACpC,ADbT,UAAI8F,GCaUgrB,EDbL,GAAGrjB,CAAZ,UCaS,GAAwB,KAAxB,IC7Fa;AACjB,AD6FC,ADbN,OCWK,MC3FO2M,AD6FA,ADbL,KAAKjN,GEhFQ,CAACgO,cAAT,CAAwB,CFgF7B,IEhFkCsc,AFgFL3xB,KAAK,CAACqH,cEhFN,EAAxB,CAAP,GFgFE,IAA2D,KAAKG,QAAL,IAAiBxH,KAAK,CAACwH,QAAzF;AE/EE,AD6FOqjB,ADbT,KAHD,GCgBUA,MAAM,CAACC,IAAP,CAAYP,OAAZ,EAAqB5U,OAArB,CAA6B,UAAAoV,GAAG;AAAA,ADZ1C,iBCac,MAAI,CAACE,oBAAL,CAA0BV,OAAO,CAACQ,GAAD,CAAjC,EAAwCjG,QAAxC,EAAkDiG,GAAlD,CAD4B;AAAA,SAAhC;AAEA,ADZXjsB,EAAAA,WCYgBksB,MDZC,CAACjsB,SCYP,GAAwB,IAAxB,ADZX,GAAqC,UAAU6I,CAAV,EEjFF,AFiFeC,CAAb,EAAgB;AEhF9C,AD6FC,ADZPD,IAAAA,CAAC,IAAIC,CAAL,CADoD,CAC5C,CEjFKyM,QAAQ,CAACe,cAAT,CAAwB,KAAK8d,+BAAL,EAAxB,CAAP;AACH,AD8FA,ADbH,MEhFE;;AFiFF,WAAOhsB,qBAAqB,CAACS,CAAC,GAAG,IAAL,CAArB,GAAkCT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,CAAJ,CAAP,GAAgB,IAAlB,CAAvD,GAAkFT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,CAAJ,CAAP,GAAgB,IAAlB,CAAvG,GAAkIT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,EAAJ,CAAP,GAAiB,IAAnB,CAAvJ,GAAmLT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,EAAJ,CAAP,GAAiB,IAAnB,CAAxM,GAAoOT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,EAAJ,CAAP,GAAiB,IAAnB,CAAzP,GAAqRT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,EAAJ,CAAP,GAAiB,IAAnB,CAA1S,GAAsUT,qBAAqB,CAAEW,OAAO,CAACF,CAAD,EAAI,EAAJ,CAAP,GAAiB,IAAnB,CAAlW;AACA,GAJD,sCCiBwBjO,QAAQmrB,UAAUoG,iBAAiB;AACpD,UAAMC,IAAI,GAAG7W,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;AACA4W,ADbPrsB,EAAAA,ICaOqsB,IAAI,CAAC7G,KAAL,CAAW1W,EDbD,CAAC7F,KCaX,GAAsB,UAAtB,KDbP,GAA4C,UAAUC,gBAAV,EAA4B;ACcjEmjB,ADbN,MCaMA,EDbF/jB,ECaM,CAACkd,KAAL,CAAW3qB,CDbH,GAAGmF,ECaX,aAAuBnF,EDbK,CAACsO,GCa7B,sBDbW,CAA4CD,gBAA5C,CAAjB;ACcMmjB,MAAAA,IAAI,CAACC,SAAL,GAAiB5I,WAAW,CAAC4F,uBAA7B;AACA+C,ADdN,MCcMA,EDdF/jB,ECcM,CAACoN,EAAL,KDdQ,IAAI,ICcCgO,ADdnB,EAAwB,SCcM,CAAC4F,uBAAzB,cAAoD8C,eAApD,EALoD,CAMpD;ADdL,aAAO9jB,GE/rBWymB,OF+rBlB,iCE7rB2B;AD4sBtB1C,ADdL,KAJsE,CCkBjEA,ADbN,ICaU,CAAC7G,KAAL,CAAW+G,UAAX;ADZN,gBElsBmBwC,sCAGO;AD4sBpB,ADZN,cCYc3C,eAAR;AACI,aAAK1I,GChtBIqL,QDgtBO,CAACrD,WAAjB,kBC5sBgB;AD6sBZW,UAAAA,IAAI,CAAC7G,KAAL,CAAWrb,GAAX,GAAiB,KAAjB;AACAkiB,ADdd,UCccA,CDdPrsB,GCcW,CAACwlB,CCltBAuJ,IDktBL,CAAW7kB,IAAX,GAAkB,ADdR,CAACf,ICcX,qBC7sBY,AF+rBnB,CAA4CD,gBAAgB,GAAGf,mBAA/D,CAAP;ACeckkB,ADdd,GATD,OCuBeA,IAAI,CAAC7G,KAAL,CAAW7qB,KAAX,aAAsBqrB,QAAQ,CAAC/qB,CAA/B;AACAoxB,UAAAA,IAAI,CAAC7G,CCptBAuJ,IDotBL,CAAWl0B,MAAX,aAAuBA,MAAvB,QC9sBY;AD+sBZ,ADffmF,EAAAA,iBAAiB,CAACmJ,yBAAlB,GAA8C,UAAUD,gBAAV,EAA4B;AACzE,gBEvsBmB6lB,uCAQQ;AD8sBjB,ADdV,QAAInvB,KCcW8jB,SDdG,ECcQ,CAACkI,ADdN,UAArB,ECcU;AACIS,ADdd,QAAIjjB,ECcUijB,IAAI,CAAC7G,CCvtBAuJ,IDutBL,CAAW5kB,CDdP,ECcJ,CDdO,CAArB,CCc+B,KAAjB,yBC9sBe;AD+sBfkiB,UAAAA,IAAI,CAAC7G,KAAL,CAAWpb,KAAX,GAAmB,KAAnB;AACAiiB,ADfd,SAAK,CCeSA,GDfLtuB,CCeS,ADfR,CCeSynB,EDfN,CAAb,ECec,ADfEznB,CCeSpD,ADfR,GAAGyN,ECeN,aAAsB4d,QAAQ,CAAC/qB,CAA/B,ADf+B,CAACD,MAA9C,EAAsD+C,CAAC,EAAvD,EAA2D;ACgB7CsuB,ADfb,UCeaA,ADfThjB,ICea,CAACmc,KAAL,ADfC,CCeU3qB,EDfPuN,ICeJ,aAAuBvN,MAAvB,EDf6B,CAACkD,CAAD,CAA1C;ACgBa,ADfb,UAAIuL,UAAU,GAAGD,UAAU,CAAC,CAAD,CAA3B;;ACgBS,ADfT,UAAIC,GCeUoa,ODfA,ICeW,ADfPxa,CCeQ2iB,UAAjB,KDfT,EAAoC;ACgBvBQ,ADfZ,UCeYA,IAAI,CAAC7G,KAAL,CAAWrb,GAAX,GAAiB,KAAjB;AACAkiB,ADfZ,UCeYA,IAAI,CAAC7G,ADfV,IAAIxlB,CCeC,CAAWkK,IAAX,WDfL,CAAsBb,CCeI2c,QAAQ,CAAC/qB,ADfH,CCe3B,ADf4B,CAAD,CAAhC,CAAP;ACgBYoxB,ADfZ,UCeYA,IAAI,CAAC7G,KAAL,CAAW7qB,KAAX,aAAsBqrB,QAAQ,CAACrrB,KAA/B;AACA0xB,UAAAA,IAAI,CAAC7G,KAAL,CAAW3qB,MAAX,aAAuBmrB,QAAQ,CAAC5qB,CAAhC;AACA,ADhBb,UAAI2E,cAAc,GAAG,KAAKE,gBAAL,CAAsBiJ,gBAAtB,EAAwCI,UAAxC,CAArB;;ACiBS,ADhBT,UAAIvJ,GCgBU2jB,WAAW,ADhBP,CCgBQoI,EDhBLlsB,WCgBZ,GDhBT,EAAqC;ACiBxB,ADhBZwJ,QAAAA,MCgBkBe,GAAG,GAAG6b,EDhBV,GAAG3c,GCgBe,CAACjO,CAAT,GAAa4qB,EDhBV,CAAC,CAAD,CAA3B,GCgB6C,CAACnrB,MAAlC;AACAwxB,ADhBZzsB,QAAAA,ECgBYysB,IAAI,CAAC7G,KAAL,CAAWrb,CDhBT,ECgBF,CDhBKpK,YCgBeoK,EDhBhC,CCgBY;AACAkiB,ADhBZ,UCgBYA,IAAI,CAAC7G,KAAL,CAAWtb,IAAX,aAAqB8b,QAAQ,CAAC/qB,CAA9B;AACAoxB,ADhBb,KAhBwE,CAiBzE,ICecA,IAAI,CAAC7G,KAAL,CAAW7qB,KAAX,aAAsBqrB,QAAQ,CAACrrB,KAA/B;AACA0xB,ADfd,UCecA,IAAI,CAAC7G,KAAL,CAAW3qB,MAAX,aAAuBmrB,QAAQ,CAAC5qB,CAAhC;AACA;;AACJ,ADhBV,QAAIwE,cAAc,IAAI,CAAtB,EAAyB;ACiBX,ADhBb,aAAO,GCgBY,CDhBRI,iBAAJ,CAAsBoJ,UCgBhB,IDhBN,CAAP;ACXK,ADYL;;ACkBK,ADjBN,WAAO,ECiBMijB,EDjBb,ECiBM;AACH,ADjBH,GAvBD;;AA2BA,WAAS7jB,oBAAT,CAA8BrJ,OAA9B,EAAuC3D,IAAvC,EAA6C+N,IAA7C,EAAmD;AAClD,SAAKC,qBAAL,GAA6BrK,OAA7B,CCcuBqtB,YAAYxG,UAAUoG,iBAAiB;AACxDA,ADdN,MCcMA,GDdD5wB,IAAL,GAAYA,IAAZ,CCcqB,GAAGixB,QAAQ,CAACL,eAAD,CAA1B;AACA,ADdN,SAAK7iB,CCcOub,GDdZ,ECciB,CDdLvb,ECcQ,EDdpB,ECcM;AACA,UAAMmjB,YAAY,GAAG,CAArB;AACA,ADfN,SAAKnvB,CCeOovB,SAAS,GAAG,CAAlB,EDfN,CAAsB,MAAtB,EAA8B,YAAY;ACgBpC,ADfL,UCeWC,GDfJ,KAAKpxB,CCeQ,GAAG,ADfvB,ECeK;ADdL,KAFD;ACiBM,UAAMqxB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB,ADfV,SAAKtvB,GCeW8uB,IAAI,GAAG7W,MDfvB,CAAsB,CCeS,CAACC,IDfhC,EAA8B,OCeP,CAAuB,IDfJ,CCenB,CAAb;AACA4W,ADfT,QCeSA,IAAI,CAAC7G,ADfP,KCeE,ADfGjc,CCeQuF,GDfpB,KCeS,GAAsB,UAAtB;AACAud,ADfT,KAFD,GCiBUA,IAAI,CAAC7G,KAAL,CAAWsH,eAAX,GACMpJ,WAAW,CAACqJ,2BADlB;;AAEA,ADhBV,SAAK5tB,OCgBaitB,ADhBlB,GAAe,YCgBL,ADhBiB;ACiBb,ADhBb,aAAO,ECgBW1I,GDhBNla,QCgBiB,CAACkiB,WAAjB,CADJ,ADfT,CCgB6C;ADf7C,KAFD;ACkBc,ADfd,eCemBhI,WAAW,CAACkI,YAAjB;AACI,gBAAM/wB,MAAM,GAAG+xB,SAAS,GAAGF,YAA3B;AACAL,ADfnB7jB,EAAAA,UCemB6jB,IAAI,CAAC7G,KAAL,ADfC,CCeU7qB,ADfT8N,KCeF,EDfnB,GAA+B,QCeUkkB,EDfAnxB,IAAV,EAAgB,CCe5B;AACA6wB,ADflB,QAAI7wB,ICec6wB,ADfV,GAAG,CCeW,ADflB,CCemB7G,GDfPhqB,ECeE,CAAWX,CDfT,IAAI4O,CCeN,ODfc,CAACzO,KCeQH,CDfzC,EAAyC,GCevB;AACA,ADfjB,YAAM,mBAAN;AACA;ACea,eAAK6oB,WAAW,CAACmI,UAAjB,CAPJ,CAOmC;ADd7C,WAAOpiB,QAAQ,CAACjO,IAAD,CAAf;ACec,ADdd,GALD,YCmBoBkoB,WAAW,CAACoI,aAAjB;AACI,gBAAMnxB,KAAK,GAAGiyB,SAAS,GAAGF,YAA1B;AACAL,ADdnB,MAAI3iB,CAAC,GAAG,ECcW2iB,EDdP7jB,ECcW,CAACgd,KAAL,CAAW7qB,KAAX,MDdX,CAAyB,CAAzB,EAA4B,GCcKA,CDdjC,EAAkC,ECcvB,CDdX,CAAR;ACemB0xB,ADdnB,MAAI1iB,CAAC,GAAG,ECcW0iB,EDdP7jB,ECcW,CAACgd,KAAL,CAAW3qB,MAAX,KDdX,CAAyB,CAAzB,EAA4B,ICcM8xB,ADdlC,EAAkC,GAAlC,CAAR,GCcmB;AACA,ADdnB,MAAI/iB,CAAC,GAAG,IAAIpB,oBAAJ,CAAyB,CAAzB,EAA4B,IAA5B,EAAkC,GAAlC,CAAR;AACA,MAAIqB,CAAC,GAAG,IAAIrB,oBAAJ,CAAyB,CAAzB,EAA4B,IAA5B,EAAkC,GAAlC,CAAR;ACce,ADbf,MAAIiB,QAAQ,GAAG,IAAI/N,KAAJ,CAAUiO,CAAV,EAAaD,CAAb,EAAgBG,CAAhB,EAAmBD,CAAnB,CAAf;ACcmB,kBAAM,6BAAN;AAdR,ADIX,WAASnO,SAAT,CAAmBd,KAAnB,EAA0BE,MAA1B,EAAkC;AACjC,QAAI,CAACA,MAAL,EACCA,MAAM,GAAGF,KAAT;ACUS,eAAO0xB,IAAP;AACH,ADVP,OCZM,CDYF1xB,KAAK,GAAG,CAAR,IAAaE,MAAM,GAAG,CAA1B,EAA6B;AAC5B,YAAM,wCAAN;ACWK,ADVL,UCUWmyB,YAAY,GAAG,SAAfA,YAAe,CAAC7iB,GAAD,EAAMD,IAAN,EAAe;AAChC,YAAI,EAAEC,GAAG,KAAK,IAAR,IAAgBD,IAAI,KAAK,IAA3B,CAAJ,EAAsC;AAClC,ADXd,SAAKvP,KAAL,ECWoB,CDXPA,KAAb,iCCWc;AACH,ADXX,SAAKE,MAAL,GAAcA,MAAd;AACA,QAAIiP,OAAO,GAAGnP,KAAK,IAAI,CAAvB;ACWU,YAAMsyB,UAAU,GAAGJ,YAAY,EAA/B;AACAI,ADXV,QCWUA,ADXN,CAACtyB,KAAK,GAAG,CCWO,CAAC6qB,EDXjB,GCWM,CAAiBrb,CDXL,CAAtB,CCWU,CDXe,YCWWA,GAA1B;AACA8iB,ADXTnjB,MAAAA,ECWSmjB,KDXF,KCWY,CAACzH,KAAX,CAAiBtb,IAAjB,aAA2BA,IAA3B;AACAsiB,ADXT,QCWSA,UAAU,CAACzB,WAAX,CAAuBkC,UAAvB;;AAEA,ADZV,SAAKnjB,GCYS,CAACgb,GDZf,ECYoB,CAACoI,ADZNpjB,OAAf,MCYU,EAA0B;AACtBgb,ADZd,SAAKtpB,CCYSspB,GDZd,ECYmB,CAACoI,ADZR,IAAIxxB,KAAJ,CAAUoO,GCYR,GAAsB,CDZP,CCYf,EDZkBjP,MAApB,CAAZ;ACaW;ADZX,SAAK,IAAIkD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvC,IAAL,CAAUR,MAA9B,EAAsC+C,CAAC,EAAvC;ACcU+mB,ADbT,QCaSA,GDbJtpB,ECaS,CAAC0xB,CDbf,CAAUnvB,CAAV,IAAe,CAAf,KCaS,CAAoB4gB,IAApB,CAAyBsO,UAAzB;AACH,ADfP,OCCM;;AAgBA,ADdN,SAAK1vB,CCcK4vB,QAAQ,GAAG,IAAf,ADdN,CAAsB,OAAtB,EAA+B,YAAY;ACerC,ADdL,UCcSC,GDdF,KAAKzyB,CCcM,GAAG,CDdrB,GCcK;AACA,ADdL,KAFD,KCgBU0yB,SAAS,GAAG,IAAhB;AACA,UAAIC,UAAU,GAAG,IAAjB;ADdN,SAAK/vB,gBAAL,CAAsB,QAAtB,EAAgC,YAAY;ACetC,ADdL,aAAO,CCcM6uB,IDdDvxB,MAAZ,KCcK;AACI,ADdT,KAFD,QCgBe6oB,WAAW,CAACgI,WAAjB;AACIyB,UAAAA,QAAQ,GAAGnH,QAAQ,CAAC5qB,CAAT,GAAasxB,YAAxB;AACAU,ADfd,SAAK7vB,CCeS6vB,SAAS,GAAGpH,GDf1B,CAAsB,ICeY,CAAC/qB,CAAT,GAAa0xB,EDfvC,EAAmC,KCerB,ODfiC;ACgBjCU,ADfb,UCeaA,ADfT,KAAK1yB,ICea,CDflB,ECeqBqrB,EDfP,KAAKnrB,CCeU,CAACO,CAAT,GAAa4qB,ADftC,EAA+B,MCee,CAACnrB,MAAtB,GAA+B+xB,SAA3C;AACAU,ADfZ,UCeYA,IDfN,MCegB,GAAGF,SAAb,gCDfZ;ACgBY,ADfZ;;ACgBQ,ADfT,aCec1J,ADfP,KAAK/oB,KAAZ,CCeyB,CAACixB,YAAjB;AACIuB,ADfb,KALD,KCoBcA,QAAQ,GAAGnH,QAAQ,CAAC5qB,CAAT,GAAasxB,YAAxB;AACAU,UAAAA,SAAS,GAAG,CAAZ;AACAC,ADfd,SAAKtjB,CCeSsjB,SAAS,CDfvB,ECe0BrH,CDfP,OCee,CAAC5qB,CAAT,CDfGH,CAAV,CCeoB+qB,CDfP5qB,CAAb,EAAgB,ICeY,CAACP,MAAtB,GAA+B+xB,SAA3C;AACAU,ADfb,UCeaA,ADfTvyB,MAAM,GAAGK,CCeU,ADfT,GCeYgyB,ADfT,KAAKtjB,ICeT,GDfA,IAAoB7O,CAAC,IAAI,CAAzB,CAAb;ACgBa,ADfb,aAAO,CAAE+N,OAAO,CAAC,KAAKxN,IAAL,CAAUT,MAAV,CAAD,EAAqBE,CAAC,GAAG,IAAzB,CAAR,GAA2C,CAA5C,KAAkD,CAAzD;AACA,KAHD;ACkBU,aAAKyoB,WAAW,CAACmI,UAAjB;AACIsB,ADfd,SAAKpxB,CCeSoxB,QAAQ,EDftB,CCeyBnH,EDfN,MCec,CAAC5qB,CAAT,EDfIH,CCeSyxB,ADfnB,EAAatxB,CAAb,EAAgB,OCerB;AACAgyB,ADfb,UCeaA,ADfTryB,MAAM,GCeY,ADfTK,CAAC,ECeW,CAACuxB,ADfT,KAAK7iB,ICeT,GDfA,IAAoB7O,CAAC,IAAI,CAAzB,CAAb;ACgBaoyB,ADfb,UCeaA,CDfR7xB,IAAL,CAAUT,GCeY,GAAGoyB,ADfzB,KAAqB,GCeR,GDfclyB,CAAC,GAAG,IAAV,CAArB;ACgBaqyB,ADfb,KAHD,KCkBcA,UAAU,GAAGtH,QAAQ,CAACrrB,KAAT,GAAiBiyB,SAA9B;AACA;ADfd,SAAK5iB,IAAL,GAAY,UAAU/O,CAAV,EAAaG,CAAb,EAAgB;ACgBlB,ADfT,UAAIL,GCeU2oB,GDfJ,GAAGtoB,CAAC,GAAG,CCeQ,CAAC0wB,GDfJhiB,OAAT,GCeJ,CDfwB7O,CAAC,IAAI,CAAzB,CAAb;ACgBakyB,ADfb,UCeaA,CDfR3xB,IAAL,CAAUT,ECeW,GAAG,CAAX,ADfb,KAAqB,MAAME,CAAC,GAAG,IAAV,CAArB;ACgBamyB,ADfb,KAHD,KCkBcA,SAAS,GAAG,CAACT,SAAb;AACAU,UAAAA,SAAS,GAAGF,QAAZ;AACAG,ADhBd,SAAKrjB,CCgBSqjB,IDhBd,GAAa,GCgBW,GAAGtH,MDhBF,ECgBU,CAACrrB,KAAT,GAAiBiyB,SAA9B;AACA,ADhBb,UAAIjxB,GAAG,GAAG,KAAKH,IAAL,CAAUR,MAApB;;ACiBS,ADhBT,WAAK,IAAI+C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,GAApB,EAAyBoC,CAAC,EAA1B,EAA8B;ACiBjB,ADhBZ,aAAKvC,GCgBa,CDhBlB,CAAUuC,CAAV,IAAe,CAAf,qBCgBY;AA1BR,ADWJ;AACD,KALD;ACsBMivB,MAAAA,YAAY,CAACG,QAAD,EAAWC,SAAX,CAAZ;AACAJ,ADjBN,MCiBMA,GDjBDhuB,SCiBa,ADjBlB,CCiBmBquB,EDjBF,OCiBC,EAAYC,CDjBHpjB,IAAV,EAAgBC,GCiBf,ADjBD,CCiBX,CDjBgCxP,KAArB,EAA4BE,MAA5B,EAAoC;ACkBlD,ADjBF,UAAIsP,GAAG,GAAG,CAAN,IAAWD,IAAI,GAAG,CAAtB,EAAyB;AACxB,cAAM,kCAAN;AACA;2CCiBuBqjB,SAAS;AAC5B,ADjBL,UCiBS,ADjBL1yB,KCiBU0yB,CDjBJ,GAAG,CAAT,ECiBK,EDjBS5yB,GCiBQ4yB,EDjBH,GAAG,CAA1B,CCiBK,CDjBwB,CCiBM;AAC1B,ADjBR,cAAM,qCAAN;ACkBK,ADjBL;;ACmBI,ADlBL,UCkBS,ADlBLnjB,KCkBU8hB,ADlBL,GAAGhiB,IAAI,GAAGvP,KAAnB,CCkBS,IACG,KAAKuyB,aADR,IAEG,KAAKA,aAAL,CAAmBlyB,MAF1B,EAEkC;AAC9B,ADpBT,UAAIqP,GCoBU6iB,GDpBJ,GAAG/iB,GAAG,GAAGtP,CCoBV,CAAmBgc,IDpB5B,GCoBS,CAA2B,UAAA2W,MAAM,EAAI;AACjCA,UAAAA,MAAM,CAAChI,KAAP,CAAasH,eAAb,GAA+BS,OAAO,GAChC7J,WAAW,CAAC+J,yBADoB,GAEhC/J,WAAW,CAACqJ,2BAFlB;AAGH,ADvBV,SCmBS,CDnBL1iB,MAAM,GAAG,KAAKxP,MAAd,IAAwBuP,KAAK,GAAG,KAAKzP,KAAzC,EAAgD;ACwB1C,ADvBL,cAAM,uCAAN;AACA;ACuBI,WAAK4yB,OAAL,GAAeA,OAAf;AACH,ADvBF,WAAK,IAAInyB,CAAC,GAAG+O,GAAb,EAAkB/O,CAAC,GAAGiP,MAAtB,EAA8BjP,CAAC,EAA/B,EAAmC;AAClC,YAAIL,MAAM,GAAGK,CAAC,GAAG,KAAK0O,OAAtB;;AACA,aAAK,IAAI7O,CAAC,GAAGiP,IAAb,EAAmBjP,CAAC,GAAGmP,KAAvB,EAA8BnP,CAAC,EAA/B,EAAmC,WCuBD;AAC9B,ADvBH,UCuBO,KAAKyvB,ADvBPlvB,IAAL,CAAUT,MAAM,IAAIE,CAAC,ECuBlB,EAA6B,ADvBP,CAAT,CAAhB,KAAgC,MAAMA,CAAC,GAAG,IAAV,CAAhC;ACwBOipB,ADvBP,QCuBOA,GAAG,CAACwJ,eAAJ,CAAoB,KAAKhD,kBAAzB;AACA,ADvBR,aCuBaA,kBAAL,GAA0B,IAA1B;AACH,ADvBN,KAlBD;AC0CG,ADvBH,MCyBE;;ADtBH,WAASpgB,SAAT,CAAmBC,gBAAnB,EAAqCC,SAArC,EAAgD;AAC/C,SAAKD,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,SAAL,GAAiBA,SAAjB,cCqB0Bia,kBAAkB;AACtC,UAAI,OAAOA,gBAAP,IAA2B,QAA/B,EAAyC;AACrC,ADrBV,SAAKlnB,gBAAL,CAAsB,kBAAtB,EAA0C,YAAY;ACsB5C,ADrBT,aAAO,ECqBS,GDrBJgN,gBAAZ;ACqBkB4M,ADpBlB,KAFD,KCsBmBA,QAAQ,EAAE;AAAEwW,YAAAA,KAAK,EAAElJ;AAAT,ADnB7B,SAAKlnB,gBAAL,CAAsB,WAAtB,EAAmC,YAAY;ACmB9B,ADlBhB,SCkBS,IDlBF,KAAKiN,SAAZ;ACmBM,ADlBN,KAFD,ECiBM,MAGO,IAAI,QAAOia,gBAAP,KAA2B,QAA/B,EAAyC;AAC5C,ADlBV,YCkBgBmJ,aAAa,GAAG,YAAtB;AACA,YAAMC,WAAW,GAAG,UAApB;AACA,ADlBXvjB,EAAAA,SAAS,CCkBQwjB,ADlBPrjB,aAAV,GAA0B,OCkBc,GACvB,ADnBmBC,YAAV,EAAwBC,OAAxB,EAAiCzL,OAAjC,EAA0C;ACmBjD,ADjBlB,QAAIwL,UCiBuB,EDjBX,CAAC1P,CCiBD,KDjBZ,IAAuB2P,OAAO,CAACC,cAAnC,EAAmD;ACiBlB,ADhBhC,YAAM,aCgB0C,MDhBhD;ACgBe,ADff,KAJkE,CAMnE,GCYU;AAEA,ADbV,YCagBmjB,QAAQ,GAAG,OAAjB;;AACA,YAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAC,KAAK,EAAI;AACpC,ADdd,QAAIrwB,MCccqwB,EDdN,GCcW,ADdRtjB,ICcYmjB,GDdL,CAAC7uB,mBCcT,ADdC,CAA4BC,CCcS,MDdrC,CAAf,CARmE,CAUnE;ACakB;AACA,ADblB,QAAI2L,WCaqB,ADbV,GAAG,CCaA,ADblB;ACce,ADbf,QAAIC,GCUU,MAGO,GDbL,GAAGlN,QAAQ,CAACI,WAAT,EAAnB;ACckB;AACA,ADdlB,SAAK,IAAID,CAAC,GAAG,CCcW,ADdxB,EAAgBA,CAAC,GAAG+M,YAAY,CAAC9P,MAAjC,EAAyC+C,CAAC,EAA1C,EAA8C,wBCelBkwB,KADJ,MAAN;AAEH,ADfdpjB,MAAAA,WAAW,IAAIC,YAAY,CAAC/M,CAAD,CAAZ,CAAgBW,KAA/B;ACgBU,ADfV,KAfkE,CAiBnE,GCIU;;AAWA,YAAMstB,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYvH,gBAAZ,CAAb;ADdV,QAAIngB,MAAM,GAAG,IAAI5I,KAAJ,CAAUmP,WAAV,CAAb;ACeU,ADdV,QAAIE,ICcUihB,IAAI,CAAChxB,MAAL,ADdK,GAAG,CCcO,ADd7B,CCcU,EAAsB;AAClB,gBAAM,kGACkCgxB,IAAI,CAAChxB,MADvC,UAAN;AAEH,ADhBX,SAAK,IAAIgQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,YAAY,CAAC9P,MAAjC,EAAyCgQ,CAAC,EAA1C,EAA8C;AAC7C,UAAIvM,OAAO,GAAGqM,YAAY,CAACE,CAAD,CAA1B;ACiBS,YAAMihB,GAAG,GAAGF,MAAM,CAACC,IAAP,CAAYvH,gBAAZ,EAA8B,CAA9B,CAAZ;ADhBT,WAAK,IAAI1mB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,OAAO,CAACC,KAA5B,EAAmCX,CAAC,EAApC,EAAwC;ACiB/B,ADhBR,YCgBYkuB,ADhBR1hB,GCgBW,IAAIqjB,SDhBC,GAAGnvB,CCgBX,IAAwBwtB,EDhBN,CCgBS,ADhBRttB,ICgBYkvB,SDhB3C,ECgBQ,EAAgD;AAC5C,ADhBZ,YAAI5iB,ICgBc,aDhBG,GCgBM2iB,ADhBHhwB,QAAQ,CAACW,ICgBf,eDhBM,GAA+BgM,ECgBLsjB,WAAhC,GDhBlB,OCiBkB,uCADN;AAEH,ADjBTvpB,QAAAA,MAAM,CAACyG,eAAe,EAAhB,CAAN,GAA4B,IAAIT,SAAJ,CAAcC,gBAAd,EAAgC,IAAI7O,KAAJ,CAAUuP,iBAAV,CAAhC,CAA5B;AACA;ACkBQ,ADjBT,KA3BkE,CA6BnE,MCecghB,GAAG,IAAI2B,aAAX,EAA0B;AACtB,ADfd;ACgBF;AACA;AACA,ADjBE,QAAI1iB,2BAA2B,GAAG5G,MAAM,CAAC,CAAD,CAAN,CAAUkG,SAAV,CAAoBxP,MAAtD;ACkBF,ADjBE,QAAImQ,mBAAmB,GAAG7G,MAAM,CAACtJ,MAAP,GAAgB,CAA1C;ACkBF;AACA,ADlBE,WAAOmQ,mBAAmB,IAAI,CAA9B,EAAiC;ACmBnB,ADlBb,UAAIC,ICkBe8iB,QDlBH,ECkBa,CDlBV5pB,ECkBamgB,IDlBP,CAACtZ,WCkBsB,CAAC8gB,GAAD,CAAnC,GDlBY,CAAN,CAA4BzhB,SAA5B,CAAsCxP,MAAzD;;ACmBa,ADlBb,UAAIoQ,ICkBa,OAAO8iB,CDlBR,IAAIhjB,KCkBH,IAAqB,QAAzB,EAAmC,QDlBhD,EAAiD;ACmBhC,ADlBhB,gBCkBoB8iB,sBAAsB,CAACE,UAAD,CAA1B,EAAwC;AACpC,ADlBpB,qBCkB2B;AAAEA,gBAAAA,UAAU,EAAEA;AAAd,ADjB5B/iB,MAAAA,SCiBqB,UDjBF;ACkBD,ADjBlB;ACkBc,WAJD,MAIO,IAAI,QAAO+iB,UAAP,KAAqB,QAAzB,EAAmC;AACtC,ADlBlB/iB,IAAAA,YCkBsB4iB,ODlBH,CCkBW,IAAIG,UAAhB,EAA4B;AACxB,ADjBtB,QAAI7iB,UCiBsB2iB,mBDjBO,GCiBe,ADjBZ9iB,CCiBagjB,UAAU,CAACH,QAAD,CAAX,CAA1B,EAAkD,GDjBT,GAAGnwB,QAAQ,CAACW,mBAA3E,CA1CmE,CA2CnE;ACiB8B,ADhB9B,uBCgBqC;AACH2vB,kBAAAA,UAAU,EAAE;AACRP,ADjBtC,QAAIriB,YCiBkCqiB,KAAK,CDjBrB,CCiBuBO,EDjBpB,CAAzB,OCiBuD,CAACH,QAAD;AADT;AADT,ADdrC,SAAK,IAAIhwB,CAAC,GCcoB,ADdjB,CAAb,EAAgBA,CAAC,GAAGsN,6BAApB,EAAmDtN,CAAC,EAApD,EAAwD;ACmBjC,ADlBtB,WAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,eAApB,EAAqCC,CAAC,EAAtC,EAA0C;ACmBxB,ADlBjB1G,QAAAA,KCUgB,CDVV,CAAC0G,CAAD,CAAN,CAAUR,CCkBa,QDlBvB,CAAoBzM,CAApB,IAAyB2M,YAAY,CAACY,kBAAkB,EAAnB,CAArC;ACmBoB,ADlBpB,oBCkB0B,4DACIyiB,QADJ,aAAN;AAEH,ADnBlB,KAlDkE,CAmDnE;ACmBe,WAbM,MAaA;AACH,gBAAMI,IAAI,WAAWD,UAAX,CAAV;ADnBlB,SAAK,IAAIljB,CAAC,GAAGG,mBAAb,EAAkCH,CAAC,GAAGD,eAAtC,EAAuDC,CAAC,EAAxD,EAA4D;ACoB1C,ADnBjB1G,MAAAA,MAAM,CAAC0G,CAAD,CAAN,CAAUR,SAAV,CAAoBa,6BAApB,ICmByD8iB,ADnBJzjB,ICmBpC,QDnBgD,CAACY,kBAAkB,EAAnB,CAAjE;ACoBc,ADnBd,KAtDkE,CAuDnE;ACmBW,SA9BD,MA8BO;AACH;AAChB,ADpBE,QAAI3P,GAAG,GAAG2I,MAAM,CAAC,CAAD,CAAN,CAAUkG,SAAV,CAAoBxP,MAA9B;ACqBF;AACA,ADrBE,SAAK,IAAI+C,CAAC,GAAGsN,6BAAb,EAA4CtN,CAAC,GAAGpC,GAAhD,EAAqDoC,CAAC,EAAtD,EAA0D;ACsB5D,ADrBG,WAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,eAApB,EAAqCC,CAAC,EAAtC,EAA0C;ACsB7B,ADrBZ,YAAIO,ECqBc4L,KDrBP,GCqBe,ADrBZnM,CAAC,ECqBcyZ,CDrBXtZ,eCqB2B,CAAC8gB,GAAD,ADrB/B,CCqBF,EDrB4BluB,CAA1B,GAA8BA,CAAC,GAAG,CAAhD;AACAuG,QAAAA,MAAM,CAAC0G,CAAD,CAAN,CAAUR,SAAV,CAAoBe,OAApB,IAA+Bb,YAAY,CAACY,kBAAkB,EAAnB,CAA3C;ACqBY,ADpBZ,cCoBgB,OAAO6L,QAAP,IAAmB,QAAvB,EAAiC;AAC7B,ADpBjB,mBCoBwB;AAAEA,cAAAA,QAAQ,EAAEA;AAAZ,ADnBzB,WAAO7S,ECmBW,IDnBlB;ACoBe,ADnBf,GAhED,QCiFe,MAEO,IAAI,QAAO6S,QAAP,KAAmB,QAAvB,EAAiC;AACpC,gBAAI4W,QAAQ,IAAI5W,QAAhB,EAA0B;AACtB,ADlBvB,WAAS3L,UCkBqB,KDlB9B,CAAyBzM,SAAzB,EAAoC;ACmBToY,ADlB1B,QAAI7b,QCkBsB6b,CDlBb,GAAGpY,ICkBkB,EAAG,GDlBZ,CAAC0M,SAA1B;ACkBuCkiB,kBAAAA,KAAK,EAAExW,QAAQ,CAAC4W,QAAD;AAAjB,ADjBrC,QAAIzyB,SAAS,GAAG,EAAZ,IAAkB,CAACA,SAAS,GAAG,IAAb,KAAsB,CAA5C,EAA+C;ACgBlB,ADf5B,YAAM,GCee,oBDfrB;ACkBkB,ADjBlB,aCaiB,MAIO;AACH,oBAAM,0DACIyyB,QADJ,aAAN;AAEH,ADnBnB,SAAKhvB,SAAL,GAAiBA,SAAjB;ACoBe,ADnBf,SAAK2M,ECUgB,MASA,KDnBrB,GAAqB,IAArB;ACoBkB,ADnBlB,SAAKC,OCmBmBwiB,KAAI,IDnB5B,GAAwB,ICmBehX,ADnBvC,QCmB4B,CAAV;;AACA,ADlBlB,SAAKvL,OAAL,GAAe,UAAU7N,CAAV,EAAaiN,CAAb,EAAgBrL,WAAhB,EAA6B,SCkBYwuB,KAAtC;AACH,ADlBd,aAAO,KAAKpvB,SAAL,CAAegL,WAAf,CAA2BhM,CAA3B,EAA8BiN,CAA9B,IAAoCrL,WAAW,IAAI,CAAhB,GAAqB,GAAxD,GAA8DA,WAAW,IAAI,CAApF;ACmBU,ADlBV,KAFD;ACqBO,OAlFM,MAkFA;AACH,ADlBV,SAAKkM,qBAAL,GAA6B,YAAY;ACmB/B,ADlBT,UAAI,ECkBWsiB,GDlBNxiB,GCkBU,WAAW8Y,EDlB1B,IAAyB,IAA7B,EAAmC,ICkBhB,CAAV;ADjBR,eAAO,KAAK9Y,gBAAZ;ACkBQ,ADjBR,OAHuC,CAKxC,qDCeuDwiB,MAA9C;AACH;AACJ,MACD;ADjBD,UAAIriB,cAAc,GAAG,CAArB;;AACA,WAAK,IAAI/N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3B+N,QAAAA,cAAc,GAAG,KAAKF,GC9WF,ID8WH,CAAa7N,CAAb,EAAgB,CAAhB,EAAmB+N,cAAnB,CAAjB;AC9WoB,AD+WpB,OATuC,CAUxC;;AC/WK,aAAO,IAAI8b,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,AD+WThc,MAAAA,MC/WawK,QD+WC,CC/WQ,CAACG,CD+WN,KAAK7K,MC/WT,CD+WI,CAAa,CAAb,CC9WD0K,CD8WiB,CAAhB,EAAmBxK,KC9WX,CAAC2K,QD8WT,CAAjB,GC9WgB,CAAuBC,gBAD1B,IAEGJ,SAAS,CAACG,YAAV,CAAuBW,YAF9B,EAE4C;AACxC,AD6WbtL,MAAAA,IC7Wa,MAAI,CAAC0e,GD6WJ,CC7WD,CAAU,CD6WN,KAAK5e,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmBE,SC7WvB,KD6WI,CAAjB;AACAA,MAAAA,cAAc,GAAG,KAAKF,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmBE,cAAnB,CAAjB,CAbwC,CAcxC;AC9WawK,UAAAA,SAAS,CAACG,YAAV,CAAuBW,YAAvB,CACI;AAAEC,AD8WnB,WAAK,CC9WcA,GD8WVrM,CAAC,CC9Wc,EAAE,AD8Wb,CAAb,EAAgBA,CAAC,CC9WA,GD8WI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AC9WI8J,AD+WhChJ,QAAAA,IC/WgCgJ,KAAK,EAAE,GD+WzB,GAAG,KAAKlJ,OAAL,CAAa,CAAb,EAAgBZ,CAAhB,EAAmBc,cAAnB,CAAjB;AC/WgB,ADgXhB,WCjXY,EAEK6K,IAFL,CAEU,UAAAhC,MAAM,EAAI;AACZ;AACA,AD+WrB,WAAKhJ,gBAAL,GAAwB3L,iBAAiB,CAACiJ,uBAAlB,CAA0C6C,cAA1C,CAAxB;AC9WqB6I,YAAAA,MAAM,CAACyZ,UAAP,GACM,UAAA3F,CAAC;AAAA,AD8W5B,UAAI,KAAK9c,MC9WuB,MAAI,CAAC6e,GD8WjC,CC9W4B,CAAU,ED8Wb,IAA7B,EAAmC,YC9WH,CAAJ;AAAA,AD+W3B,aChXoB,EDgXb,KAAK7e,gBAAZ;AACA,OAtBuC,CAwBxC;ACjXqB,gBAAM0iB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA1Z,MAAM,EAAI;AACjC,kBAAM2Z,MAAM,GAAG3Z,MAAM,CAAC4T,cAAP,EAAf;ADiXzB,UAAIjtB,SAAS,GAAG,KAAKyD,SAAL,CAAe0M,SAA/B;AChXyB,ADiXzBK,MAAAA,aCjX8B,CDiXhB,GCjXoB/N,ADiXjB,CCjXkB,ADiXnC,GCjXsC,CAAb,EAAgBA,CAAC,GAAGuwB,MAAM,CAACtzB,MAA3B,EAAmC+C,CAAC,EAApC,EAAwC;AACpC,ADiX7B,UAAIgO,IAAI,GAAGzQ,GCjXwBgtB,KAAK,CDiXpB,ECjXuBgG,CDiXpB,CAAvB,ICjXiD,CAACvwB,CAAD,CAApB;AACAuqB,gBAAAA,KAAK,CAACiG,OAAN,GAAgB,KAAhB;AACAjG,ADgX7B,WAAK,IAAIvqB,CChXoBuqB,ADgXnB,GAAGhtB,EChXqB,CAACquB,IAAN,EDgXP,GAAG,CAAzB,EAA4B5rB,CAAC,IAAIgO,IAAjC,EAAuChO,CAAC,EAAxC,EAA4C;AC/Wf4W,ADgX5B7I,QAAAA,QChX4B6I,MAAM,ADgXpB,CChXqB6Z,EDgXlB,KAAK5iB,IChXM,CAAmB0c,EDgX9B,CAAavqB,CAAb,CChXW,CDgXK,CAAhB,EAAmB+N,cAAnB,CAAjB;AC/WyB,ADgXzB;AC/WqB,aARD;ADwXrB,WAAK,IAAId,CAAC,GAAG1P,SAAS,GAAG,CAAzB,EAA4B0P,CAAC,GAAG1P,SAAhC,EAA2C0P,CAAC,EAA5C,EAAgD;AC9W3BsL,AD+WpBxK,QAAAA,IC/WoBwK,SAAS,CAACG,AD+WhB,GAAG,KAAK7K,IC/WF,CAAuB8K,ED+W1B,CAAa,CAAb,EAAgB1L,CAAhB,EAAmBc,OC/WhB,GACK6K,IADL,AD+WH,CC9Wa,AD8W9B,UC9W8BC,OAAO,EAAI;AACb,AD8W5B,kBC9WkC6X,OAAO,GAAG,EAAhB;;AACA,AD+W7B,WAAK9iB,QC/W6B,IAAI5N,CAAC,GAAG,AD+W1C,CC/W6B,EAAgBA,AD+WrBiC,CC/WsB,GAAG4W,OAAO,CAAC5b,KD+WhB,CC/WZ,AD+WaiO,EC/WuBlL,CAAC,EAArC,EAAyC,gBD+W9C,CAA0C+N,cAA1C,CAAxB;AC9WiC,oBAAMgL,MAAM,GAAGF,OAAO,CAAC7Y,CAAD,CAAtB;AD+WjC,UAAI,KAAK4N,gBAAL,IAAyB,IAA7B,EAAmC;AC9WF,AD+WhC,eAAO,KC/W6BmL,AD+WxBnL,MC/W8B,CAACoL,IAAP,IAAe,CD+WnD,WC/WgC,EAAiC;AAC7B0X,AD+WpC,kBC/WoCA,OAAO,CAAC9P,IAAR,CAAa;AACTjJ,oBAAAA,EAAE,EAAEoB,MAAM,CAACK,QADF;AAETH,AD8WzC,YAAM,QC9WmCA,KAAK,EAAEF,MAAM,CAACE,OD8WvD;AChXkD,ADiXlD,KAxCD,cCzUsC;AAIH;AACJ,AD6W/B,SAAKhL,WAAL,GAAmB,YAAY;AAE9B,UAAI,KAAKN,aAAL,IAAsB,IAA1B,EAAgC;AC9WH,AD+W5B,cC/W4B,CD+WrB,KC/WyB,AD+WpBA,CC/WqB8e,IAAL,QD+W5B,GC/WyCiE,OAAO,CAACzzB,MAArB;ADgX5B;AC/W4BqzB,cAAAA,kBAAkB,CAAC1Z,MAAD,CAAlB;AACAkT,ADgX7B,UAAIvsB,IChXyBusB,KDgXhB,EChXuB,CAAC4G,ADgXrB,KAAK1vB,EChXe,CAAP,MDgXb,CAAe0M,SAA/B;AC/W0B,ADiX1B,UAAI7D,GChYiB,EAgBK8gB,KAhBL,CAgBW,ODgXV,GChXUG,ADgXNvtB,GChXS,EAAI,IDgXJ,GAAG,EAAb,IAAoB,CAA7C;AC/W6BwsB,cAAAA,MAAM,WAAIe,GAAG,CAACtf,IAAR,gBAAkBsf,GAAG,CAAC6F,OAAtB,EAAN;AACH,AD+W1B,UAAI9mB,GCjYiB,eDiYC,IAAI,CAA1B,EAA6B;AC9WX,AD+WjB,WCnZY,EAqCK8gB,ED8WVzqB,GCnZK,CAqCW,GD8WT,CAACsB,MC9WQspB,GAAG,EAAI,QD8WvB,CAA4BjhB,kBAA5B,CAAP;AC7WoBkgB,AD8WpB,OAX6B,CAa9B,IChXqBA,MAAM,WAAIe,GAAG,CAACtf,IAAR,gBAAkBsf,GAAG,CAAC6F,OAAtB,EAAN;AACH,WAvCL;AAwCH,SA5CD,MA4CO,IAAIC,gBAAgB,IAAIA,gBAAgB,CAACC,UAAzC,EAAqD;AACxD,AD8Wb,UC9Wa,AD8WTjvB,MC9Wa,CAAC6qB,IAAL,AD8WE,CC9WQ,ED8WL,CAAlB,+BC9Wa;AD+Wb,UAAIve,KAAK,GAAG3Q,SAAS,GAAG,EAAxB;AC9Wa,cAAMmZ,QAAQ,GAAG,SAAXA,QAAW,CAAAoa,WAAW,EAAI;AAC5B,AD8WjB,WAAK,IAAI7jB,CC9WcyjB,AD8Wb,GAAG,CAAb,EAAgBzjB,CC9Wc,AD8Wb,GC9WgB,CD8WZ,CC9WJ,AD8WjB,EAAwBA,CAAC,EAAzB,EAA6B;AAC5B,aAAK,IAAIjN,CAAC,GAAGzC,SAAS,GAAG,CAAzB,EAA4ByC,CAAC,IAAIkO,KAAjC,EAAwClO,CAAC,EAAzC,EAA6C;AC9W7B,AD+Wf4B,UAAAA,OC/WoB,IAAI5B,AD+Wb,CC/Wc,ED+WX,CC/Wc,CAAb,EAAgBA,CAAC,AD+Wb6N,KC/WkBijB,ED+WvB,CAAa9wB,CAAb,EAAgBiN,CAAhB,EAAmBrL,EC/We,CAAC3E,MAAlC,EAA0C,AD+W3C,CAAd,CC/W2D+C,CAA5C,EAA+C;AAC3C,AD+WnB,kBC/WyB+wB,UAAU,GAAGD,WAAW,CAAC9wB,CAAD,CAA9B;ADgXpB;AC/WoB,kBAAI+wB,UAAU,CAAC/X,IAAX,KAAoB,OAAxB,EAAiC;AAC7B0X,ADgXzB,WAAK/iB,KChXoB+iB,OAAO,CAAC9P,ADgXjC,GAAqB1gB,CChXI,CAAa,KDgXV,CAACyB,wBAAR,CAAiCC,WAAjC,CAArB;AC/W6B+V,kBAAAA,EAAE,EAAEoZ,UAAU,CAACpZ,EADN;AAETsB,AD+W7B,UAAI,KAAKtL,GC/WoBsL,KAAK,EAAE8X,GD+WhC,IAAsB,GC/WoB,CAAC9X,AD+W3C,IAA8B,KAAKtL,aAAL,CAAmB5M,mBAAnB,IAA0CxD,SAA5E,EAAuF;ACjXjD,ADkXrC,eAAO,EClXiB,GDkXZoQ,aAAZ;AC9WqB,AD+WrB,OAzB6B,CA2B9B;AChXkB;;AACD,ADgXjB/L,MAAAA,MChXiB,KDgXN,CChXU,CAAC6qB,CDgXR,CAAd,EChXiB,WAAaiE,OAAO,CAACzzB,MAArB;;AACA6sB,ADgXjB,WAAK,CChXYA,GDgXR9pB,CAAC,GChXc,ADgXX,CChXY0wB,ADgXzB,EAAgB1wB,CAAC,IChXO,ADgXH,CChXJ,ADgXjB,EAAwBA,CAAC,EAAzB,EAA6B;AC/Wf,ADgXb,WC7XY,ED6XP,IAAIiN,CAAC,GAAG1P,SAAS,GAAG,CAAzB,EAA4B0P,CAAC,IAAIiB,KAAjC,EAAwCjB,CAAC,EAAzC,EAA6C;AAC5CrL,UAAAA,WAAW,GAAG,KAAKiM,OAAL,CAAa7N,CAAb,EAAgBiN,CAAhB,EAAmBrL,WAAnB,CAAd;AChXWgvB,ADiXX,UCjXWA,gBAAgB,CAACC,UAAjB,CAA4Bna,QAA5B;AACH,ADiXT,SClYe,MAiBA;AACH,UAAA,MAAI,CAAC+V,IAAL,CAAU,oCAAV;ADkXb,WAAK9e,aAAL,GAAqBzN,OAAO,CAACyB,wBAAR,CAAiCC,WAAjC,CAArB;ACjXamoB,UAAAA,MAAM,CAAC,oCAAD,CAAN;AACH,ADiXV,UAAI,KAAKpc,aAAL,IAAsB,IAAtB,IAA8B,KAAKA,aAAL,CAAmB5M,mBAAnB,IAA0CxD,SAA5E,EAAuF;AChXjF,ADiXL,OCnbW,CAAP,ODmbG,KAAKoQ,aAAZ;AChXC,ADiXD;;AACD,YAAM,mBAAN;AACA,KAxCD,8BChBwBsZ,KAAK;AACvB,aAAO,OAAOA,GAAd;AACH,ADuDH,SAAK9Y,aAAL,GAAqB,YAAY;AAEhC,UAAI5D,UAAU,GAAG,KAAKuD,qBAAL,EAAjB;AACA,UAAIlB,OAAO,GAAG,KAAKqB,WAAL,EAAd,CAHgC,CAKhC;AACA,yBC3Da0iB,SAAS;AACjB,UAAIhL,WAAW,CAACc,OAAhB,EAAyB;AACrBrO,AD0DT,QC1DSA,ED0DLzN,KC1DY,CAACqG,ED0DL,CC1DH,CAAY2f,CD0DNviB,MC1DN,ED0Dc,CAACC,YAAT,CAAsB9D,UAAU,CAAC6D,QAAjC,CAAf;ACzDM,AD0DN,UAAI7Q,SAAS,GAAG,KAAKyD,SAAL,CAAe0M,SAA/B;ACzDE,AD0DF/C,MAAAA,QAAQ,CAAC2D,eAAT,CAAyB,KAAKtN,SAA9B,EAAyCzD,SAAzC;AAEA,UAAIgR,eAAe,GAAG3B,OAAO,CAAC9L,oBAAR,EAAtB;AAEA,UAAI0N,SAAS,GAAG,IAAhB;AACA,UAAIjI,MAAM,GAAG,IAAI5I,KAAJ,CAAUiP,OAAO,CAACC,cAAlB,CAAb;AACA,UAAI4B,YAAY,GAAG,CAAnB;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,QAAQ,GAAG,CAAf,CAjBgC,CAkBhC;;AACA,WAAK,IAAI1B,CCpgCS0Y,ADogCR,GAAGpoB,SAAS,GAAG,CAAzB,EAA4B0P,CAAC,GAAG,CAAhC,EAAmCA,CAAC,IClgCZ,ADkgCgB,CAAxC,EAA2C;AAC1C,YAAIA,CAAC,IAAI,CAAT,EAAY;AACX,gBCtgCgB0Y,qCAGa;ADogC7B;AACA1Y,UAAAA,CAAC,KCxgCe0Y,qCAIa;ADqgC7B,SALyC,CAM1C;gBC1gCiBA,iCAKS;;ADsgC1B,aAAK,GC3gCYA,CD2gCRrmB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG/B,SAA5B,EAAuC+B,CCrgCd,IDqgCmB,EAA5C,EAAgD;AAC/C,cAAIU,CAAC,GAAGwO,SAAS,GAAGjR,SAAS,GAAG,CAAZ,GAAgB+B,KAAnB,GAA2BA,KAA5C;gBC5gCgBqmB,4BAOI;ADsgCpB,eAAK,IAAI/W,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,CAAxB,EAA2BA,GAAG,EAA9B,EAAkC;AACjC,gBC9gCe+W,6BAQK;ADugCpB,gBAAI,CAACpX,eAAe,CAACvC,WAAhB,CAA4BiB,CAAC,GAAG2B,GAAhC,EAAqC5O,CAArC,CAAL,EAA8C;AAC7C,gBChhCc2lB,2BASG;ADwgCjBhX,cAAAA,QAAQ;AACRD,cAAAA,EClhCciX,SDkhCH,KAAK,CAAhB,eCxgCoB;;ADygCpB,gBCnhCcA,EDmhCV,KAAK3kB,SAAL,CAAegL,WAAf,CAA2BiB,CAAC,GAAG2B,GAA/B,EAAoC5O,CAApC,CCxgC0B,ADwgC9B,EAA4C;AAC3C0O,gBAAAA,WAAW,IAAI,CAAf;AACA,eAN4C,CC/gC/BiX,ADshCd,wBC1gCc;;gBAZAA,4CAaoB;AD0gClC,kBAAIhX,QAAQ,IAAI,CAAhB,EAAmB;AAClBpI,gBCxhCaof,ADwhCbpf,MAAM,CAACkI,YAAY,EAAb,CAAN,GAAyBC,WAAzB,MC1gC+B;AD2gC/BC,gBAAAA,QAAQ,GAAG,CAAX;AACAD,gBAAAA,WAAW,GAAG,CAAd;AACA;AACD;AACD;AACD;;AACDF,QAAAA,SAAS,IAAI,IAAb,CA3B0C,CA2BvB;AACnB;;AACD,UAAIC,YAAY,IAAI7B,OAAO,CAACC,cAA5B,EAA4C;AAC3C,cAAM,qBAAN;AACA;;AACD,aAAOtG,MAAP;AACA,KApDD;AAqDA;;AAID,MAAI6H,QAAQ,GAAG,EAAf;;AAEAA,EAAAA,QAAQ,CAACC,YAAT,GAAwB,UAAUQ,SAAV,EAAqB;AAC5C,QAAIA,SAAS,GAAG,CAAZ,IAAiBA,SAAS,GAAG,CAAjC,EAAoC;AACnC,YAAM,0BAAN;AACA;;AACD,WAAOT,QAAQ,CAACU,UAAT,CAAoBD,SAApB,CAAP;AACA,GALD;;AAOA,WAASE,WAAT,GAAuB;AACtB,SAAKT,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAO,CAAEjN,CAAC,GAAGiN,CAAL,GAAU,IAAX,KAAoB,CAA3B;AACA,KAFD;AAGA;;AAED,WAASgC,WAAT,GAAuB;AACtB,SAAKX,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAO,CAACjN,CAAC,GAAG,IAAL,KAAc,CAArB;AACA,KAFD;AAGA;;AAED,WAASkP,WAAT,GAAuB;AACtB,SAAKZ,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAOA,CAAC,GAAG,CAAJ,IAAS,CAAhB;AACA,KAFD;AAGA;;AAED,WAASkC,WAAT,GAAuB;AACtB,SAAKb,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAO,CAACjN,CAAC,GAAGiN,CAAL,IAAU,CAAV,IAAe,CAAtB;AACA,KAFD;AAGA;;AAED,WAASmC,WAAT,GAAuB;AACtB,SAAKd,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAO,CAAGhC,OAAO,CAACjL,CAAD,EAAI,CAAJ,CAAR,GAAmBiN,CAAC,GAAG,CAAxB,GAA8B,IAA/B,KAAwC,CAA/C;AACA,KAFD;AAGA;;AAED,WAASoC,WAAT,GAAuB;AACtB,SAAKf,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,UAAIzH,IAAI,GAAGxF,CAAC,GAAGiN,CAAf;AACA,aAAO,CAACzH,IAAI,GAAG,IAAR,IAAiBA,IAAI,GAAG,CAAxB,IAA8B,CAArC;AACA,KAHD;AAIA;;AAED,WAAS8J,WAAT,GAAuB;AACtB,SAAKhB,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,UAAIzH,IAAI,GAAGxF,CAAC,GAAGiN,CAAf;AACA,aAAO,CAAE,CAACzH,IAAI,GAAG,IAAR,IAAiBA,IAAI,GAAG,CAAzB,GAA+B,IAAhC,KAAyC,CAAhD;AACA,KAHD;AAIA;;AACD,WAAS+J,WAAT,GAAuB;AACtB,SAAKjB,eAAL,GAAuB,UAAU7Q,IAAV,EAAgBF,SAAhB,EAA2B;AACjD,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzC,SAApB,EAA+ByC,CAAC,EAAhC,EAAoC;AACnC,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1P,SAApB,EAA+B0P,CAAC,EAAhC,EAAoC;AACnC,cAAI,KAAK+B,QAAL,CAAchP,CAAd,EAAiBiN,CAAjB,CAAJ,EAAyB;AACxBxP,YAAAA,IAAI,CAACwO,IAAL,CAAUgB,CAAV,EAAajN,CAAb;AACA;AACD;AACD;AACD,KARD;;AASA,SAAKgP,QAAL,GAAgB,UAAUhP,CAAV,EAAaiN,CAAb,EAAgB;AAC/B,aAAO,CAAE,CAAEjN,CAAC,GAAGiN,CAAL,GAAU,IAAX,IAAqBjN,CAAC,GAAGiN,CAAL,GAAU,CAA/B,GAAqC,IAAtC,KAA+C,CAAtD;AACA,KAFD;AAGA;;AAEDmB,EAAAA,QAAQ,CAACU,UAAT,GAAsB,IAAInR,KAAJ,CAAU,IAAIoR,WAAJ,EAAV,EAA6B,IAAIE,WAAJ,EAA7B,EAAgD,IAAIC,WAAJ,EAAhD,EAAmE,IAAIC,WAAJ,EAAnE,EAAsF,IAAIC,WAAJ,EAAtF,EAAyG,IAAIC,WAAJ,EAAzG,EAA4H,IAAIC,WAAJ,EAA5H,EAA+I,IAAIC,WAAJ,EAA/I,CAAtB;;AAIA,WAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AAClC,SAAKA,KAAL,GAAaA,KAAb;;AACA,SAAKC,MAAL,GAAc,UAAUC,QAAV,EAAoBC,IAApB,EAA0B;AACvC,UAAIC,IAAI,GAAG,IAAIC,SAAJ,CAAc,KAAKL,KAAnB,EAA0BE,QAA1B,CAAX;AACA,UAAII,oBAAoB,GAAG,IAAIpS,KAAJ,CAAUiS,IAAV,CAA3B;;AACA,WAAK,IAAI5P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+P,oBAAoB,CAAC9S,MAAzC,EAAiD+C,CAAC,EAAlD;AAAqD+P,QAAAA,oBAAoB,CAAC/P,CAAD,CAApB,GAA0B,CAA1B;AAArD;;AACA,UAAIgQ,UAAU,GAAG,KAAjB,CAJuC,CAIhB;;AACvB,UAAIC,OAAO,GAAG,IAAd;;AACA,WAAK,IAAIjQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4P,IAApB,EAA0B5P,CAAC,EAA3B,EAA+B;AAC9B;AACA,YAAIkQ,KAAK,GAAGL,IAAI,CAACM,UAAL,CAAgB,KAAKV,KAAL,CAAWW,GAAX,CAAeJ,UAAU,GAAGhQ,CAAC,GAAG,CAAP,GAAWA,CAApC,CAAhB,CAAZ;AACA+P,QAAAA,oBAAoB,CAACA,oBAAoB,CAAC9S,MAArB,GAA8B,CAA9B,GAAkC+C,CAAnC,CAApB,GAA4DkQ,KAA5D;;AACA,YAAIA,KAAK,IAAI,CAAb,EAAgB;AACfD,UAAAA,OAAO,GAAG,KAAV;AACA;AACD;;AACD,UAAIA,OAAJ,EAAa;AACZ;AACA;;AACD,UAAII,QAAQ,GAAG,IAAIP,SAAJ,CAAc,KAAKL,KAAnB,EAA0BM,oBAA1B,CAAf;AACA,UAAIO,UAAU,GAAG,KAAKC,qBAAL,CAA2B,KAAKd,KAAL,CAAWe,aAAX,CAAyBZ,IAAzB,EAA+B,CAA/B,CAA3B,EAA8DS,QAA9D,EAAwET,IAAxE,CAAjB;AACA,UAAIa,KAAK,GAAGH,UAAU,CAAC,CAAD,CAAtB;AACA,UAAII,KAAK,GAAGJ,UAAU,CAAC,CAAD,CAAtB;AACA,UAAIK,cAAc,GAAG,KAAKC,kBAAL,CAAwBH,KAAxB,CAArB;AACA,UAAII,eAAe,GAAG,KAAKC,mBAAL,CAAyBJ,KAAzB,EAAgCC,cAAhC,EAAgDX,UAAhD,CAAtB;;AACA,WAAK,IAAIhQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2Q,cAAc,CAAC1T,MAAnC,EAA2C+C,CAAC,EAA5C,EAAgD;AAC/C,YAAI+Q,QAAQ,GAAGpB,QAAQ,CAAC1S,MAAT,GAAkB,CAAlB,GAAsB,KAAKwS,KAAL,CAAWuB,GAAX,CAAeL,cAAc,CAAC3Q,CAAD,CAA7B,CAArC;;AACA,YAAI+Q,QAAQ,GAAG,CAAf,EAAkB;AACjB,gBAAM,yCAAN;AACA;;AACDpB,QAAAA,QAAQ,CAACoB,QAAD,CAAR,GAAqBE,KAAK,CAACC,aAAN,CAAoBvB,QAAQ,CAACoB,QAAD,CAA5B,EAAwCF,eAAe,CAAC7Q,CAAD,CAAvD,CAArB;AACA;AACD,KA9BD;;AAgCA,SAAKuQ,qBAAL,GAA6B,UAAUxF,CAAV,EAAaC,CAAb,EAAgBmG,CAAhB,EAAmB;AAC/C;AACA,UAAIpG,CAAC,CAACqG,MAAF,GAAWpG,CAAC,CAACoG,MAAjB,EAAyB;AACxB,YAAI5L,IAAI,GAAGuF,CAAX;AACAA,QAAAA,CAAC,GAAGC,CAAJ;AACAA,QAAAA,CAAC,GAAGxF,IAAJ;AACA;;AAED,UAAI6L,KAAK,GAAGtG,CAAZ;AACA,UAAIuG,CAAC,GAAGtG,CAAR;AACA,UAAIuG,KAAK,GAAG,KAAK9B,KAAL,CAAW+B,GAAvB;AACA,UAAIC,CAAC,GAAG,KAAKhC,KAAL,CAAWiC,IAAnB;AACA,UAAIC,KAAK,GAAG,KAAKlC,KAAL,CAAWiC,IAAvB;AACA,UAAIE,CAAC,GAAG,KAAKnC,KAAL,CAAW+B,GAAnB,CAb+C,CAe/C;;AACA,aAAOF,CAAC,CAACF,MAAF,IAAYjU,IAAI,CAACC,KAAL,CAAW+T,CAAC,GAAG,CAAf,CAAnB,EAAsC;AACrC,YAAIU,SAAS,GAAGR,KAAhB;AACA,YAAIS,SAAS,GAAGP,KAAhB;AACA,YAAIQ,SAAS,GAAGJ,KAAhB;AACAN,QAAAA,KAAK,GAAGC,CAAR;AACAC,QAAAA,KAAK,GAAGE,CAAR;AACAE,QAAAA,KAAK,GAAGC,CAAR,CANqC,CAQrC;;AACA,YAAIP,KAAK,CAACK,IAAV,EAAgB;AACf;AACA,gBAAM,kBAAN;AACA;;AACDJ,QAAAA,CAAC,GAAGO,SAAJ;AACA,YAAIG,CAAC,GAAG,KAAKvC,KAAL,CAAWiC,IAAnB;AACA,YAAIO,sBAAsB,GAAGZ,KAAK,CAACa,cAAN,CAAqBb,KAAK,CAACD,MAA3B,CAA7B;AACA,YAAIe,UAAU,GAAG,KAAK1C,KAAL,CAAW2C,OAAX,CAAmBH,sBAAnB,CAAjB;;AACA,eAAOX,CAAC,CAACF,MAAF,IAAYC,KAAK,CAACD,MAAlB,IAA4B,CAACE,CAAC,CAACI,IAAtC,EAA4C;AAC3C,cAAIW,UAAU,GAAGf,CAAC,CAACF,MAAF,GAAWC,KAAK,CAACD,MAAlC;AACA,cAAI5K,KAAK,GAAG,KAAKiJ,KAAL,CAAW6C,QAAX,CAAoBhB,CAAC,CAACY,cAAF,CAAiBZ,CAAC,CAACF,MAAnB,CAApB,EAAgDe,UAAhD,CAAZ;AACAH,UAAAA,CAAC,GAAGA,CAAC,CAACd,aAAF,CAAgB,KAAKzB,KAAL,CAAWe,aAAX,CAAyB6B,UAAzB,EAAqC7L,KAArC,CAAhB,CAAJ;AACA8K,UAAAA,CAAC,GAAGA,CAAC,CAACJ,aAAF,CAAgBG,KAAK,CAACkB,kBAAN,CAAyBF,UAAzB,EAAqC7L,KAArC,CAAhB,CAAJ,CAJ2C,CAK3C;AACA;;AAEDiL,QAAAA,CAAC,GAAGO,CAAC,CAACQ,SAAF,CAAYjB,KAAZ,EAAmBL,aAAnB,CAAiCY,SAAjC,CAAJ;AACAF,QAAAA,CAAC,GAAGI,CAAC,CAACQ,SAAF,CAAYb,KAAZ,EAAmBT,aAAnB,CAAiCa,SAAjC,CAAJ;AACA;;AAED,UAAIU,gBAAgB,GAAGb,CAAC,CAACM,cAAF,CAAiB,CAAjB,CAAvB;;AACA,UAAIO,gBAAgB,IAAI,CAAxB,EAA2B;AAC1B,cAAM,6CAAN;AACA;;AAED,UAAIL,OAAO,GAAG,KAAK3C,KAAL,CAAW2C,OAAX,CAAmBK,gBAAnB,CAAd;AACA,UAAIhC,KAAK,GAAGmB,CAAC,CAACc,SAAF,CAAYN,OAAZ,CAAZ;AACA,UAAI1B,KAAK,GAAGY,CAAC,CAACoB,SAAF,CAAYN,OAAZ,CAAZ;AACA,aAAO,IAAIzU,KAAJ,CAAU8S,KAAV,EAAiBC,KAAjB,CAAP;AACA,KAtDD;;AAuDA,SAAKE,kBAAL,GAA0B,UAAU+B,YAAV,EAAwB;AACjD;AACA,UAAIC,SAAS,GAAGD,YAAY,CAACvB,MAA7B;;AACA,UAAIwB,SAAS,IAAI,CAAjB,EAAoB;AACnB;AACA,eAAO,IAAIjV,KAAJ,CAAUgV,YAAY,CAACT,cAAb,CAA4B,CAA5B,CAAV,CAAP;AACA;;AACD,UAAI3L,MAAM,GAAG,IAAI5I,KAAJ,CAAUiV,SAAV,CAAb;AACA,UAAIC,CAAC,GAAG,CAAR;;AACA,WAAK,IAAI7S,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAAJ,IAAW6S,CAAC,GAAGD,SAA/B,EAA0C5S,CAAC,EAA3C,EAA+C;AAC9C,YAAI2S,YAAY,CAACxC,UAAb,CAAwBnQ,CAAxB,KAA8B,CAAlC,EAAqC;AACpCuG,UAAAA,MAAM,CAACsM,CAAD,CAAN,GAAY,KAAKpD,KAAL,CAAW2C,OAAX,CAAmBpS,CAAnB,CAAZ;AACA6S,UAAAA,CAAC;AACD;AACD;;AACD,UAAIA,CAAC,IAAID,SAAT,EAAoB;AACnB,cAAM,qDAAN;AACA;;AACD,aAAOrM,MAAP;AACA,KAnBD;;AAoBA,SAAKuK,mBAAL,GAA2B,UAAUgC,cAAV,EAA0BnC,cAA1B,EAA0CX,UAA1C,EAAsD;AAChF;AACA,UAAIyB,CAAC,GAAGd,cAAc,CAAC1T,MAAvB;AACA,UAAIsJ,MAAM,GAAG,IAAI5I,KAAJ,CAAU8T,CAAV,CAAb;;AACA,WAAK,IAAIzR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyR,CAApB,EAAuBzR,CAAC,EAAxB,EAA4B;AAC3B,YAAI+S,SAAS,GAAG,KAAKtD,KAAL,CAAW2C,OAAX,CAAmBzB,cAAc,CAAC3Q,CAAD,CAAjC,CAAhB;AACA,YAAI4C,WAAW,GAAG,CAAlB;;AACA,aAAK,IAAIqK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwE,CAApB,EAAuBxE,CAAC,EAAxB,EAA4B;AAC3B,cAAIjN,CAAC,IAAIiN,CAAT,EAAY;AACXrK,YAAAA,WAAW,GAAG,KAAK6M,KAAL,CAAW6C,QAAX,CAAoB1P,WAApB,EAAiCqO,KAAK,CAACC,aAAN,CAAoB,CAApB,EAAuB,KAAKzB,KAAL,CAAW6C,QAAX,CAAoB3B,cAAc,CAAC1D,CAAD,CAAlC,EAAuC8F,SAAvC,CAAvB,CAAjC,CAAd;AACA;AACD;;AACDxM,QAAAA,MAAM,CAACvG,CAAD,CAAN,GAAY,KAAKyP,KAAL,CAAW6C,QAAX,CAAoBQ,cAAc,CAAC3C,UAAf,CAA0B4C,SAA1B,CAApB,EAA0D,KAAKtD,KAAL,CAAW2C,OAAX,CAAmBxP,WAAnB,CAA1D,CAAZ,CAR2B,CAS3B;;AACA,YAAIoN,UAAJ,EAAgB;AACfzJ,UAAAA,MAAM,CAACvG,CAAD,CAAN,GAAY,KAAKyP,KAAL,CAAW6C,QAAX,CAAoB/L,MAAM,CAACvG,CAAD,CAA1B,EAA+B+S,SAA/B,CAAZ;AACA;AACD;;AACD,aAAOxM,MAAP;AACA,KAnBD;AAoBA;;AAID,WAASuJ,SAAT,CAAmBL,KAAnB,EAA0BuD,YAA1B,EAAwC;AACvC,QAAIA,YAAY,IAAI,IAAhB,IAAwBA,YAAY,CAAC/V,MAAb,IAAuB,CAAnD,EAAsD;AACrD,YAAM,0BAAN;AACA;;AACD,SAAKwS,KAAL,GAAaA,KAAb;AACA,QAAIwD,kBAAkB,GAAGD,YAAY,CAAC/V,MAAtC;;AACA,QAAIgW,kBAAkB,GAAG,CAArB,IAA0BD,YAAY,CAAC,CAAD,CAAZ,IAAmB,CAAjD,EAAoD;AACnD;AACA,UAAIE,YAAY,GAAG,CAAnB;;AACA,aAAOA,YAAY,GAAGD,kBAAf,IAAqCD,YAAY,CAACE,YAAD,CAAZ,IAA8B,CAA1E,EAA6E;AAC5EA,QAAAA,YAAY;AACZ;;AACD,UAAIA,YAAY,IAAID,kBAApB,EAAwC;AACvC,aAAKD,YAAL,GAAoBvD,KAAK,CAACiC,IAAN,CAAWsB,YAA/B;AACA,OAFD,MAGK;AACJ,aAAKA,YAAL,GAAoB,IAAIrV,KAAJ,CAAUsV,kBAAkB,GAAGC,YAA/B,CAApB;;AACA,aAAK,IAAIlT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKgT,YAAL,CAAkB/V,MAAtC,EAA8C+C,CAAC,EAA/C;AAAkD,eAAKgT,YAAL,CAAkBhT,CAAlB,IAAuB,CAAvB;AAAlD,SAFI,CAGJ;;;AACA,aAAK,IAAImT,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAG,KAAKH,YAAL,CAAkB/V,MAAxC,EAAgDkW,EAAE,EAAlD;AAAqD,eAAKH,YAAL,CAAkBG,EAAlB,IAAwBH,YAAY,CAACE,YAAY,GAAGC,EAAhB,CAApC;AAArD;AACA;AACD,KAfD,MAgBK;AACJ,WAAKH,YAAL,GAAoBA,YAApB;AACA;;AAED,SAAKxT,gBAAL,CAAsB,MAAtB,EAA8B,YAAY;AACzC,aAAO,KAAKwT,YAAL,CAAkB,CAAlB,KAAwB,CAA/B;AACA,KAFD;;AAGA,SAAKxT,gBAAL,CAAsB,QAAtB,EAAgC,YAAY;AAC3C,aAAO,KAAKwT,YAAL,CAAkB/V,MAAlB,GAA2B,CAAlC;AACA,KAFD;;AAGA,SAAKuC,gBAAL,CAAsB,cAAtB,EAAsC,YAAY;AACjD,aAAO,KAAKwT,YAAZ;AACA,KAFD;;AAIA,SAAKd,cAAL,GAAsB,UAAUkB,MAAV,EAAkB;AACvC,aAAO,KAAKJ,YAAL,CAAkB,KAAKA,YAAL,CAAkB/V,MAAlB,GAA2B,CAA3B,GAA+BmW,MAAjD,CAAP;AACA,KAFD;;AAIA,SAAKjD,UAAL,GAAkB,UAAUpF,CAAV,EAAa;AAC9B,UAAIA,CAAC,IAAI,CAAT,EAAY;AACX;AACA,eAAO,KAAKmH,cAAL,CAAoB,CAApB,CAAP;AACA;;AACD,UAAImB,IAAI,GAAG,KAAKL,YAAL,CAAkB/V,MAA7B;;AACA,UAAI8N,CAAC,IAAI,CAAT,EAAY;AACX;AACA,YAAIxE,MAAM,GAAG,CAAb;;AACA,aAAK,IAAIvG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqT,IAApB,EAA0BrT,CAAC,EAA3B,EAA+B;AAC9BuG,UAAAA,MAAM,GAAG0K,KAAK,CAACC,aAAN,CAAoB3K,MAApB,EAA4B,KAAKyM,YAAL,CAAkBhT,CAAlB,CAA5B,CAAT;AACA;;AACD,eAAOuG,MAAP;AACA;;AACD,UAAI+M,OAAO,GAAG,KAAKN,YAAL,CAAkB,CAAlB,CAAd;;AACA,WAAK,IAAIhT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqT,IAApB,EAA0BrT,CAAC,EAA3B,EAA+B;AAC9BsT,QAAAA,OAAO,GAAGrC,KAAK,CAACC,aAAN,CAAoB,KAAKzB,KAAL,CAAW6C,QAAX,CAAoBvH,CAApB,EAAuBuI,OAAvB,CAApB,EAAqD,KAAKN,YAAL,CAAkBhT,CAAlB,CAArD,CAAV;AACA;;AACD,aAAOsT,OAAP;AACA,KAnBD;;AAqBA,SAAKpC,aAAL,GAAqB,UAAU/N,KAAV,EAAiB;AACrC,UAAI,KAAKsM,KAAL,IAActM,KAAK,CAACsM,KAAxB,EAA+B;AAC9B,cAAM,yCAAN;AACA;;AACD,UAAI,KAAKiC,IAAT,EAAe;AACd,eAAOvO,KAAP;AACA;;AACD,UAAIA,KAAK,CAACuO,IAAV,EAAgB;AACf,eAAO,IAAP;AACA;;AAED,UAAI6B,mBAAmB,GAAG,KAAKP,YAA/B;AACA,UAAIQ,kBAAkB,GAAGrQ,KAAK,CAAC6P,YAA/B;;AACA,UAAIO,mBAAmB,CAACtW,MAApB,GAA6BuW,kBAAkB,CAACvW,MAApD,EAA4D;AAC3D,YAAIuI,IAAI,GAAG+N,mBAAX;AACAA,QAAAA,mBAAmB,GAAGC,kBAAtB;AACAA,QAAAA,kBAAkB,GAAGhO,IAArB;AACA;;AACD,UAAIiO,OAAO,GAAG,IAAI9V,KAAJ,CAAU6V,kBAAkB,CAACvW,MAA7B,CAAd;AACA,UAAIyW,UAAU,GAAGF,kBAAkB,CAACvW,MAAnB,GAA4BsW,mBAAmB,CAACtW,MAAjE,CAnBqC,CAoBrC;AACA;;AACA,WAAK,IAAIkW,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGO,UAAtB,EAAkCP,EAAE,EAApC;AAAuCM,QAAAA,OAAO,CAACN,EAAD,CAAP,GAAcK,kBAAkB,CAACL,EAAD,CAAhC;AAAvC;;AAEA,WAAK,IAAInT,CAAC,GAAG0T,UAAb,EAAyB1T,CAAC,GAAGwT,kBAAkB,CAACvW,MAAhD,EAAwD+C,CAAC,EAAzD,EAA6D;AAC5DyT,QAAAA,OAAO,CAACzT,CAAD,CAAP,GAAaiR,KAAK,CAACC,aAAN,CAAoBqC,mBAAmB,CAACvT,CAAC,GAAG0T,UAAL,CAAvC,EAAyDF,kBAAkB,CAACxT,CAAD,CAA3E,CAAb;AACA;;AAED,aAAO,IAAI8P,SAAJ,CAAcL,KAAd,EAAqBgE,OAArB,CAAP;AACA,KA7BD;;AA8BA,SAAKjB,SAAL,GAAiB,UAAUrP,KAAV,EAAiB;AACjC,UAAI,KAAKsM,KAAL,IAActM,KAAK,CAACsM,KAAxB,EAA+B;AAC9B,cAAM,yCAAN;AACA;;AACD,UAAI,KAAKiC,IAAL,IAAavO,KAAK,CAACuO,IAAvB,EAA6B;AAC5B,eAAO,KAAKjC,KAAL,CAAWiC,IAAlB;AACA;;AACD,UAAIiC,aAAa,GAAG,KAAKX,YAAzB;AACA,UAAIY,OAAO,GAAGD,aAAa,CAAC1W,MAA5B;AACA,UAAI4W,aAAa,GAAG1Q,KAAK,CAAC6P,YAA1B;AACA,UAAIc,OAAO,GAAGD,aAAa,CAAC5W,MAA5B;AACA,UAAI8W,OAAO,GAAG,IAAIpW,KAAJ,CAAUiW,OAAO,GAAGE,OAAV,GAAoB,CAA9B,CAAd;;AACA,WAAK,IAAI9T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4T,OAApB,EAA6B5T,CAAC,EAA9B,EAAkC;AACjC,YAAIgU,MAAM,GAAGL,aAAa,CAAC3T,CAAD,CAA1B;;AACA,aAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6G,OAApB,EAA6B7G,CAAC,EAA9B,EAAkC;AACjC8G,UAAAA,OAAO,CAAC/T,CAAC,GAAGiN,CAAL,CAAP,GAAiBgE,KAAK,CAACC,aAAN,CAAoB6C,OAAO,CAAC/T,CAAC,GAAGiN,CAAL,CAA3B,EAAoC,KAAKwC,KAAL,CAAW6C,QAAX,CAAoB0B,MAApB,EAA4BH,aAAa,CAAC5G,CAAD,CAAzC,CAApC,CAAjB;AACA;AACD;;AACD,aAAO,IAAI6C,SAAJ,CAAc,KAAKL,KAAnB,EAA0BsE,OAA1B,CAAP;AACA,KAnBD;;AAoBA,SAAKrB,SAAL,GAAiB,UAAUuB,MAAV,EAAkB;AAClC,UAAIA,MAAM,IAAI,CAAd,EAAiB;AAChB,eAAO,KAAKxE,KAAL,CAAWiC,IAAlB;AACA;;AACD,UAAIuC,MAAM,IAAI,CAAd,EAAiB;AAChB,eAAO,IAAP;AACA;;AACD,UAAIZ,IAAI,GAAG,KAAKL,YAAL,CAAkB/V,MAA7B;AACA,UAAI8W,OAAO,GAAG,IAAIpW,KAAJ,CAAU0V,IAAV,CAAd;;AACA,WAAK,IAAIrT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqT,IAApB,EAA0BrT,CAAC,EAA3B,EAA+B;AAC9B+T,QAAAA,OAAO,CAAC/T,CAAD,CAAP,GAAa,KAAKyP,KAAL,CAAW6C,QAAX,CAAoB,KAAKU,YAAL,CAAkBhT,CAAlB,CAApB,EAA0CiU,MAA1C,CAAb;AACA;;AACD,aAAO,IAAInE,SAAJ,CAAc,KAAKL,KAAnB,EAA0BsE,OAA1B,CAAP;AACA,KAbD;;AAcA,SAAKxB,kBAAL,GAA0B,UAAUa,MAAV,EAAkBc,WAAlB,EAA+B;AACxD,UAAId,MAAM,GAAG,CAAb,EAAgB;AACf,cAAM,0BAAN;AACA;;AACD,UAAIc,WAAW,IAAI,CAAnB,EAAsB;AACrB,eAAO,KAAKzE,KAAL,CAAWiC,IAAlB;AACA;;AACD,UAAI2B,IAAI,GAAG,KAAKL,YAAL,CAAkB/V,MAA7B;AACA,UAAI8W,OAAO,GAAG,IAAIpW,KAAJ,CAAU0V,IAAI,GAAGD,MAAjB,CAAd;;AACA,WAAK,IAAIpT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+T,OAAO,CAAC9W,MAA5B,EAAoC+C,CAAC,EAArC;AAAwC+T,QAAAA,OAAO,CAAC/T,CAAD,CAAP,GAAa,CAAb;AAAxC;;AACA,WAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqT,IAApB,EAA0BrT,CAAC,EAA3B,EAA+B;AAC9B+T,QAAAA,OAAO,CAAC/T,CAAD,CAAP,GAAa,KAAKyP,KAAL,CAAW6C,QAAX,CAAoB,KAAKU,YAAL,CAAkBhT,CAAlB,CAApB,EAA0CkU,WAA1C,CAAb;AACA;;AACD,aAAO,IAAIpE,SAAJ,CAAc,KAAKL,KAAnB,EAA0BsE,OAA1B,CAAP;AACA,KAdD;;AAeA,SAAKI,MAAL,GAAc,UAAUhR,KAAV,EAAiB;AAC9B,UAAI,KAAKsM,KAAL,IAActM,KAAK,CAACsM,KAAxB,EAA+B;AAC9B,cAAM,yCAAN;AACA;;AACD,UAAItM,KAAK,CAACuO,IAAV,EAAgB;AACf,cAAM,aAAN;AACA;;AAED,UAAI0C,QAAQ,GAAG,KAAK3E,KAAL,CAAWiC,IAA1B;AACA,UAAI2C,SAAS,GAAG,IAAhB;AAEA,UAAIpC,sBAAsB,GAAG9O,KAAK,CAAC+O,cAAN,CAAqB/O,KAAK,CAACiO,MAA3B,CAA7B;AACA,UAAIkD,6BAA6B,GAAG,KAAK7E,KAAL,CAAW2C,OAAX,CAAmBH,sBAAnB,CAApC;;AAEA,aAAOoC,SAAS,CAACjD,MAAV,IAAoBjO,KAAK,CAACiO,MAA1B,IAAoC,CAACiD,SAAS,CAAC3C,IAAtD,EAA4D;AAC3D,YAAI6C,gBAAgB,GAAGF,SAAS,CAACjD,MAAV,GAAmBjO,KAAK,CAACiO,MAAhD;AACA,YAAI5K,KAAK,GAAG,KAAKiJ,KAAL,CAAW6C,QAAX,CAAoB+B,SAAS,CAACnC,cAAV,CAAyBmC,SAAS,CAACjD,MAAnC,CAApB,EAAgEkD,6BAAhE,CAAZ;AACA,YAAIE,IAAI,GAAGrR,KAAK,CAACoP,kBAAN,CAAyBgC,gBAAzB,EAA2C/N,KAA3C,CAAX;AACA,YAAIiO,iBAAiB,GAAG,KAAKhF,KAAL,CAAWe,aAAX,CAAyB+D,gBAAzB,EAA2C/N,KAA3C,CAAxB;AACA4N,QAAAA,QAAQ,GAAGA,QAAQ,CAAClD,aAAT,CAAuBuD,iBAAvB,CAAX;AACAJ,QAAAA,SAAS,GAAGA,SAAS,CAACnD,aAAV,CAAwBsD,IAAxB,CAAZ;AACA;;AAED,aAAO,IAAI7W,KAAJ,CAAUyW,QAAV,EAAoBC,SAApB,CAAP;AACA,KAxBD;AAyBA;;AAID,WAASpD,KAAT,CAAeyD,SAAf,EAA0B;AACzB,SAAKC,QAAL,GAAgB,IAAIhX,KAAJ,CAAU,GAAV,CAAhB;AACA,SAAKiX,QAAL,GAAgB,IAAIjX,KAAJ,CAAU,GAAV,CAAhB;AACA,QAAIT,CAAC,GAAG,CAAR;;AACA,SAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC7B,WAAK2U,QAAL,CAAc3U,CAAd,IAAmB9C,CAAnB;AACAA,MAAAA,CAAC,KAAK,CAAN,CAF6B,CAEpB;;AACT,UAAIA,CAAC,IAAI,KAAT,EAAgB;AACfA,QAAAA,CAAC,IAAIwX,SAAL;AACA;AACD;;AACD,SAAK,IAAI1U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC7B,WAAK4U,QAAL,CAAc,KAAKD,QAAL,CAAc3U,CAAd,CAAd,IAAkCA,CAAlC;AACA,KAbwB,CAczB;;;AACA,QAAI6U,GAAG,GAAG,IAAIlX,KAAJ,CAAU,CAAV,CAAV;AAAwBkX,IAAAA,GAAG,CAAC,CAAD,CAAH,GAAS,CAAT;AACxB,SAAKC,IAAL,GAAY,IAAIhF,SAAJ,CAAc,IAAd,EAAoB,IAAInS,KAAJ,CAAUkX,GAAV,CAApB,CAAZ;AACA,QAAIE,GAAG,GAAG,IAAIpX,KAAJ,CAAU,CAAV,CAAV;AAAwBoX,IAAAA,GAAG,CAAC,CAAD,CAAH,GAAS,CAAT;AACxB,SAAKC,GAAL,GAAW,IAAIlF,SAAJ,CAAc,IAAd,EAAoB,IAAInS,KAAJ,CAAUoX,GAAV,CAApB,CAAX;;AAEA,SAAKvV,gBAAL,CAAsB,MAAtB,EAA8B,YAAY;AACzC,aAAO,KAAKsV,IAAZ;AACA,KAFD;;AAGA,SAAKtV,gBAAL,CAAsB,KAAtB,EAA6B,YAAY;AACxC,aAAO,KAAKwV,GAAZ;AACA,KAFD;;AAGA,SAAKxE,aAAL,GAAqB,UAAU4C,MAAV,EAAkBc,WAAlB,EAA+B;AACnD,UAAId,MAAM,GAAG,CAAb,EAAgB;AACf,cAAM,0BAAN;AACA;;AACD,UAAIc,WAAW,IAAI,CAAnB,EAAsB;AACrB,eAAO,KAAKY,IAAZ;AACA;;AACD,UAAI9B,YAAY,GAAG,IAAIrV,KAAJ,CAAUyV,MAAM,GAAG,CAAnB,CAAnB;;AACA,WAAK,IAAIpT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgT,YAAY,CAAC/V,MAAjC,EAAyC+C,CAAC,EAA1C;AAA6CgT,QAAAA,YAAY,CAAChT,CAAD,CAAZ,GAAkB,CAAlB;AAA7C;;AACAgT,MAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkBkB,WAAlB;AACA,aAAO,IAAIpE,SAAJ,CAAc,IAAd,EAAoBkD,YAApB,CAAP;AACA,KAXD;;AAYA,SAAK5C,GAAL,GAAW,UAAUrF,CAAV,EAAa;AACvB,aAAO,KAAK4J,QAAL,CAAc5J,CAAd,CAAP;AACA,KAFD;;AAGA,SAAKiG,GAAL,GAAW,UAAUjG,CAAV,EAAa;AACvB,UAAIA,CAAC,IAAI,CAAT,EAAY;AACX,cAAM,0BAAN;AACA;;AACD,aAAO,KAAK6J,QAAL,CAAc7J,CAAd,CAAP;AACA,KALD;;AAMA,SAAKqH,OAAL,GAAe,UAAUrH,CAAV,EAAa;AAC3B,UAAIA,CAAC,IAAI,CAAT,EAAY;AACX,cAAM,4BAAN;AACA;;AACD,aAAO,KAAK4J,QAAL,CAAc,MAAM,KAAKC,QAAL,CAAc7J,CAAd,CAApB,CAAP;AACA,KALD;;AAMA,SAAKuH,QAAL,GAAgB,UAAUvH,CAAV,EAAaC,CAAb,EAAgB;AAC/B,UAAID,CAAC,IAAI,CAAL,IAAUC,CAAC,IAAI,CAAnB,EAAsB;AACrB,eAAO,CAAP;AACA;;AACD,UAAID,CAAC,IAAI,CAAT,EAAY;AACX,eAAOC,CAAP;AACA;;AACD,UAAIA,CAAC,IAAI,CAAT,EAAY;AACX,eAAOD,CAAP;AACA;;AACD,aAAO,KAAK4J,QAAL,CAAc,CAAC,KAAKC,QAAL,CAAc7J,CAAd,IAAmB,KAAK6J,QAAL,CAAc5J,CAAd,CAApB,IAAwC,GAAtD,CAAP;AACA,KAXD;AAYA;;AAEDiG,EAAAA,KAAK,CAACgE,aAAN,GAAsB,IAAIhE,KAAJ,CAAU,MAAV,CAAtB;AACAA,EAAAA,KAAK,CAACiE,iBAAN,GAA0B,IAAIjE,KAAJ,CAAU,MAAV,CAA1B;;AAEAA,EAAAA,KAAK,CAACC,aAAN,GAAsB,UAAUnG,CAAV,EAAaC,CAAb,EAAgB;AACrC,WAAOD,CAAC,GAAGC,CAAX;AACA,GAFD;;AAKA,MAAImK,OAAO,GAAG,EAAd;AACAA,EAAAA,OAAO,CAACC,SAAR,GAAoB,IAAI5F,kBAAJ,CAAuByB,KAAK,CAACgE,aAA7B,CAApB;;AAEAE,EAAAA,OAAO,CAACE,aAAR,GAAwB,UAAUC,aAAV,EAAyB9I,gBAAzB,EAA2C;AAClE,QAAIa,YAAY,GAAGiI,aAAa,CAACrY,MAAjC,CADkE,CAElE;;AACA,QAAIsY,aAAa,GAAG,IAAI5X,KAAJ,CAAU0P,YAAV,CAApB;;AACA,SAAK,IAAIrN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqN,YAApB,EAAkCrN,CAAC,EAAnC,EAAuC;AACtCuV,MAAAA,aAAa,CAACvV,CAAD,CAAb,GAAmBsV,aAAa,CAACtV,CAAD,CAAb,GAAmB,IAAtC;AACA;;AACD,QAAIwV,cAAc,GAAGF,aAAa,CAACrY,MAAd,GAAuBuP,gBAA5C;;AACA,QAAI;AACH2I,MAAAA,OAAO,CAACC,SAAR,CAAkB1F,MAAlB,CAAyB6F,aAAzB,EAAwCC,cAAxC,EADG,CAEH;AACA;AACA,KAJD,CAKA,OAAOC,GAAP,EAAY;AACX,YAAMA,GAAN;AACA,KAfiE,CAgBlE;AACA;;;AACA,SAAK,IAAIzV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwM,gBAApB,EAAsCxM,CAAC,EAAvC,EAA2C;AAC1CsV,MAAAA,aAAa,CAACtV,CAAD,CAAb,GAAmBuV,aAAa,CAACvV,CAAD,CAAhC;AACA;AACD,GArBD;;AAuBAmV,EAAAA,OAAO,CAACzF,MAAR,GAAiB,UAAUjS,IAAV,EAAgB;AAChC,QAAIiY,MAAM,GAAG,IAAIjI,eAAJ,CAAoBhQ,IAApB,CAAb;AACA,QAAImP,OAAO,GAAG8I,MAAM,CAACzH,WAAP,EAAd;AACA,QAAI9M,OAAO,GAAGuU,MAAM,CAAC5H,qBAAP,GAA+BrD,oBAA7C,CAHgC,CAKhC;;AACA,QAAIgC,SAAS,GAAGiJ,MAAM,CAACvH,aAAP,EAAhB,CANgC,CAQhC;;AACA,QAAIwH,UAAU,GAAGpJ,SAAS,CAACG,aAAV,CAAwBD,SAAxB,EAAmCG,OAAnC,EAA4CzL,OAA5C,CAAjB,CATgC,CAWhC;;AACA,QAAIyU,UAAU,GAAG,CAAjB;;AACA,SAAK,IAAI5V,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2V,UAAU,CAAC1Y,MAA/B,EAAuC+C,CAAC,EAAxC,EAA4C;AAC3C4V,MAAAA,UAAU,IAAID,UAAU,CAAC3V,CAAD,CAAV,CAAc6V,gBAA5B;AACA;;AACD,QAAIC,WAAW,GAAG,IAAInY,KAAJ,CAAUiY,UAAV,CAAlB;AACA,QAAInH,YAAY,GAAG,CAAnB,CAjBgC,CAmBhC;;AACA,SAAK,IAAIxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0I,UAAU,CAAC1Y,MAA/B,EAAuCgQ,CAAC,EAAxC,EAA4C;AAC3C,UAAI8I,SAAS,GAAGJ,UAAU,CAAC1I,CAAD,CAA1B;AACA,UAAIqI,aAAa,GAAGS,SAAS,CAACC,SAA9B;AACA,UAAIxJ,gBAAgB,GAAGuJ,SAAS,CAACF,gBAAjC;AACAV,MAAAA,OAAO,CAACE,aAAR,CAAsBC,aAAtB,EAAqC9I,gBAArC;;AACA,WAAK,IAAIxM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwM,gBAApB,EAAsCxM,CAAC,EAAvC,EAA2C;AAC1C8V,QAAAA,WAAW,CAACrH,YAAY,EAAb,CAAX,GAA8B6G,aAAa,CAACtV,CAAD,CAA3C;AACA;AACD,KA5B+B,CA8BhC;;;AACA,QAAIiW,MAAM,GAAG,IAAIC,qBAAJ,CAA0BJ,WAA1B,EAAuClJ,OAAO,CAACuJ,aAA/C,EAA8DhV,OAAO,CAACiV,IAAtE,CAAb;AACA,WAAOH,MAAP,CAhCgC,CAiChC;AACA,GAlCD;;AAqCA,MAAIpZ,MAAM,GAAG,EAAb;AACAA,EAAAA,MAAM,CAACwZ,SAAP,GAAmB,IAAnB;AACAxZ,EAAAA,MAAM,CAACD,KAAP,GAAe,CAAf;AACAC,EAAAA,MAAM,CAACC,MAAP,GAAgB,CAAhB;AACAD,EAAAA,MAAM,CAACyZ,YAAP,GAAsB,IAAtB;AACAzZ,EAAAA,MAAM,CAAC0Z,KAAP,GAAe,KAAf;AACA1Z,EAAAA,MAAM,CAAC2Z,UAAP,GAAoB,OAAO,IAA3B;AAEA3Z,EAAAA,MAAM,CAAC4Z,oBAAP,GAA8B,CAAC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAAD,EAAgB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAAhB,EAAkC,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAAlC,CAA9B;AAEA5Z,EAAAA,MAAM,CAAC6Z,QAAP,GAAkB,IAAlB;;AAEA7Z,EAAAA,MAAM,CAAC8Z,UAAP,GAAoB,UAAUC,MAAV,EAAkB;AACrC/Z,IAAAA,MAAM,CAACga,WAAP,GAAqBD,MAArB;AACA,QAAI/Z,MAAM,CAACia,MAAX,EACCja,MAAM,CAACka,KAAP,CAAaC,GAAb,GAAmBC,MAAM,CAACC,SAAP,CAAiBC,eAAjB,CAAiCP,MAAjC,CAAnB,CADD,KAGC,IAAI/Z,MAAM,CAACua,GAAX,EAAgB;AACfva,MAAAA,MAAM,CAACka,KAAP,CAAaM,YAAb,GAA4BT,MAA5B;AACA/Z,MAAAA,MAAM,CAACka,KAAP,CAAaO,IAAb;AACA,KAHD,MAKCza,MAAM,CAACka,KAAP,CAAaC,GAAb,GAAmBJ,MAAnB;AAEF/Z,IAAAA,MAAM,CAAC0a,GAAP,GAAa,IAAb;AAEA1a,IAAAA,MAAM,CAAC2a,UAAP,GAAoBC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAApB;AACA7a,IAAAA,MAAM,CAAC2a,UAAP,CAAkBG,EAAlB,GAAuB,WAAvB;AACA9a,IAAAA,MAAM,CAAC+a,UAAP,GAAoB/a,MAAM,CAAC2a,UAAP,CAAkBK,UAAlB,CAA6B,IAA7B,CAApB;AACAhb,IAAAA,MAAM,CAAC2a,UAAP,CAAkB5a,KAAlB,GAA0BC,MAAM,CAACka,KAAP,CAAae,UAAvC;AACAjb,IAAAA,MAAM,CAAC2a,UAAP,CAAkB1a,MAAlB,GAA2BD,MAAM,CAACka,KAAP,CAAagB,WAAxC;AACAC,IAAAA,UAAU,CAACnb,MAAM,CAACob,eAAR,EAAyB,GAAzB,CAAV;AACA,GApBD;;AAsBApb,EAAAA,MAAM,CAACqb,QAAP,GAAkB,UAAUvS,KAAV,EAAiB;AAClC9I,IAAAA,MAAM,CAAC0a,GAAP,GAAa,KAAb;AACA;AACA,GAHD;;AAKA1a,EAAAA,MAAM,CAACob,eAAP,GAAyB,YAAY;AACpC,QAAIpb,MAAM,CAAC0a,GAAX,EAAgB;AACf,UAAI;AACH,YAAI1a,MAAM,CAACka,KAAP,CAAae,UAAb,IAA2B,CAA/B,EAAkC;AACjCE,UAAAA,UAAU,CAACnb,MAAM,CAACob,eAAR,EAAyB,GAAzB,CAAV;AACA;AACA,SAHD,MAIK;AACJpb,UAAAA,MAAM,CAAC2a,UAAP,CAAkB5a,KAAlB,GAA0BC,MAAM,CAACka,KAAP,CAAae,UAAvC;AACAjb,UAAAA,MAAM,CAAC2a,UAAP,CAAkB1a,MAAlB,GAA2BD,MAAM,CAACka,KAAP,CAAagB,WAAxC;AACA;;AACDlb,QAAAA,MAAM,CAAC+a,UAAP,CAAkBO,SAAlB,CAA4Btb,MAAM,CAACka,KAAnC,EAA0C,CAA1C,EAA6C,CAA7C;;AACA,YAAI;AACHla,UAAAA,MAAM,CAAC6S,MAAP;AACA,SAFD,CAGA,OAAOmD,CAAP,EAAU;AACTuF,UAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACAmF,UAAAA,UAAU,CAACnb,MAAM,CAACob,eAAR,EAAyB,GAAzB,CAAV;AACA;;AAAA;AACD,OAjBD,CAkBA,OAAOpF,CAAP,EAAU;AACTuF,QAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACAmF,QAAAA,UAAU,CAACnb,MAAM,CAACob,eAAR,EAAyB,GAAzB,CAAV;AACA;;AAAA;AACD;AACD,GAzBD;;AA2BApb,EAAAA,MAAM,CAACwb,SAAP,GAAmB,UAAUC,OAAV,EAAmB;AACrC,QAAItV,CAAC,GAAGuV,SAAR;AACA1b,IAAAA,MAAM,CAACka,KAAP,GAAeU,QAAQ,CAACe,cAAT,CAAwBF,OAAxB,CAAf;AAEA,QAAIG,OAAO,GAAG,IAAd;;AACA,QAAIF,SAAS,CAACG,YAAV,IAA0BH,SAAS,CAACG,YAAV,CAAuBC,gBAArD,EAAuE;AACtE,UAAI;AACHJ,QAAAA,SAAS,CAACG,YAAV,CAAuBC,gBAAvB,GACEC,IADF,CACO,UAAUC,OAAV,EAAmB;AACxBA,UAAAA,OAAO,CAACC,OAAR,CAAgB,UAAUC,MAAV,EAAkB;AACjCX,YAAAA,OAAO,CAACpH,GAAR,CAAY,MAAZ;;AACA,gBAAI+H,MAAM,CAACC,IAAP,KAAgB,YAApB,EAAkC;AACjC,kBAAID,MAAM,CAACE,KAAP,CAAaC,WAAb,GAA2BC,MAA3B,CAAkC,MAAlC,IAA4C,CAAC,CAAjD,EACCV,OAAO,GAAG,CAAC;AAAE,4BAAYM,MAAM,CAACK;AAArB,eAAD,CAAV;AACD;;AACDhB,YAAAA,OAAO,CAACpH,GAAR,CAAY+H,MAAM,CAACC,IAAP,GAAc,IAAd,GAAqBD,MAAM,CAACE,KAA5B,GACX,QADW,GACAF,MAAM,CAACK,QADnB;AAEA,WARD;AASA,SAXF;AAaA,OAdD,CAeA,OAAOvG,CAAP,EAAU;AACTuF,QAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACA;AACD,KAnBD,MAoBK;AACJuF,MAAAA,OAAO,CAACpH,GAAR,CAAY,4CAAZ;AACA;;AAED,QAAIhO,CAAC,CAACqW,YAAN,EACCrW,CAAC,CAACqW,YAAF,CAAe;AAAEtC,MAAAA,KAAK,EAAE0B,OAAT;AAAkBa,MAAAA,KAAK,EAAE;AAAzB,KAAf,EAAiDzc,MAAM,CAAC8Z,UAAxD,EAAoE9Z,MAAM,CAACqb,QAA3E,EADD,KAGC,IAAIlV,CAAC,CAACuW,kBAAN,EAA0B;AACzB1c,MAAAA,MAAM,CAACia,MAAP,GAAgB,IAAhB;AACA9T,MAAAA,CAAC,CAACuW,kBAAF,CAAqB;AAAExC,QAAAA,KAAK,EAAE0B,OAAT;AAAkBa,QAAAA,KAAK,EAAE;AAAzB,OAArB,EAAuDzc,MAAM,CAAC8Z,UAA9D,EAA0E9Z,MAAM,CAACqb,QAAjF;AACA,KAHD,MAKC,IAAIlV,CAAC,CAACwW,eAAN,EAAuB;AACtB3c,MAAAA,MAAM,CAACua,GAAP,GAAa,IAAb;AACApU,MAAAA,CAAC,CAACwW,eAAF,CAAkB;AAAEzC,QAAAA,KAAK,EAAE0B,OAAT;AAAkBa,QAAAA,KAAK,EAAE;AAAzB,OAAlB,EAAoDzc,MAAM,CAAC8Z,UAA3D,EAAuE9Z,MAAM,CAACqb,QAA9E;AACA;AACH,GAzCD;;AA2CArb,EAAAA,MAAM,CAAC6S,MAAP,GAAgB,UAAUsH,GAAV,EAAe;AAE9B,QAAIyC,SAAS,CAACxc,MAAV,IAAoB,CAAxB,EAA2B;AAC1B,UAAIJ,MAAM,CAAC2a,UAAX,EAAuB;AACtB,YAAIkC,SAAS,GAAG7c,MAAM,CAAC2a,UAAvB;AACA,YAAImC,OAAO,GAAG9c,MAAM,CAAC+a,UAArB;AACA,OAHD,MAIK;AACJ,YAAI8B,SAAS,GAAGjC,QAAQ,CAACe,cAAT,CAAwB,WAAxB,CAAhB;AACA,YAAImB,OAAO,GAAGD,SAAS,CAAC7B,UAAV,CAAqB,IAArB,CAAd;AACA;;AACDhb,MAAAA,MAAM,CAACD,KAAP,GAAe8c,SAAS,CAAC9c,KAAzB;AACAC,MAAAA,MAAM,CAACC,MAAP,GAAgB4c,SAAS,CAAC5c,MAA1B;AACAD,MAAAA,MAAM,CAACwZ,SAAP,GAAmBsD,OAAO,CAACC,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2B/c,MAAM,CAACD,KAAlC,EAAyCC,MAAM,CAACC,MAAhD,CAAnB;AACAD,MAAAA,MAAM,CAAC0J,MAAP,GAAgB1J,MAAM,CAACgd,OAAP,CAAeF,OAAf,CAAhB;AACA,UAAI9c,MAAM,CAAC6Z,QAAP,IAAmB,IAAvB,EACC7Z,MAAM,CAAC6Z,QAAP,CAAgB7Z,MAAM,CAAC0J,MAAvB;AACD,aAAO1J,MAAM,CAAC0J,MAAd;AACA,KAhBD,MAiBK;AACJ,UAAI7J,KAAK,GAAG,IAAIod,KAAJ,EAAZ;AACApd,MAAAA,KAAK,CAACqd,WAAN,GAAoB,WAApB;;AACArd,MAAAA,KAAK,CAACsd,MAAN,GAAe,YAAY;AAC1B;AACA,YAAIC,UAAU,GAAGxC,QAAQ,CAACe,cAAT,CAAwB,YAAxB,CAAjB;;AACA,YAAIyB,UAAU,IAAI,IAAlB,EAAwB;AACvB,cAAIC,MAAM,GAAGD,UAAU,CAACpC,UAAX,CAAsB,IAAtB,CAAb;AACAqC,UAAAA,MAAM,CAACC,SAAP,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,GAAvB,EAA4B,GAA5B;AACAD,UAAAA,MAAM,CAAC/B,SAAP,CAAiBzb,KAAjB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC;AACA;;AAED,YAAIgd,SAAS,GAAGjC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAhB;AACA,YAAIiC,OAAO,GAAGD,SAAS,CAAC7B,UAAV,CAAqB,IAArB,CAAd;AACA,YAAIuC,OAAO,GAAG1d,KAAK,CAACI,MAApB;AACA,YAAIud,MAAM,GAAG3d,KAAK,CAACE,KAAnB;;AACA,YAAIF,KAAK,CAACE,KAAN,GAAcF,KAAK,CAACI,MAApB,GAA6BD,MAAM,CAAC2Z,UAAxC,EAAoD;AACnD,cAAI8D,EAAE,GAAG5d,KAAK,CAACE,KAAN,GAAcF,KAAK,CAACI,MAA7B;AACAsd,UAAAA,OAAO,GAAGjd,IAAI,CAACgJ,IAAL,CAAUtJ,MAAM,CAAC2Z,UAAP,GAAoB8D,EAA9B,CAAV;AACAD,UAAAA,MAAM,GAAGC,EAAE,GAAGF,OAAd;AACA;;AAEDV,QAAAA,SAAS,CAAC9c,KAAV,GAAkByd,MAAlB;AACAX,QAAAA,SAAS,CAAC5c,MAAV,GAAmBsd,OAAnB;AAEAT,QAAAA,OAAO,CAACxB,SAAR,CAAkBzb,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+Bgd,SAAS,CAAC9c,KAAzC,EAAgD8c,SAAS,CAAC5c,MAA1D;AACAD,QAAAA,MAAM,CAACD,KAAP,GAAe8c,SAAS,CAAC9c,KAAzB;AACAC,QAAAA,MAAM,CAACC,MAAP,GAAgB4c,SAAS,CAAC5c,MAA1B;;AACA,YAAI;AACHD,UAAAA,MAAM,CAACwZ,SAAP,GAAmBsD,OAAO,CAACC,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BF,SAAS,CAAC9c,KAArC,EAA4C8c,SAAS,CAAC5c,MAAtD,CAAnB;AACA,SAFD,CAEE,OAAO+V,CAAP,EAAU;AACXhW,UAAAA,MAAM,CAAC0J,MAAP,GAAgB,iHAAhB;AACA,cAAI1J,MAAM,CAAC6Z,QAAP,IAAmB,IAAvB,EACC7Z,MAAM,CAAC6Z,QAAP,CAAgB7Z,MAAM,CAAC0J,MAAvB;AACD;AACA;;AAED,YAAI;AACH1J,UAAAA,MAAM,CAAC0J,MAAP,GAAgB1J,MAAM,CAACgd,OAAP,CAAeF,OAAf,CAAhB;AACA,SAFD,CAGA,OAAO9G,CAAP,EAAU;AACTuF,UAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACAhW,UAAAA,MAAM,CAAC0J,MAAP,GAAgB,wBAAhB;AACA;;AACD,YAAI1J,MAAM,CAAC6Z,QAAP,IAAmB,IAAvB,EACC7Z,MAAM,CAAC6Z,QAAP,CAAgB7Z,MAAM,CAAC0J,MAAvB;AACD,OA3CD;;AA4CA7J,MAAAA,KAAK,CAAC6d,OAAN,GAAgB,YAAY;AAC3B,YAAI1d,MAAM,CAAC6Z,QAAP,IAAmB,IAAvB,EACC7Z,MAAM,CAAC6Z,QAAP,CAAgB,0BAAhB;AACD,OAHD;;AAIAha,MAAAA,KAAK,CAACsa,GAAN,GAAYA,GAAZ;AACA;AACD,GAxED;;AA0EAna,EAAAA,MAAM,CAAC2d,KAAP,GAAe,UAAU/I,CAAV,EAAa;AAC3B,QAAIgJ,MAAM,GAAG,mFAAb;AACA,WAAOA,MAAM,CAACC,IAAP,CAAYjJ,CAAZ,CAAP;AACA,GAHD;;AAKA5U,EAAAA,MAAM,CAAC8d,UAAP,GAAoB,UAAUlJ,CAAV,EAAa;AAChC,QAAImJ,OAAO,GAAG,EAAd;;AACA,QAAI;AACHA,MAAAA,OAAO,GAAGC,MAAM,CAACpJ,CAAD,CAAhB;AACA,KAFD,CAGA,OAAOoB,CAAP,EAAU;AACTuF,MAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACA+H,MAAAA,OAAO,GAAGnJ,CAAV;AACA;;AACD,QAAIqJ,GAAG,GAAG,EAAV;;AACA,QAAI;AACHA,MAAAA,GAAG,GAAGC,kBAAkB,CAACH,OAAD,CAAxB;AACA,KAFD,CAGA,OAAO/H,CAAP,EAAU;AACTuF,MAAAA,OAAO,CAACpH,GAAR,CAAY6B,CAAZ;AACAiI,MAAAA,GAAG,GAAGF,OAAN;AACA;;AACD,WAAOE,GAAP;AACA,GAlBD;;AAoBAje,EAAAA,MAAM,CAACme,WAAP,GAAqB,UAAUvJ,CAAV,EAAa;AACjC,QAAI5U,MAAM,CAAC2d,KAAP,CAAa/I,CAAb,CAAJ,EACC,OAAO5U,MAAM,CAAC8d,UAAP,CAAkBlJ,CAAlB,CAAP,CADD,KAGC,OAAOA,CAAP;AACD,GALD;;AAOA5U,EAAAA,MAAM,CAACgd,OAAP,GAAiB,UAAUoB,GAAV,EAAe;AAE/B,QAAIC,KAAK,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAZ;AAEA,QAAI1e,KAAK,GAAGG,MAAM,CAACwe,iBAAP,CAAyBxe,MAAM,CAACye,SAAP,EAAzB,CAAZ,CAJ+B,CAK/B;;AAEA,QAAIze,MAAM,CAAC0Z,KAAX,EAAkB;AACjB,WAAK,IAAIlZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,MAAM,CAACC,MAA3B,EAAmCO,CAAC,EAApC,EAAwC;AACvC,aAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACD,KAA3B,EAAkCM,CAAC,EAAnC,EAAuC;AACtC,cAAIqe,KAAK,GAAIre,CAAC,GAAG,CAAL,GAAWG,CAAC,GAAGR,MAAM,CAACD,KAAX,GAAmB,CAA1C;AACAC,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAtB,IAA+B7e,KAAK,CAACQ,CAAC,GAAGG,CAAC,GAAGR,MAAM,CAACD,KAAhB,CAAL,GAA8B,CAA9B,GAAkC,CAAjE;AACAC,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmC7e,KAAK,CAACQ,CAAC,GAAGG,CAAC,GAAGR,MAAM,CAACD,KAAhB,CAAL,GAA8B,CAA9B,GAAkC,CAArE;AACAC,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmC7e,KAAK,CAACQ,CAAC,GAAGG,CAAC,GAAGR,MAAM,CAACD,KAAhB,CAAL,GAA8B,GAA9B,GAAoC,CAAvE;AACA;AACD;;AACDqe,MAAAA,GAAG,CAACQ,YAAJ,CAAiB5e,MAAM,CAACwZ,SAAxB,EAAmC,CAAnC,EAAsC,CAAtC;AACA,KAjB8B,CAmB/B;;;AAEA,QAAIqF,QAAQ,GAAG,IAAI3W,QAAJ,CAAarI,KAAb,CAAf;AAEA,QAAIif,YAAY,GAAGD,QAAQ,CAACzR,MAAT,EAAnB;;AAEA,QAAIpN,MAAM,CAAC0Z,KAAX,EAAkB;AACjB,WAAK,IAAIlZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGse,YAAY,CAACle,IAAb,CAAkBme,MAAtC,EAA8Cve,CAAC,EAA/C,EAAmD;AAClD,aAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGye,YAAY,CAACle,IAAb,CAAkBoe,KAAtC,EAA6C3e,CAAC,EAA9C,EAAkD;AACjD,cAAIqe,KAAK,GAAIre,CAAC,GAAG,CAAJ,GAAQ,CAAT,GAAeG,CAAC,GAAG,CAAJ,GAAQR,MAAM,CAACD,KAAf,GAAuB,CAAlD;AACAC,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAtB,IAA+BI,YAAY,CAACle,IAAb,CAAkBuO,WAAlB,CAA8B9O,CAA9B,EAAiCG,CAAjC,IAAsC,CAAtC,GAA0C,CAAzE;AACAR,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmCI,YAAY,CAACle,IAAb,CAAkBuO,WAAlB,CAA8B9O,CAA9B,EAAiCG,CAAjC,IAAsC,CAAtC,GAA0C,CAA7E;AACAR,UAAAA,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmCI,YAAY,CAACle,IAAb,CAAkBuO,WAAlB,CAA8B9O,CAA9B,EAAiCG,CAAjC,IAAsC,GAAtC,GAA4C,CAA/E;AACA;AACD;;AACD4d,MAAAA,GAAG,CAACQ,YAAJ,CAAiB5e,MAAM,CAACwZ,SAAxB,EAAmC,CAAnC,EAAsC,CAAtC;AACA;;AAGD,QAAIJ,MAAM,GAAGd,OAAO,CAACzF,MAAR,CAAeiM,YAAY,CAACle,IAA5B,CAAb;AACA,QAAI+d,IAAI,GAAGvF,MAAM,CAAC6F,QAAlB;AACA,QAAIC,GAAG,GAAG,EAAV;;AACA,SAAK,IAAI/b,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwb,IAAI,CAACve,MAAzB,EAAiC+C,CAAC,EAAlC,EAAsC;AACrC,WAAK,IAAIiN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuO,IAAI,CAACxb,CAAD,CAAJ,CAAQ/C,MAA5B,EAAoCgQ,CAAC,EAArC;AACC8O,QAAAA,GAAG,IAAIC,MAAM,CAACC,YAAP,CAAoBT,IAAI,CAACxb,CAAD,CAAJ,CAAQiN,CAAR,CAApB,CAAP;AADD;AAEA;;AAED,QAAIiP,GAAG,GAAG,IAAIf,IAAJ,GAAWC,OAAX,EAAV;AACA,QAAIe,IAAI,GAAGD,GAAG,GAAGhB,KAAjB;AACA9C,IAAAA,OAAO,CAACpH,GAAR,CAAYmL,IAAZ;AAEA,WAAOtf,MAAM,CAACme,WAAP,CAAmBe,GAAnB,CAAP,CAlD+B,CAmD/B;AACA,GApDD;;AAsDAlf,EAAAA,MAAM,CAACuf,QAAP,GAAkB,UAAUlf,CAAV,EAAaG,CAAb,EAAgB;AACjC,QAAIR,MAAM,CAACD,KAAP,GAAeM,CAAnB,EAAsB;AACrB,YAAM,aAAN;AACA;;AACD,QAAIL,MAAM,CAACC,MAAP,GAAgBO,CAApB,EAAuB;AACtB,YAAM,aAAN;AACA;;AACD,QAAIke,KAAK,GAAIre,CAAC,GAAG,CAAL,GAAWG,CAAC,GAAGR,MAAM,CAACD,KAAX,GAAmB,CAA1C;AACA,QAAIyf,CAAC,GAAG,CAACxf,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAtB,IAA+B,EAA/B,GAAoC1e,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmC,EAAvE,GAA4E1e,MAAM,CAACwZ,SAAP,CAAiBmF,IAAjB,CAAsBD,KAAK,GAAG,CAA9B,IAAmC,EAAhH,IAAsH,GAA9H;AACA,WAAOc,CAAP;AACA,GAVD;;AAYAxf,EAAAA,MAAM,CAACyf,QAAP,GAAkB,UAAUC,EAAV,EAAc;AAC/B,QAAIzB,GAAG,GAAG,IAAInd,KAAJ,CAAUd,MAAM,CAACD,KAAP,GAAeC,MAAM,CAACC,MAAhC,CAAV;;AACA,SAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,MAAM,CAACC,MAA3B,EAAmCO,CAAC,EAApC,EAAwC;AACvC,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACD,KAA3B,EAAkCM,CAAC,EAAnC,EAAuC;AACtC,YAAIsf,IAAI,GAAG3f,MAAM,CAACuf,QAAP,CAAgBlf,CAAhB,EAAmBG,CAAnB,CAAX;AAEAyd,QAAAA,GAAG,CAAC5d,CAAC,GAAGG,CAAC,GAAGR,MAAM,CAACD,KAAhB,CAAH,GAA4B4f,IAAI,IAAID,EAAR,GAAa,IAAb,GAAoB,KAAhD;AACA;AACD;;AACD,WAAOzB,GAAP;AACA,GAVD;;AAYAje,EAAAA,MAAM,CAAC4f,0BAAP,GAAoC,UAAU/f,KAAV,EAAiB;AACpD,QAAIggB,WAAW,GAAG,CAAlB,CADoD,CAEpD;;AACA,QAAIC,SAAS,GAAGxf,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACD,KAAP,GAAe8f,WAA1B,CAAhB;AACA,QAAIE,UAAU,GAAGzf,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACC,MAAP,GAAgB4f,WAA3B,CAAjB;AACA,QAAIG,MAAM,GAAG,IAAIlf,KAAJ,CAAU+e,WAAV,CAAb;;AACA,SAAK,IAAI1c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0c,WAApB,EAAiC1c,CAAC,EAAlC,EAAsC;AACrC6c,MAAAA,MAAM,CAAC7c,CAAD,CAAN,GAAY,IAAIrC,KAAJ,CAAU+e,WAAV,CAAZ;;AACA,WAAK,IAAII,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGJ,WAAtB,EAAmCI,EAAE,EAArC,EAAyC;AACxCD,QAAAA,MAAM,CAAC7c,CAAD,CAAN,CAAU8c,EAAV,IAAgB,IAAInf,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAhB;AACA;AACD;;AACD,SAAK,IAAIof,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGL,WAAtB,EAAmCK,EAAE,EAArC,EAAyC;AACxC,WAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGN,WAAtB,EAAmCM,EAAE,EAArC,EAAyC;AACxCH,QAAAA,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,IAAoB,IAApB;;AACA,aAAK,IAAIrX,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGkX,UAAtB,EAAkClX,EAAE,EAApC,EAAwC;AACvC,eAAK,IAAID,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGkX,SAAtB,EAAiClX,EAAE,EAAnC,EAAuC;AACtC,gBAAIwX,MAAM,GAAGvgB,KAAK,CAACigB,SAAS,GAAGK,EAAZ,GAAiBvX,EAAjB,GAAsB,CAACmX,UAAU,GAAGG,EAAb,GAAkBrX,EAAnB,IAAyB7I,MAAM,CAACD,KAAvD,CAAlB;AACA,gBAAIqgB,MAAM,GAAGJ,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,CAAb,EACCF,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,IAAoBE,MAApB;AACD,gBAAIA,MAAM,GAAGJ,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,CAAb,EACCF,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,IAAoBE,MAApB;AACD;AACD,SAVuC,CAWxC;;AACA;AACD;;AACD,QAAIC,MAAM,GAAG,IAAIvf,KAAJ,CAAU+e,WAAV,CAAb;;AACA,SAAK,IAAIS,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGT,WAAtB,EAAmCS,EAAE,EAArC,EAAyC;AACxCD,MAAAA,MAAM,CAACC,EAAD,CAAN,GAAa,IAAIxf,KAAJ,CAAU+e,WAAV,CAAb;AACA;;AACD,SAAK,IAAIK,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGL,WAAtB,EAAmCK,EAAE,EAArC,EAAyC;AACxC,WAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGN,WAAtB,EAAmCM,EAAE,EAArC,EAAyC;AACxCE,QAAAA,MAAM,CAACF,EAAD,CAAN,CAAWD,EAAX,IAAiB5f,IAAI,CAACC,KAAL,CAAW,CAACyf,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,IAAoBF,MAAM,CAACG,EAAD,CAAN,CAAWD,EAAX,EAAe,CAAf,CAArB,IAA0C,CAArD,CAAjB,CADwC,CAExC;AACA,OAJuC,CAKxC;;AACA,KArCmD,CAsCpD;;;AAEA,WAAOG,MAAP;AACA,GAzCD;;AA2CArgB,EAAAA,MAAM,CAACwe,iBAAP,GAA2B,UAAU+B,SAAV,EAAqB;AAC/C,QAAIF,MAAM,GAAGrgB,MAAM,CAAC4f,0BAAP,CAAkCW,SAAlC,CAAb;AACA,QAAIC,WAAW,GAAGH,MAAM,CAACjgB,MAAzB;AACA,QAAI0f,SAAS,GAAGxf,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACD,KAAP,GAAeygB,WAA1B,CAAhB;AACA,QAAIT,UAAU,GAAGzf,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACC,MAAP,GAAgBugB,WAA3B,CAAjB;AAEA,QAAIC,IAAI,GAAG,IAAIC,WAAJ,CAAgB1gB,MAAM,CAACD,KAAP,GAAeC,MAAM,CAACC,MAAtC,CAAX;AACA,QAAI0gB,MAAM,GAAG,IAAIC,UAAJ,CAAeH,IAAf,CAAb,CAP+C,CAS/C;;AAEA,SAAK,IAAIP,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGM,WAAtB,EAAmCN,EAAE,EAArC,EAAyC;AACxC,WAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGK,WAAtB,EAAmCL,EAAE,EAArC,EAAyC;AACxC,aAAK,IAAItX,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGkX,UAAtB,EAAkClX,EAAE,EAApC,EAAwC;AACvC,eAAK,IAAID,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGkX,SAAtB,EAAiClX,EAAE,EAAnC,EAAuC;AACtC+X,YAAAA,MAAM,CAACb,SAAS,GAAGK,EAAZ,GAAiBvX,EAAjB,GAAsB,CAACmX,UAAU,GAAGG,EAAb,GAAkBrX,EAAnB,IAAyB7I,MAAM,CAACD,KAAvD,CAAN,GAAuEwgB,SAAS,CAACT,SAAS,GAAGK,EAAZ,GAAiBvX,EAAjB,GAAsB,CAACmX,UAAU,GAAGG,EAAb,GAAkBrX,EAAnB,IAAyB7I,MAAM,CAACD,KAAvD,CAAT,GAAyEsgB,MAAM,CAACF,EAAD,CAAN,CAAWD,EAAX,CAA1E,GAA4F,IAA5F,GAAmG,KAAzK;AACA;AACD;AACD;AACD;;AACD,WAAOS,MAAP;AACA,GArBD;;AAuBA3gB,EAAAA,MAAM,CAACye,SAAP,GAAmB,YAAY;AAC9B,QAAIgC,IAAI,GAAG,IAAIC,WAAJ,CAAgB1gB,MAAM,CAACD,KAAP,GAAeC,MAAM,CAACC,MAAtC,CAAX;AACA,QAAIge,GAAG,GAAG,IAAI2C,UAAJ,CAAeH,IAAf,CAAV,CAF8B,CAG9B;;AAEA,SAAK,IAAIjgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,MAAM,CAACC,MAA3B,EAAmCO,CAAC,EAApC,EAAwC;AACvC,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACD,KAA3B,EAAkCM,CAAC,EAAnC,EAAuC;AACtC,YAAIsf,IAAI,GAAG3f,MAAM,CAACuf,QAAP,CAAgBlf,CAAhB,EAAmBG,CAAnB,CAAX;AAEAyd,QAAAA,GAAG,CAAC5d,CAAC,GAAGG,CAAC,GAAGR,MAAM,CAACD,KAAhB,CAAH,GAA4B4f,IAA5B;AACA;AACD;;AACD,WAAO1B,GAAP;AACA,GAbD;;AAkBA,WAAS7P,OAAT,CAAiByS,MAAjB,EAAyBjgB,IAAzB,EAA+B;AAC9B,QAAIigB,MAAM,IAAI,CAAd,EACC,OAAOA,MAAM,IAAIjgB,IAAjB,CADD,KAGC,OAAO,CAACigB,MAAM,IAAIjgB,IAAX,KAAoB,KAAK,CAACA,IAA1B,CAAP;AACD;;AAGD,MAAIkgB,QAAQ,GAAG,CAAf;AACA,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAIC,kBAAkB,GAAG,CAAzB;AACA,MAAIC,aAAa,GAAG,CAApB;;AAEAjhB,EAAAA,MAAM,CAACkhB,iBAAP,GAA2B,UAAUC,QAAV,EAAoB;AAE9C,aAASzW,QAAT,CAAkBC,QAAlB,EAA4BC,QAA5B,EAAsC;AACrC,UAAIC,KAAK,GAAGF,QAAQ,CAACT,CAAT,GAAaU,QAAQ,CAACV,CAAlC;AACA,UAAIY,KAAK,GAAGH,QAAQ,CAACR,CAAT,GAAaS,QAAQ,CAACT,CAAlC;AACA,aAAO7J,IAAI,CAACgJ,IAAL,CAAWuB,KAAK,GAAGA,KAAR,GAAgBC,KAAK,GAAGA,KAAnC,CAAP;AACA,KAN6C,CAQ9C;;;AACA,aAASsW,aAAT,CAAuBC,MAAvB,EAA+BC,MAA/B,EAAuCC,MAAvC,EAA+C;AAC9C,UAAIC,EAAE,GAAGF,MAAM,CAACjhB,CAAhB;AACA,UAAIohB,EAAE,GAAGH,MAAM,CAAC9gB,CAAhB;AACA,aAAQ,CAAC+gB,MAAM,CAAClhB,CAAP,GAAWmhB,EAAZ,KAAmBH,MAAM,CAAC7gB,CAAP,GAAWihB,EAA9B,CAAD,GAAuC,CAACF,MAAM,CAAC/gB,CAAP,GAAWihB,EAAZ,KAAmBJ,MAAM,CAAChhB,CAAP,GAAWmhB,EAA9B,CAA9C;AACA,KAb6C,CAgB9C;;;AACA,QAAIE,eAAe,GAAGhX,QAAQ,CAACyW,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAA9B;AACA,QAAIQ,cAAc,GAAGjX,QAAQ,CAACyW,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAA7B;AACA,QAAIS,eAAe,GAAGlX,QAAQ,CAACyW,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAA9B;AAEA,QAAIE,MAAJ,EAAYC,MAAZ,EAAoBC,MAApB,CArB8C,CAsB9C;;AACA,QAAII,cAAc,IAAID,eAAlB,IAAqCC,cAAc,IAAIC,eAA3D,EAA4E;AAC3EN,MAAAA,MAAM,GAAGH,QAAQ,CAAC,CAAD,CAAjB;AACAE,MAAAA,MAAM,GAAGF,QAAQ,CAAC,CAAD,CAAjB;AACAI,MAAAA,MAAM,GAAGJ,QAAQ,CAAC,CAAD,CAAjB;AACA,KAJD,MAKK,IAAIS,eAAe,IAAID,cAAnB,IAAqCC,eAAe,IAAIF,eAA5D,EAA6E;AACjFJ,MAAAA,MAAM,GAAGH,QAAQ,CAAC,CAAD,CAAjB;AACAE,MAAAA,MAAM,GAAGF,QAAQ,CAAC,CAAD,CAAjB;AACAI,MAAAA,MAAM,GAAGJ,QAAQ,CAAC,CAAD,CAAjB;AACA,KAJI,MAKA;AACJG,MAAAA,MAAM,GAAGH,QAAQ,CAAC,CAAD,CAAjB;AACAE,MAAAA,MAAM,GAAGF,QAAQ,CAAC,CAAD,CAAjB;AACAI,MAAAA,MAAM,GAAGJ,QAAQ,CAAC,CAAD,CAAjB;AACA,KArC6C,CAuC9C;AACA;AACA;AACA;;;AACA,QAAIC,aAAa,CAACC,MAAD,EAASC,MAAT,EAAiBC,MAAjB,CAAb,GAAwC,GAA5C,EAAiD;AAChD,UAAI5Y,IAAI,GAAG0Y,MAAX;AACAA,MAAAA,MAAM,GAAGE,MAAT;AACAA,MAAAA,MAAM,GAAG5Y,IAAT;AACA;;AAEDwY,IAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcE,MAAd;AACAF,IAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcG,MAAd;AACAH,IAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcI,MAAd;AACA,GApDD;;AAuDA,WAASM,aAAT,CAAuBC,IAAvB,EAA6BC,IAA7B,EAAmCC,mBAAnC,EAAwD;AACvD,SAAK3hB,CAAL,GAASyhB,IAAT;AACA,SAAKthB,CAAL,GAASuhB,IAAT;AACA,SAAKtf,KAAL,GAAa,CAAb;AACA,SAAKuf,mBAAL,GAA2BA,mBAA3B;;AAEA,SAAKrf,gBAAL,CAAsB,qBAAtB,EAA6C,YAAY;AACxD,aAAO,KAAKqf,mBAAZ;AACA,KAFD;;AAGA,SAAKrf,gBAAL,CAAsB,OAAtB,EAA+B,YAAY;AAC1C,aAAO,KAAKF,KAAZ;AACA,KAFD;;AAGA,SAAKE,gBAAL,CAAsB,GAAtB,EAA2B,YAAY;AACtC,aAAO,KAAKtC,CAAZ;AACA,KAFD;;AAGA,SAAKsC,gBAAL,CAAsB,GAAtB,EAA2B,YAAY;AACtC,aAAO,KAAKnC,CAAZ;AACA,KAFD;;AAGA,SAAKyhB,cAAL,GAAsB,YAAY;AACjC,WAAKxf,KAAL;AACA,KAFD;;AAGA,SAAKyf,WAAL,GAAmB,UAAUlX,UAAV,EAAsB7H,CAAtB,EAAyBiN,CAAzB,EAA4B;AAC9C,UAAI9P,IAAI,CAACoI,GAAL,CAASvF,CAAC,GAAG,KAAK3C,CAAlB,KAAwBwK,UAAxB,IAAsC1K,IAAI,CAACoI,GAAL,CAAS0H,CAAC,GAAG,KAAK/P,CAAlB,KAAwB2K,UAAlE,EAA8E;AAC7E,YAAImX,cAAc,GAAG7hB,IAAI,CAACoI,GAAL,CAASsC,UAAU,GAAG,KAAKgX,mBAA3B,CAArB;AACA,eAAOG,cAAc,IAAI,GAAlB,IAAyBA,cAAc,GAAG,KAAKH,mBAAtB,IAA6C,GAA7E;AACA;;AACD,aAAO,KAAP;AACA,KAND;AAQA;;AAED,WAASI,iBAAT,CAA2BC,cAA3B,EAA2C;AAC1C,SAAK5X,UAAL,GAAkB4X,cAAc,CAAC,CAAD,CAAhC;AACA,SAAK9X,OAAL,GAAe8X,cAAc,CAAC,CAAD,CAA7B;AACA,SAAK7X,QAAL,GAAgB6X,cAAc,CAAC,CAAD,CAA9B;;AACA,SAAK1f,gBAAL,CAAsB,YAAtB,EAAoC,YAAY;AAC/C,aAAO,KAAK8H,UAAZ;AACA,KAFD;;AAGA,SAAK9H,gBAAL,CAAsB,SAAtB,EAAiC,YAAY;AAC5C,aAAO,KAAK4H,OAAZ;AACA,KAFD;;AAGA,SAAK5H,gBAAL,CAAsB,UAAtB,EAAkC,YAAY;AAC7C,aAAO,KAAK6H,QAAZ;AACA,KAFD;AAGA;;AAED,WAAS6C,mBAAT,GAA+B;AAC9B,SAAKxN,KAAL,GAAa,IAAb;AACA,SAAKyiB,eAAL,GAAuB,EAAvB;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,oBAAL,GAA4B,IAAI1hB,KAAJ,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA5B;AACA,SAAKqH,mBAAL,GAA2B,IAA3B;;AAEA,SAAKxF,gBAAL,CAAsB,sBAAtB,EAA8C,YAAY;AACzD,WAAK6f,oBAAL,CAA0B,CAA1B,IAA+B,CAA/B;AACA,WAAKA,oBAAL,CAA0B,CAA1B,IAA+B,CAA/B;AACA,WAAKA,oBAAL,CAA0B,CAA1B,IAA+B,CAA/B;AACA,WAAKA,oBAAL,CAA0B,CAA1B,IAA+B,CAA/B;AACA,WAAKA,oBAAL,CAA0B,CAA1B,IAA+B,CAA/B;AACA,aAAO,KAAKA,oBAAZ;AACA,KAPD;;AASA,SAAKC,iBAAL,GAAyB,UAAUC,UAAV,EAAsB;AAC9C,UAAIC,eAAe,GAAG,CAAtB;;AACA,WAAK,IAAIxf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3B,YAAIV,KAAK,GAAGigB,UAAU,CAACvf,CAAD,CAAtB;;AACA,YAAIV,KAAK,IAAI,CAAb,EAAgB;AACf,iBAAO,KAAP;AACA;;AACDkgB,QAAAA,eAAe,IAAIlgB,KAAnB;AACA;;AACD,UAAIkgB,eAAe,GAAG,CAAtB,EAAyB;AACxB,eAAO,KAAP;AACA;;AACD,UAAI3X,UAAU,GAAG1K,IAAI,CAACC,KAAL,CAAW,CAACoiB,eAAe,IAAI3B,kBAApB,IAA0C,CAArD,CAAjB;AACA,UAAI4B,WAAW,GAAGtiB,IAAI,CAACC,KAAL,CAAWyK,UAAU,GAAG,CAAxB,CAAlB,CAb8C,CAc9C;;AACA,aAAO1K,IAAI,CAACoI,GAAL,CAASsC,UAAU,IAAI0X,UAAU,CAAC,CAAD,CAAV,IAAiB1B,kBAArB,CAAnB,IAA+D4B,WAA/D,IAA8EtiB,IAAI,CAACoI,GAAL,CAASsC,UAAU,IAAI0X,UAAU,CAAC,CAAD,CAAV,IAAiB1B,kBAArB,CAAnB,IAA+D4B,WAA7I,IAA4JtiB,IAAI,CAACoI,GAAL,CAAS,IAAIsC,UAAJ,IAAkB0X,UAAU,CAAC,CAAD,CAAV,IAAiB1B,kBAAnC,CAAT,IAAmE,IAAI4B,WAAnO,IAAkPtiB,IAAI,CAACoI,GAAL,CAASsC,UAAU,IAAI0X,UAAU,CAAC,CAAD,CAAV,IAAiB1B,kBAArB,CAAnB,IAA+D4B,WAAjT,IAAgUtiB,IAAI,CAACoI,GAAL,CAASsC,UAAU,IAAI0X,UAAU,CAAC,CAAD,CAAV,IAAiB1B,kBAArB,CAAnB,IAA+D4B,WAAtY;AACA,KAhBD;;AAiBA,SAAKC,aAAL,GAAqB,UAAUH,UAAV,EAAsBrD,GAAtB,EAA2B;AAC/C,aAAQA,GAAG,GAAGqD,UAAU,CAAC,CAAD,CAAhB,GAAsBA,UAAU,CAAC,CAAD,CAAjC,GAAwCA,UAAU,CAAC,CAAD,CAAV,GAAgB,GAA/D;AACA,KAFD;;AAGA,SAAKI,kBAAL,GAA0B,UAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,QAA3B,EAAqCC,uBAArC,EAA8D;AACvF,UAAIrjB,KAAK,GAAG,KAAKA,KAAjB;AAEA,UAAIsjB,IAAI,GAAGnjB,MAAM,CAACC,MAAlB;AACA,UAAIyiB,UAAU,GAAG,KAAKU,oBAAtB,CAJuF,CAMvF;;AACA,UAAIjgB,CAAC,GAAG4f,MAAR;;AACA,aAAO5f,CAAC,IAAI,CAAL,IAAUtD,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAtB,EAAoD;AACnD2iB,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,GAAG,CAAR,EAAW;AACV,eAAOkgB,GAAP;AACA;;AACD,aAAOlgB,CAAC,IAAI,CAAL,IAAU,CAACtD,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAhB,IAAgD2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAxE,EAAkF;AACjFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD,OAlBsF,CAmBvF;;;AACA,UAAIA,CAAC,GAAG,CAAJ,IAASuf,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAA7B,EAAuC;AACtC,eAAOI,GAAP;AACA;;AACD,aAAOlgB,CAAC,IAAI,CAAL,IAAUtD,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAf,IAA+C2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAvE,EAAiF;AAChFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIuf,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAApB,EAA8B;AAC7B,eAAOI,GAAP;AACA,OA7BsF,CA+BvF;;;AACAlgB,MAAAA,CAAC,GAAG4f,MAAM,GAAG,CAAb;;AACA,aAAO5f,CAAC,GAAGggB,IAAJ,IAAYtjB,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAxB,EAAsD;AACrD2iB,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,IAAIggB,IAAT,EAAe;AACd,eAAOE,GAAP;AACA;;AACD,aAAOlgB,CAAC,GAAGggB,IAAJ,IAAY,CAACtjB,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAlB,IAAkD2iB,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAAzE,EAAmF;AAClFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,IAAIggB,IAAL,IAAaT,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAlC,EAA4C;AAC3C,eAAOI,GAAP;AACA;;AACD,aAAOlgB,CAAC,GAAGggB,IAAJ,IAAYtjB,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAjB,IAAiD2iB,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAAxE,EAAkF;AACjFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIuf,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAArB,EAA+B;AAC9B,eAAOI,GAAP;AACA,OArDsF,CAuDvF;AACA;;;AACA,UAAIC,eAAe,GAAGZ,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAA1C,GAAgDA,UAAU,CAAC,CAAD,CAA1D,GAAgEA,UAAU,CAAC,CAAD,CAAhG;;AACA,UAAI,IAAIpiB,IAAI,CAACoI,GAAL,CAAS4a,eAAe,GAAGJ,uBAA3B,CAAJ,IAA2D,IAAIA,uBAAnE,EAA4F;AAC3F,eAAOG,GAAP;AACA;;AAED,aAAO,KAAKZ,iBAAL,CAAuBC,UAAvB,IAAqC,KAAKG,aAAL,CAAmBH,UAAnB,EAA+Bvf,CAA/B,CAArC,GAAyEkgB,GAAhF;AACA,KA/DD;;AAgEA,SAAKE,oBAAL,GAA4B,UAAUC,MAAV,EAAkBC,OAAlB,EAA2BR,QAA3B,EAAqCC,uBAArC,EAA8D;AACzF,UAAIrjB,KAAK,GAAG,KAAKA,KAAjB;AAEA,UAAI6jB,IAAI,GAAG1jB,MAAM,CAACD,KAAlB;AACA,UAAI2iB,UAAU,GAAG,KAAKU,oBAAtB;AAEA,UAAIhT,CAAC,GAAGoT,MAAR;;AACA,aAAOpT,CAAC,IAAI,CAAL,IAAUvQ,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAtB,EAAoD;AACnD2iB,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,GAAG,CAAR,EAAW;AACV,eAAOiT,GAAP;AACA;;AACD,aAAOjT,CAAC,IAAI,CAAL,IAAU,CAACvQ,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAhB,IAAgD2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAxE,EAAkF;AACjFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,GAAG,CAAJ,IAASsS,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAA7B,EAAuC;AACtC,eAAOI,GAAP;AACA;;AACD,aAAOjT,CAAC,IAAI,CAAL,IAAUvQ,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAf,IAA+C2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAvE,EAAiF;AAChFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIsS,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAApB,EAA8B;AAC7B,eAAOI,GAAP;AACA;;AAEDjT,MAAAA,CAAC,GAAGoT,MAAM,GAAG,CAAb;;AACA,aAAOpT,CAAC,GAAGsT,IAAJ,IAAY7jB,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAxB,EAAsD;AACrD2iB,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,IAAIsT,IAAT,EAAe;AACd,eAAOL,GAAP;AACA;;AACD,aAAOjT,CAAC,GAAGsT,IAAJ,IAAY,CAAC7jB,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAlB,IAAkD2iB,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAAzE,EAAmF;AAClFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,IAAIsT,IAAL,IAAahB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAlC,EAA4C;AAC3C,eAAOI,GAAP;AACA;;AACD,aAAOjT,CAAC,GAAGsT,IAAJ,IAAY7jB,KAAK,CAACuQ,CAAC,GAAGqT,OAAO,GAAGzjB,MAAM,CAACD,KAAtB,CAAjB,IAAiD2iB,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAAxE,EAAkF;AACjFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAtS,QAAAA,CAAC;AACD;;AACD,UAAIsS,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAArB,EAA+B;AAC9B,eAAOI,GAAP;AACA,OAlDwF,CAoDzF;AACA;;;AACA,UAAIC,eAAe,GAAGZ,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAA1C,GAAgDA,UAAU,CAAC,CAAD,CAA1D,GAAgEA,UAAU,CAAC,CAAD,CAAhG;;AACA,UAAI,IAAIpiB,IAAI,CAACoI,GAAL,CAAS4a,eAAe,GAAGJ,uBAA3B,CAAJ,IAA2DA,uBAA/D,EAAwF;AACvF,eAAOG,GAAP;AACA;;AAED,aAAO,KAAKZ,iBAAL,CAAuBC,UAAvB,IAAqC,KAAKG,aAAL,CAAmBH,UAAnB,EAA+BtS,CAA/B,CAArC,GAAyEiT,GAAhF;AACA,KA5DD;;AA6DA,SAAKM,oBAAL,GAA4B,UAAUjB,UAAV,EAAsBvf,CAAtB,EAAyBiN,CAAzB,EAA4B;AACvD,UAAIkT,eAAe,GAAGZ,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAA1C,GAAgDA,UAAU,CAAC,CAAD,CAA1D,GAAgEA,UAAU,CAAC,CAAD,CAAhG;AACA,UAAIM,OAAO,GAAG,KAAKH,aAAL,CAAmBH,UAAnB,EAA+BtS,CAA/B,CAAd,CAFuD,CAEN;;AACjD,UAAIqT,OAAO,GAAG,KAAKX,kBAAL,CAAwB3f,CAAxB,EAA2B7C,IAAI,CAACC,KAAL,CAAWyiB,OAAX,CAA3B,EAAgDN,UAAU,CAAC,CAAD,CAA1D,EAA+DY,eAA/D,CAAd,CAHuD,CAGwC;;AAC/F,UAAI,CAACjZ,KAAK,CAACoZ,OAAD,CAAV,EAAqB;AACpB;AACAT,QAAAA,OAAO,GAAG,KAAKO,oBAAL,CAA0BjjB,IAAI,CAACC,KAAL,CAAWyiB,OAAX,CAA1B,EAA+C1iB,IAAI,CAACC,KAAL,CAAWkjB,OAAX,CAA/C,EAAoEf,UAAU,CAAC,CAAD,CAA9E,EAAmFY,eAAnF,CAAV;;AACA,YAAI,CAACjZ,KAAK,CAAC2Y,OAAD,CAAV,EAAqB;AACpB,cAAIhB,mBAAmB,GAAGsB,eAAe,GAAG,GAA5C;AACA,cAAIM,KAAK,GAAG,KAAZ;AACA,cAAI7iB,GAAG,GAAG,KAAKuhB,eAAL,CAAqBliB,MAA/B;;AACA,eAAK,IAAIyjB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG9iB,GAA5B,EAAiC8iB,KAAK,EAAtC,EAA0C;AACzC,gBAAIC,MAAM,GAAG,KAAKxB,eAAL,CAAqBuB,KAArB,CAAb,CADyC,CAEzC;;AACA,gBAAIC,MAAM,CAAC5B,WAAP,CAAmBF,mBAAnB,EAAwCyB,OAAxC,EAAiDT,OAAjD,CAAJ,EAA+D;AAC9Dc,cAAAA,MAAM,CAAC7B,cAAP;AACA2B,cAAAA,KAAK,GAAG,IAAR;AACA;AACA;AACD;;AACD,cAAI,CAACA,KAAL,EAAY;AACX,gBAAIlF,KAAK,GAAG,IAAImD,aAAJ,CAAkBmB,OAAlB,EAA2BS,OAA3B,EAAoCzB,mBAApC,CAAZ;AACA,iBAAKM,eAAL,CAAqByB,IAArB,CAA0BrF,KAA1B;;AACA,gBAAI,KAAKvW,mBAAL,IAA4B,IAAhC,EAAsC;AACrC,mBAAKA,mBAAL,CAAyB6b,wBAAzB,CAAkDtF,KAAlD;AACA;AACD;;AACD,iBAAO,IAAP;AACA;AACD;;AACD,aAAO,KAAP;AACA,KA/BD;;AAiCA,SAAKuF,kBAAL,GAA0B,YAAY;AAErC,UAAIC,SAAS,GAAG,KAAK5B,eAAL,CAAqBliB,MAArC;;AACA,UAAI8jB,SAAS,GAAG,CAAhB,EAAmB;AAClB;AACA,cAAM,iDAAiDA,SAAjD,GAA6D,GAAnE;AACA,OANoC,CAQrC;;;AACA,UAAIA,SAAS,GAAG,CAAhB,EAAmB;AAClB;AACA,YAAIvB,eAAe,GAAG,GAAtB;AACA,YAAIwB,MAAM,GAAG,GAAb;;AACA,aAAK,IAAIhhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+gB,SAApB,EAA+B/gB,CAAC,EAAhC,EAAoC;AACnC;AACA,cAAIihB,WAAW,GAAG,KAAK9B,eAAL,CAAqBnf,CAArB,EAAwBkhB,mBAA1C;AACA1B,UAAAA,eAAe,IAAIyB,WAAnB;AACAD,UAAAA,MAAM,IAAKC,WAAW,GAAGA,WAAzB;AACA;;AACD,YAAIE,OAAO,GAAG3B,eAAe,GAAGuB,SAAhC;AACA,aAAK5B,eAAL,CAAqBiC,IAArB,CAA0B,UAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACrD,cAAIC,EAAE,GAAGpkB,IAAI,CAACoI,GAAL,CAAS+b,OAAO,CAACJ,mBAAR,GAA8BC,OAAvC,CAAT;AACA,cAAIK,EAAE,GAAGrkB,IAAI,CAACoI,GAAL,CAAS8b,OAAO,CAACH,mBAAR,GAA8BC,OAAvC,CAAT;;AACA,cAAII,EAAE,GAAGC,EAAT,EAAa;AACZ,mBAAQ,CAAC,CAAT;AACA,WAFD,MAEO,IAAID,EAAE,IAAIC,EAAV,EAAc;AACpB,mBAAO,CAAP;AACA,WAFM,MAEA;AACN,mBAAO,CAAP;AACA;AACD,SAVD;AAYA,YAAIC,MAAM,GAAGtkB,IAAI,CAACgJ,IAAL,CAAU6a,MAAM,GAAGD,SAAT,GAAqBI,OAAO,GAAGA,OAAzC,CAAb;AACA,YAAIO,KAAK,GAAGvkB,IAAI,CAACS,GAAL,CAAS,MAAMujB,OAAf,EAAwBM,MAAxB,CAAZ,CAxBkB,CAyBlB;;AACA,aAAK,IAAIzhB,CAAC,GAAG,KAAKmf,eAAL,CAAqBliB,MAArB,GAA8B,CAA3C,EAA8C+C,CAAC,IAAI,CAAnD,EAAsDA,CAAC,EAAvD,EAA2D;AAC1D,cAAI4G,OAAO,GAAG,KAAKuY,eAAL,CAAqBnf,CAArB,CAAd,CAD0D,CAE1D;;AACA,cAAI7C,IAAI,CAACoI,GAAL,CAASqB,OAAO,CAACsa,mBAAR,GAA8BC,OAAvC,IAAkDO,KAAtD,EAA6D;AAC5D;AACA,iBAAKvC,eAAL,CAAqBwC,MAArB,CAA4B3hB,CAA5B,EAA+B,CAA/B,EAF4D,CAG5D;AACA;AACD;AACD;;AAED,UAAI,KAAKmf,eAAL,CAAqBliB,MAArB,GAA8B,CAAlC,EAAqC;AACpC;AACA,aAAKkiB,eAAL,CAAqBiC,IAArB,CAA0B,UAAUrW,CAAV,EAAaC,CAAb,EAAgB;AACzC,cAAID,CAAC,CAACzL,KAAF,GAAU0L,CAAC,CAAC1L,KAAhB,EAAuB;AAAE,mBAAO,CAAC,CAAR;AAAY;;AACrC,cAAIyL,CAAC,CAACzL,KAAF,GAAU0L,CAAC,CAAC1L,KAAhB,EAAuB;AAAE,mBAAO,CAAP;AAAW;;AACpC,iBAAO,CAAP;AACA,SAJD;AAKA;;AAED,aAAO,IAAI3B,KAAJ,CAAU,KAAKwhB,eAAL,CAAqB,CAArB,CAAV,EAAmC,KAAKA,eAAL,CAAqB,CAArB,CAAnC,EAA4D,KAAKA,eAAL,CAAqB,CAArB,CAA5D,CAAP;AACA,KAxDD;;AA0DA,SAAKyC,WAAL,GAAmB,YAAY;AAC9B,UAAIhkB,GAAG,GAAG,KAAKuhB,eAAL,CAAqBliB,MAA/B;;AACA,UAAIW,GAAG,IAAI,CAAX,EAAc;AACb,eAAO,CAAP;AACA;;AACD,UAAIikB,oBAAoB,GAAG,IAA3B;;AACA,WAAK,IAAI7hB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,GAApB,EAAyBoC,CAAC,EAA1B,EAA8B;AAC7B,YAAI2gB,MAAM,GAAG,KAAKxB,eAAL,CAAqBnf,CAArB,CAAb;;AACA,YAAI2gB,MAAM,CAAChgB,KAAP,IAAgBmd,aAApB,EAAmC;AAClC,cAAI+D,oBAAoB,IAAI,IAA5B,EAAkC;AACjCA,YAAAA,oBAAoB,GAAGlB,MAAvB;AACA,WAFD,MAGK;AACJ;AACA;AACA;AACA;AACA;AACA,iBAAKvB,UAAL,GAAkB,IAAlB;AACA,mBAAOjiB,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAACoI,GAAL,CAASsc,oBAAoB,CAAC9a,CAArB,GAAyB4Z,MAAM,CAAC5Z,CAAzC,IAA8C5J,IAAI,CAACoI,GAAL,CAASsc,oBAAoB,CAAC7a,CAArB,GAAyB2Z,MAAM,CAAC3Z,CAAzC,CAA/C,IAA8F,CAAzG,CAAP;AACA;AACD;AACD;;AACD,aAAO,CAAP;AACA,KAxBD;;AA0BA,SAAK8a,4BAAL,GAAoC,YAAY;AAC/C,UAAIC,cAAc,GAAG,CAArB;AACA,UAAIvC,eAAe,GAAG,GAAtB;AACA,UAAI5hB,GAAG,GAAG,KAAKuhB,eAAL,CAAqBliB,MAA/B;;AACA,WAAK,IAAI+C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,GAApB,EAAyBoC,CAAC,EAA1B,EAA8B;AAC7B,YAAI4G,OAAO,GAAG,KAAKuY,eAAL,CAAqBnf,CAArB,CAAd;;AACA,YAAI4G,OAAO,CAACjG,KAAR,IAAiBmd,aAArB,EAAoC;AACnCiE,UAAAA,cAAc;AACdvC,UAAAA,eAAe,IAAI5Y,OAAO,CAACsa,mBAA3B;AACA;AACD;;AACD,UAAIa,cAAc,GAAG,CAArB,EAAwB;AACvB,eAAO,KAAP;AACA,OAb8C,CAc/C;AACA;AACA;AACA;;;AACA,UAAIZ,OAAO,GAAG3B,eAAe,GAAG5hB,GAAhC;AACA,UAAIokB,cAAc,GAAG,GAArB;;AACA,WAAK,IAAIhiB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,GAApB,EAAyBoC,CAAC,EAA1B,EAA8B;AAC7B4G,QAAAA,OAAO,GAAG,KAAKuY,eAAL,CAAqBnf,CAArB,CAAV;AACAgiB,QAAAA,cAAc,IAAI7kB,IAAI,CAACoI,GAAL,CAASqB,OAAO,CAACsa,mBAAR,GAA8BC,OAAvC,CAAlB;AACA;;AACD,aAAOa,cAAc,IAAI,OAAOxC,eAAhC;AACA,KAzBD;;AA2BA,SAAKrV,iBAAL,GAAyB,UAAUzN,KAAV,EAAiB;AACzC,UAAIulB,SAAS,GAAG,KAAhB;AACA,WAAKvlB,KAAL,GAAaA,KAAb;AACA,UAAIsjB,IAAI,GAAGnjB,MAAM,CAACC,MAAlB;AACA,UAAIyjB,IAAI,GAAG1jB,MAAM,CAACD,KAAlB;AACA,UAAIslB,KAAK,GAAG/kB,IAAI,CAACC,KAAL,CAAY,IAAI4iB,IAAL,IAAc,IAAIpC,WAAlB,CAAX,CAAZ;;AACA,UAAIsE,KAAK,GAAGvE,QAAR,IAAoBsE,SAAxB,EAAmC;AAClCC,QAAAA,KAAK,GAAGvE,QAAR;AACA;;AAED,UAAIwE,IAAI,GAAG,KAAX;AACA,UAAI5C,UAAU,GAAG,IAAI5hB,KAAJ,CAAU,CAAV,CAAjB;;AACA,WAAK,IAAIqC,CAAC,GAAGkiB,KAAK,GAAG,CAArB,EAAwBliB,CAAC,GAAGggB,IAAJ,IAAY,CAACmC,IAArC,EAA2CniB,CAAC,IAAIkiB,KAAhD,EAAuD;AACtD;AACA3C,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACA,YAAI6C,YAAY,GAAG,CAAnB;;AACA,aAAK,IAAInV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsT,IAApB,EAA0BtT,CAAC,EAA3B,EAA+B;AAC9B,cAAIvQ,KAAK,CAACuQ,CAAC,GAAGjN,CAAC,GAAGnD,MAAM,CAACD,KAAhB,CAAT,EAAiC;AAChC;AACA,gBAAI,CAACwlB,YAAY,GAAG,CAAhB,KAAsB,CAA1B,EAA6B;AAC5B;AACAA,cAAAA,YAAY;AACZ;;AACD7C,YAAAA,UAAU,CAAC6C,YAAD,CAAV;AACA,WAPD,MAQK;AACJ;AACA,gBAAI,CAACA,YAAY,GAAG,CAAhB,KAAsB,CAA1B,EAA6B;AAC5B;AACA,kBAAIA,YAAY,IAAI,CAApB,EAAuB;AACtB;AACA,oBAAI,KAAK9C,iBAAL,CAAuBC,UAAvB,CAAJ,EAAwC;AACvC;AACA,sBAAI8C,SAAS,GAAG,KAAK7B,oBAAL,CAA0BjB,UAA1B,EAAsCvf,CAAtC,EAAyCiN,CAAzC,CAAhB;;AACA,sBAAIoV,SAAJ,EAAe;AACd;AACA;AACAH,oBAAAA,KAAK,GAAG,CAAR;;AACA,wBAAI,KAAK9C,UAAT,EAAqB;AACpB+C,sBAAAA,IAAI,GAAG,KAAKL,4BAAL,EAAP;AACA,qBAFD,MAGK;AACJ,0BAAIQ,OAAO,GAAG,KAAKV,WAAL,EAAd;;AACA,0BAAIU,OAAO,GAAG/C,UAAU,CAAC,CAAD,CAAxB,EAA6B;AAC5B;AACA;AACA;AACA;AAEA;AACA;AACA;AACAvf,wBAAAA,CAAC,IAAIsiB,OAAO,GAAG/C,UAAU,CAAC,CAAD,CAApB,GAA0B2C,KAA/B;AACAjV,wBAAAA,CAAC,GAAGsT,IAAI,GAAG,CAAX;AACA;AACD;AACD,mBAtBD,MAuBK;AACJ;AACA,uBAAG;AACFtT,sBAAAA,CAAC;AACD,qBAFD,QAGOA,CAAC,GAAGsT,IAAJ,IAAY,CAAC7jB,KAAK,CAACuQ,CAAC,GAAGjN,CAAC,GAAGnD,MAAM,CAACD,KAAhB,CAHzB;;AAIAqQ,oBAAAA,CAAC,GANG,CAMC;AACL,mBAjCsC,CAkCvC;;;AACAmV,kBAAAA,YAAY,GAAG,CAAf;AACA7C,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACA,iBAzCD,MA0CK;AACJ;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,kBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACA6C,kBAAAA,YAAY,GAAG,CAAf;AACA;AACD,eArDD,MAsDK;AACJ7C,gBAAAA,UAAU,CAAC,EAAE6C,YAAH,CAAV;AACA;AACD,aA3DD,MA4DK;AACJ;AACA7C,cAAAA,UAAU,CAAC6C,YAAD,CAAV;AACA;AACD;AACD;;AACD,YAAI,KAAK9C,iBAAL,CAAuBC,UAAvB,CAAJ,EAAwC;AACvC,cAAI8C,SAAS,GAAG,KAAK7B,oBAAL,CAA0BjB,UAA1B,EAAsCvf,CAAtC,EAAyCugB,IAAzC,CAAhB;;AACA,cAAI8B,SAAJ,EAAe;AACdH,YAAAA,KAAK,GAAG3C,UAAU,CAAC,CAAD,CAAlB;;AACA,gBAAI,KAAKH,UAAT,EAAqB;AACpB;AACA+C,cAAAA,IAAI,GAAG,KAAKL,4BAAL,EAAP;AACA;AACD;AACD;AACD;;AAED,UAAIS,WAAW,GAAG,KAAKzB,kBAAL,EAAlB;AACAjkB,MAAAA,MAAM,CAACkhB,iBAAP,CAAyBwE,WAAzB;AAEA,aAAO,IAAItD,iBAAJ,CAAsBsD,WAAtB,CAAP;AACA,KAjHD;AAkHA;;AAGD,WAASC,gBAAT,CAA0B7D,IAA1B,EAAgCC,IAAhC,EAAsCC,mBAAtC,EAA2D;AAC1D,SAAK3hB,CAAL,GAASyhB,IAAT;AACA,SAAKthB,CAAL,GAASuhB,IAAT;AACA,SAAKtf,KAAL,GAAa,CAAb;AACA,SAAKuf,mBAAL,GAA2BA,mBAA3B;;AAEA,SAAKrf,gBAAL,CAAsB,qBAAtB,EAA6C,YAAY;AACxD,aAAO,KAAKqf,mBAAZ;AACA,KAFD;;AAGA,SAAKrf,gBAAL,CAAsB,OAAtB,EAA+B,YAAY;AAC1C,aAAO,KAAKF,KAAZ;AACA,KAFD;;AAGA,SAAKE,gBAAL,CAAsB,GAAtB,EAA2B,YAAY;AACtC,aAAOrC,IAAI,CAACC,KAAL,CAAW,KAAKF,CAAhB,CAAP;AACA,KAFD;;AAGA,SAAKsC,gBAAL,CAAsB,GAAtB,EAA2B,YAAY;AACtC,aAAOrC,IAAI,CAACC,KAAL,CAAW,KAAKC,CAAhB,CAAP;AACA,KAFD;;AAGA,SAAKyhB,cAAL,GAAsB,YAAY;AACjC,WAAKxf,KAAL;AACA,KAFD;;AAGA,SAAKyf,WAAL,GAAmB,UAAUlX,UAAV,EAAsB7H,CAAtB,EAAyBiN,CAAzB,EAA4B;AAC9C,UAAI9P,IAAI,CAACoI,GAAL,CAASvF,CAAC,GAAG,KAAK3C,CAAlB,KAAwBwK,UAAxB,IAAsC1K,IAAI,CAACoI,GAAL,CAAS0H,CAAC,GAAG,KAAK/P,CAAlB,KAAwB2K,UAAlE,EAA8E;AAC7E,YAAImX,cAAc,GAAG7hB,IAAI,CAACoI,GAAL,CAASsC,UAAU,GAAG,KAAKgX,mBAA3B,CAArB;AACA,eAAOG,cAAc,IAAI,GAAlB,IAAyBA,cAAc,GAAG,KAAKH,mBAAtB,IAA6C,GAA7E;AACA;;AACD,aAAO,KAAP;AACA,KAND;AAQA;;AAED,WAAShW,sBAAT,CAAgCnM,KAAhC,EAAuC+lB,MAAvC,EAA+CC,MAA/C,EAAuD9lB,KAAvD,EAA8DE,MAA9D,EAAsE+K,UAAtE,EAAkF7C,mBAAlF,EAAuG;AACtG,SAAKtI,KAAL,GAAaA,KAAb;AACA,SAAKyiB,eAAL,GAAuB,IAAIxhB,KAAJ,EAAvB;AACA,SAAK8kB,MAAL,GAAcA,MAAd;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAK9lB,KAAL,GAAaA,KAAb;AACA,SAAKE,MAAL,GAAcA,MAAd;AACA,SAAK+K,UAAL,GAAkBA,UAAlB;AACA,SAAKwX,oBAAL,GAA4B,IAAI1hB,KAAJ,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAA5B;AACA,SAAKqH,mBAAL,GAA2BA,mBAA3B;;AAEA,SAAK0a,aAAL,GAAqB,UAAUH,UAAV,EAAsBrD,GAAtB,EAA2B;AAC/C,aAAQA,GAAG,GAAGqD,UAAU,CAAC,CAAD,CAAjB,GAAwBA,UAAU,CAAC,CAAD,CAAV,GAAgB,GAA/C;AACA,KAFD;;AAGA,SAAKD,iBAAL,GAAyB,UAAUC,UAAV,EAAsB;AAC9C,UAAI1X,UAAU,GAAG,KAAKA,UAAtB;AACA,UAAI4X,WAAW,GAAG5X,UAAU,GAAG,GAA/B;;AACA,WAAK,IAAI7H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3B,YAAI7C,IAAI,CAACoI,GAAL,CAASsC,UAAU,GAAG0X,UAAU,CAACvf,CAAD,CAAhC,KAAwCyf,WAA5C,EAAyD;AACxD,iBAAO,KAAP;AACA;AACD;;AACD,aAAO,IAAP;AACA,KATD;;AAWA,SAAKE,kBAAL,GAA0B,UAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,QAA3B,EAAqCC,uBAArC,EAA8D;AACvF,UAAIrjB,KAAK,GAAG,KAAKA,KAAjB;AAEA,UAAIsjB,IAAI,GAAGnjB,MAAM,CAACC,MAAlB;AACA,UAAIyiB,UAAU,GAAG,KAAKF,oBAAtB;AACAE,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB,CAPuF,CASvF;;AACA,UAAIvf,CAAC,GAAG4f,MAAR;;AACA,aAAO5f,CAAC,IAAI,CAAL,IAAUtD,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAf,IAA+C2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAvE,EAAiF;AAChFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD,OAdsF,CAevF;;;AACA,UAAIA,CAAC,GAAG,CAAJ,IAASuf,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAA7B,EAAuC;AACtC,eAAOI,GAAP;AACA;;AACD,aAAOlgB,CAAC,IAAI,CAAL,IAAU,CAACtD,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAhB,IAAgD2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAxE,EAAkF;AACjFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIuf,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAApB,EAA8B;AAC7B,eAAOI,GAAP;AACA,OAzBsF,CA2BvF;;;AACAlgB,MAAAA,CAAC,GAAG4f,MAAM,GAAG,CAAb;;AACA,aAAO5f,CAAC,GAAGggB,IAAJ,IAAYtjB,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAjB,IAAiD2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAAzE,EAAmF;AAClFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIA,CAAC,IAAIggB,IAAL,IAAaT,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAAjC,EAA2C;AAC1C,eAAOI,GAAP;AACA;;AACD,aAAOlgB,CAAC,GAAGggB,IAAJ,IAAY,CAACtjB,KAAK,CAACmjB,OAAO,GAAG7f,CAAC,GAAGnD,MAAM,CAACD,KAAtB,CAAlB,IAAkD2iB,UAAU,CAAC,CAAD,CAAV,IAAiBO,QAA1E,EAAoF;AACnFP,QAAAA,UAAU,CAAC,CAAD,CAAV;AACAvf,QAAAA,CAAC;AACD;;AACD,UAAIuf,UAAU,CAAC,CAAD,CAAV,GAAgBO,QAApB,EAA8B;AAC7B,eAAOI,GAAP;AACA;;AAED,UAAIC,eAAe,GAAGZ,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAAhE;;AACA,UAAI,IAAIpiB,IAAI,CAACoI,GAAL,CAAS4a,eAAe,GAAGJ,uBAA3B,CAAJ,IAA2D,IAAIA,uBAAnE,EAA4F;AAC3F,eAAOG,GAAP;AACA;;AAED,aAAO,KAAKZ,iBAAL,CAAuBC,UAAvB,IAAqC,KAAKG,aAAL,CAAmBH,UAAnB,EAA+Bvf,CAA/B,CAArC,GAAyEkgB,GAAhF;AACA,KAlDD;;AAoDA,SAAKM,oBAAL,GAA4B,UAAUjB,UAAV,EAAsBvf,CAAtB,EAAyBiN,CAAzB,EAA4B;AACvD,UAAIkT,eAAe,GAAGZ,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAAhE;AACA,UAAIM,OAAO,GAAG,KAAKH,aAAL,CAAmBH,UAAnB,EAA+BtS,CAA/B,CAAd;AACA,UAAIqT,OAAO,GAAG,KAAKX,kBAAL,CAAwB3f,CAAxB,EAA2B7C,IAAI,CAACC,KAAL,CAAWyiB,OAAX,CAA3B,EAAgD,IAAIN,UAAU,CAAC,CAAD,CAA9D,EAAmEY,eAAnE,CAAd;;AACA,UAAI,CAACjZ,KAAK,CAACoZ,OAAD,CAAV,EAAqB;AACpB,YAAIzB,mBAAmB,GAAG,CAACU,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B,GAAgCA,UAAU,CAAC,CAAD,CAA3C,IAAkD,GAA5E;AACA,YAAI3hB,GAAG,GAAG,KAAKuhB,eAAL,CAAqBliB,MAA/B;;AACA,aAAK,IAAIyjB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG9iB,GAA5B,EAAiC8iB,KAAK,EAAtC,EAA0C;AACzC,cAAIC,MAAM,GAAG,KAAKxB,eAAL,CAAqBuB,KAArB,CAAb,CADyC,CAEzC;;AACA,cAAIC,MAAM,CAAC5B,WAAP,CAAmBF,mBAAnB,EAAwCyB,OAAxC,EAAiDT,OAAjD,CAAJ,EAA+D;AAC9D,mBAAO,IAAI2C,gBAAJ,CAAqB3C,OAArB,EAA8BS,OAA9B,EAAuCzB,mBAAvC,CAAP;AACA;AACD,SATmB,CAUpB;;;AACA,YAAItD,KAAK,GAAG,IAAIiH,gBAAJ,CAAqB3C,OAArB,EAA8BS,OAA9B,EAAuCzB,mBAAvC,CAAZ;AACA,aAAKM,eAAL,CAAqByB,IAArB,CAA0BrF,KAA1B;;AACA,YAAI,KAAKvW,mBAAL,IAA4B,IAAhC,EAAsC;AACrC,eAAKA,mBAAL,CAAyB6b,wBAAzB,CAAkDtF,KAAlD;AACA;AACD;;AACD,aAAO,IAAP;AACA,KAtBD;;AAwBA,SAAKzS,IAAL,GAAY,YAAY;AACvB,UAAI2Z,MAAM,GAAG,KAAKA,MAAlB;AACA,UAAI3lB,MAAM,GAAG,KAAKA,MAAlB;AACA,UAAIyjB,IAAI,GAAGkC,MAAM,GAAG7lB,KAApB;AACA,UAAI+lB,OAAO,GAAGD,MAAM,IAAI5lB,MAAM,IAAI,CAAd,CAApB,CAJuB,CAKvB;AACA;;AACA,UAAIyiB,UAAU,GAAG,IAAI5hB,KAAJ,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAjB;;AACA,WAAK,IAAIilB,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAG9lB,MAA1B,EAAkC8lB,IAAI,EAAtC,EAA0C;AACzC;AACA,YAAI5iB,CAAC,GAAG2iB,OAAO,IAAI,CAACC,IAAI,GAAG,IAAR,KAAiB,CAAjB,GAAuBA,IAAI,GAAG,CAAR,IAAc,CAApC,GAAyC,EAAIA,IAAI,GAAG,CAAR,IAAc,CAAjB,CAA7C,CAAf;AACArD,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,QAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACA,YAAItS,CAAC,GAAGwV,MAAR,CANyC,CAOzC;AACA;AACA;;AACA,eAAOxV,CAAC,GAAGsT,IAAJ,IAAY,CAAC7jB,KAAK,CAACuQ,CAAC,GAAGpQ,MAAM,CAACD,KAAP,GAAeoD,CAApB,CAAzB,EAAiD;AAChDiN,UAAAA,CAAC;AACD;;AACD,YAAImV,YAAY,GAAG,CAAnB;;AACA,eAAOnV,CAAC,GAAGsT,IAAX,EAAiB;AAChB,cAAI7jB,KAAK,CAACuQ,CAAC,GAAGjN,CAAC,GAAGnD,MAAM,CAACD,KAAhB,CAAT,EAAiC;AAChC;AACA,gBAAIwlB,YAAY,IAAI,CAApB,EAAuB;AACtB;AACA7C,cAAAA,UAAU,CAAC6C,YAAD,CAAV;AACA,aAHD,MAIK;AACJ;AACA,kBAAIA,YAAY,IAAI,CAApB,EAAuB;AACtB;AACA,oBAAI,KAAK9C,iBAAL,CAAuBC,UAAvB,CAAJ,EAAwC;AACvC;AACA,sBAAI8C,SAAS,GAAG,KAAK7B,oBAAL,CAA0BjB,UAA1B,EAAsCvf,CAAtC,EAAyCiN,CAAzC,CAAhB;;AACA,sBAAIoV,SAAS,IAAI,IAAjB,EAAuB;AACtB,2BAAOA,SAAP;AACA;AACD;;AACD9C,gBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgBA,UAAU,CAAC,CAAD,CAA1B;AACAA,gBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACAA,gBAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,CAAhB;AACA6C,gBAAAA,YAAY,GAAG,CAAf;AACA,eAbD,MAcK;AACJ7C,gBAAAA,UAAU,CAAC,EAAE6C,YAAH,CAAV;AACA;AACD;AACD,WA1BD,MA2BK;AACJ;AACA,gBAAIA,YAAY,IAAI,CAApB,EAAuB;AACtB;AACAA,cAAAA,YAAY;AACZ;;AACD7C,YAAAA,UAAU,CAAC6C,YAAD,CAAV;AACA;;AACDnV,UAAAA,CAAC;AACD;;AACD,YAAI,KAAKqS,iBAAL,CAAuBC,UAAvB,CAAJ,EAAwC;AACvC,cAAI8C,SAAS,GAAG,KAAK7B,oBAAL,CAA0BjB,UAA1B,EAAsCvf,CAAtC,EAAyCugB,IAAzC,CAAhB;;AACA,cAAI8B,SAAS,IAAI,IAAjB,EAAuB;AACtB,mBAAOA,SAAP;AACA;AACD;AACD,OAlEsB,CAoEvB;AACA;;;AACA,UAAI,EAAE,KAAKlD,eAAL,CAAqBliB,MAArB,IAA+B,CAAjC,CAAJ,EAAyC;AACxC,eAAO,KAAKkiB,eAAL,CAAqB,CAArB,CAAP;AACA;;AAED,YAAM,yCAAN;AACA,KA3ED;AA6EA;;AAED,WAASjJ,qBAAT,CAA+B2M,MAA/B,EAAuCjW,OAAvC,EAAgDkW,sBAAhD,EAAwE;AACvE,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKJ,MAAL,GAAcA,MAAd;AACA,SAAKC,sBAAL,GAA8BA,sBAA9B;AACA,QAAIlW,OAAO,IAAI,CAAf,EACC,KAAKsW,cAAL,GAAsB,CAAtB,CADD,KAEK,IAAItW,OAAO,IAAI,EAAX,IAAiBA,OAAO,IAAI,EAAhC,EACJ,KAAKsW,cAAL,GAAsB,CAAtB,CADI,KAEA,IAAItW,OAAO,IAAI,EAAX,IAAiBA,OAAO,IAAI,EAAhC,EACJ,KAAKsW,cAAL,GAAsB,CAAtB;;AAED,SAAKC,WAAL,GAAmB,UAAUC,OAAV,EAAmB;AACrC,UAAI3lB,IAAI,GAAG,CAAX;;AACA,UAAI2lB,OAAO,GAAG,KAAKJ,UAAL,GAAkB,CAAhC,EAAmC;AAClC;AACA,YAAIK,IAAI,GAAG,CAAX;;AACA,aAAK,IAAIrjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGojB,OAApB,EAA6BpjB,CAAC,EAA9B,EAAkC;AACjCqjB,UAAAA,IAAI,IAAK,KAAKrjB,CAAd;AACA;;AACDqjB,QAAAA,IAAI,KAAM,KAAKL,UAAL,GAAkBI,OAAlB,GAA4B,CAAtC;AAEA3lB,QAAAA,IAAI,GAAG,CAAC,KAAKolB,MAAL,CAAY,KAAKE,YAAjB,IAAiCM,IAAlC,KAA4C,KAAKL,UAAL,GAAkBI,OAAlB,GAA4B,CAA/E;AACA,aAAKJ,UAAL,IAAmBI,OAAnB;AACA,eAAO3lB,IAAP;AACA,OAXD,MAYK,IAAI2lB,OAAO,GAAG,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,CAApC,EAAuC;AAC3C;AACA,YAAIM,KAAK,GAAG,CAAZ;;AACA,aAAK,IAAItjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKgjB,UAAL,GAAkB,CAAtC,EAAyChjB,CAAC,EAA1C,EAA8C;AAC7CsjB,UAAAA,KAAK,IAAK,KAAKtjB,CAAf;AACA;;AACDvC,QAAAA,IAAI,GAAG,CAAC,KAAKolB,MAAL,CAAY,KAAKE,YAAjB,IAAiCO,KAAlC,KAA6CF,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAtB,CAA3D;AACA,aAAKD,YAAL;AACAtlB,QAAAA,IAAI,IAAM,KAAKolB,MAAL,CAAY,KAAKE,YAAjB,CAAD,IAAqC,KAAKK,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAtB,CAAZ,CAA9C;AAEA,aAAKA,UAAL,GAAkB,KAAKA,UAAL,GAAkBI,OAAO,GAAG,CAA9C;;AACA,YAAI,KAAKJ,UAAL,GAAkB,CAAtB,EAAyB;AACxB,eAAKA,UAAL,GAAkB,IAAI,KAAKA,UAA3B;AACA;;AACD,eAAOvlB,IAAP;AACA,OAfI,MAgBA,IAAI2lB,OAAO,GAAG,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,EAApC,EAAwC;AAC5C;AACA,YAAIM,KAAK,GAAG,CAAZ,CAF4C,CAE7B;;AACf,YAAIC,KAAK,GAAG,CAAZ,CAH4C,CAG7B;AACf;AACA;AACA;;AACA,aAAK,IAAIvjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKgjB,UAAL,GAAkB,CAAtC,EAAyChjB,CAAC,EAA1C,EAA8C;AAC7CsjB,UAAAA,KAAK,IAAK,KAAKtjB,CAAf;AACA;;AACD,YAAIwjB,cAAc,GAAG,CAAC,KAAKX,MAAL,CAAY,KAAKE,YAAjB,IAAiCO,KAAlC,KAA6CF,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAtB,CAAzE;AACA,aAAKD,YAAL;AAEA,YAAIU,eAAe,GAAG,KAAKZ,MAAL,CAAY,KAAKE,YAAjB,KAAmCK,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,CAA1B,CAAhE;AACA,aAAKD,YAAL;;AAEA,aAAK,IAAI/iB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGojB,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,CAA1B,CAA3B,EAAyDhjB,CAAC,EAA1D,EAA8D;AAC7DujB,UAAAA,KAAK,IAAK,KAAKvjB,CAAf;AACA;;AACDujB,QAAAA,KAAK,KAAK,KAAKH,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,CAA1B,CAAZ,CAAV;AACA,YAAIU,cAAc,GAAG,CAAC,KAAKb,MAAL,CAAY,KAAKE,YAAjB,IAAiCQ,KAAlC,KAA6C,KAAKH,OAAO,IAAI,KAAKJ,UAAL,GAAkB,CAAlB,GAAsB,CAA1B,CAAZ,CAAlE;AAEAvlB,QAAAA,IAAI,GAAG+lB,cAAc,GAAGC,eAAjB,GAAmCC,cAA1C;AACA,aAAKV,UAAL,GAAkB,KAAKA,UAAL,GAAkB,CAACI,OAAO,GAAG,CAAX,IAAgB,CAApD;;AACA,YAAI,KAAKJ,UAAL,GAAkB,CAAtB,EAAyB;AACxB,eAAKA,UAAL,GAAkB,IAAI,KAAKA,UAA3B;AACA;;AACD,eAAOvlB,IAAP;AACA,OA5BI,MA6BA;AACJ,eAAO,CAAP;AACA;AACD,KA9DD;;AA+DA,SAAKkmB,QAAL,GAAgB,YAAY;AAC3B,UAAK,KAAKZ,YAAL,GAAoB,KAAKF,MAAL,CAAY5lB,MAAZ,GAAqB,KAAK6lB,sBAA1B,GAAmD,CAA5E,EACC,OAAO,CAAP,CADD,KAGC,OAAO,KAAKK,WAAL,CAAiB,CAAjB,CAAP;AACD,KALD;;AAMA,SAAKS,aAAL,GAAqB,UAAUC,aAAV,EAAyB;AAC7C,UAAInD,KAAK,GAAG,CAAZ;;AACA,aAAO,IAAP,EAAa;AACZ,YAAKmD,aAAa,IAAInD,KAAlB,IAA4B,CAAhC,EACC;AACDA,QAAAA,KAAK;AACL;;AAED,aAAO,KAAKyC,WAAL,CAAiBtmB,MAAM,CAAC4Z,oBAAP,CAA4B,KAAKyM,cAAjC,EAAiDxC,KAAjD,CAAjB,CAAP;AACA,KATD;;AAUA,SAAKoD,uBAAL,GAA+B,UAAUb,UAAV,EAAsB;AACpD,UAAIhmB,MAAM,GAAGgmB,UAAb;AACA,UAAIc,OAAO,GAAG,CAAd;AACA,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIC,mBAAmB,GAAG,IAAItmB,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,GAAzB,EAA8B,GAA9B,EAAmC,GAAnC,EAAwC,GAAxC,EAA6C,GAA7C,EAAkD,GAAlD,EAAuD,GAAvD,EAA4D,GAA5D,EAAiE,GAAjE,EAAsE,GAAtE,EAA2E,GAA3E,EAAgF,GAAhF,EAAqF,GAArF,EAA0F,GAA1F,EAA+F,GAA/F,EAAoG,GAApG,EAAyG,GAAzG,EAA8G,GAA9G,EAAmH,GAAnH,EAAwH,GAAxH,EAA6H,GAA7H,EAAkI,GAAlI,EAAuI,GAAvI,EAA4I,GAA5I,EAAiJ,GAAjJ,EAAsJ,GAAtJ,EAA2J,GAA3J,EAAgK,GAAhK,EAAqK,GAArK,EAA0K,GAA1K,EAA+K,GAA/K,EAAoL,GAApL,EAAyL,GAAzL,EAA8L,GAA9L,EAAmM,GAAnM,EAAwM,GAAxM,EAA6M,GAA7M,EAAkN,GAAlN,EAAuN,GAAvN,EAA4N,GAA5N,EAAiO,GAAjO,EAAsO,GAAtO,CAA1B;;AACA,SAAG;AACF,YAAIV,MAAM,GAAG,CAAb,EAAgB;AACf8mB,UAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,EAAjB,CAAV;AACA,cAAIe,WAAW,GAAG/mB,IAAI,CAACC,KAAL,CAAW2mB,OAAO,GAAG,EAArB,CAAlB;AACA,cAAII,YAAY,GAAGJ,OAAO,GAAG,EAA7B;AACAC,UAAAA,OAAO,IAAIC,mBAAmB,CAACC,WAAD,CAA9B;AACAF,UAAAA,OAAO,IAAIC,mBAAmB,CAACE,YAAD,CAA9B;AACAlnB,UAAAA,MAAM,IAAI,CAAV;AACA,SAPD,MAQK,IAAIA,MAAM,IAAI,CAAd,EAAiB;AACrB8mB,UAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,CAAjB,CAAV;AACAa,UAAAA,OAAO,IAAIC,mBAAmB,CAACF,OAAD,CAA9B;AACA9mB,UAAAA,MAAM,IAAI,CAAV;AACA;AACD,OAdD,QAeOA,MAAM,GAAG,CAfhB;;AAiBA,aAAO+mB,OAAP;AACA,KAvBD;;AAwBA,SAAKI,eAAL,GAAuB,UAAUnB,UAAV,EAAsB;AAC5C,UAAIhmB,MAAM,GAAGgmB,UAAb;AACA,UAAIc,OAAO,GAAG,CAAd;AACA,UAAIC,OAAO,GAAG,EAAd;;AACA,SAAG;AACF,YAAI/mB,MAAM,IAAI,CAAd,EAAiB;AAChB8mB,UAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,EAAjB,CAAV;AACA,cAAIY,OAAO,GAAG,GAAd,EACCC,OAAO,IAAI,GAAX;AACD,cAAID,OAAO,GAAG,EAAd,EACCC,OAAO,IAAI,GAAX;AACD/mB,UAAAA,MAAM,IAAI,CAAV;AACA,SAPD,MAQK,IAAIA,MAAM,IAAI,CAAd,EAAiB;AACrB8mB,UAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,CAAjB,CAAV;AACA,cAAIY,OAAO,GAAG,EAAd,EACCC,OAAO,IAAI,GAAX;AACD/mB,UAAAA,MAAM,IAAI,CAAV;AACA,SALI,MAMA,IAAIA,MAAM,IAAI,CAAd,EAAiB;AACrB8mB,UAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,CAAjB,CAAV;AACAlmB,UAAAA,MAAM,IAAI,CAAV;AACA;;AACD+mB,QAAAA,OAAO,IAAID,OAAX;AACA,OApBD,QAqBO9mB,MAAM,GAAG,CArBhB;;AAuBA,aAAO+mB,OAAP;AACA,KA5BD;;AA6BA,SAAKK,gBAAL,GAAwB,UAAUpB,UAAV,EAAsB;AAC7C,UAAIhmB,MAAM,GAAGgmB,UAAb;AACA,UAAIc,OAAO,GAAG,CAAd;AACA,UAAIO,MAAM,GAAG,IAAI3mB,KAAJ,EAAb;;AAEA,SAAG;AACFomB,QAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,CAAjB,CAAV;AACAmB,QAAAA,MAAM,CAAC1D,IAAP,CAAYmD,OAAZ;AACA9mB,QAAAA,MAAM;AACN,OAJD,QAKOA,MAAM,GAAG,CALhB;;AAMA,aAAOqnB,MAAP;AACA,KAZD;;AAaA,SAAKC,cAAL,GAAsB,UAAUtB,UAAV,EAAsB;AAC3C,UAAIhmB,MAAM,GAAGgmB,UAAb;AACA,UAAIc,OAAO,GAAG,CAAd;AACA,UAAIS,aAAa,GAAG,EAApB;;AACA,SAAG;AACFT,QAAAA,OAAO,GAAG,KAAKZ,WAAL,CAAiB,EAAjB,CAAV;AACA,YAAIsB,SAAS,GAAGV,OAAO,GAAG,IAA1B;AACA,YAAIW,UAAU,GAAGX,OAAO,GAAG,IAA3B;AAEA,YAAIY,QAAQ,GAAG,CAACD,UAAU,IAAI,CAAf,IAAoBD,SAAnC;AACA,YAAIG,YAAY,GAAG,CAAnB;;AACA,YAAID,QAAQ,GAAG,MAAX,IAAqB,MAAzB,EAAiC;AAChC;AACAC,UAAAA,YAAY,GAAGD,QAAQ,GAAG,MAA1B;AACA,SAHD,MAIK;AACJ;AACAC,UAAAA,YAAY,GAAGD,QAAQ,GAAG,MAA1B;AACA,SAdC,CAgBF;AACA;AACA;AACA;;;AACAH,QAAAA,aAAa,IAAIxI,MAAM,CAACC,YAAP,CAAoB2I,YAApB,CAAjB;AACA3nB,QAAAA,MAAM;AACN,OAtBD,QAuBOA,MAAM,GAAG,CAvBhB;;AA0BA,aAAOunB,aAAP;AACA,KA/BD;;AAiCA,SAAKK,aAAL,GAAqB,YAAY;AAChC,UAAId,OAAO,GAAG,CAAd;AACA,UAAIe,SAAS,GAAG,KAAK3B,WAAL,CAAiB,CAAjB,CAAhB;;AACA,UAAI,CAAC2B,SAAS,GAAG,IAAb,KAAsB,CAA1B,EAA6B;AAC5Bf,QAAAA,OAAO,GAAGe,SAAS,GAAG,IAAtB;AACA;;AACD,UAAI,CAACA,SAAS,GAAG,IAAb,KAAsB,IAA1B,EAAgC;AAC/B;AACA,YAAIC,UAAU,GAAG,KAAK5B,WAAL,CAAiB,CAAjB,CAAjB;AACAY,QAAAA,OAAO,GAAI,CAACe,SAAS,GAAG,IAAb,KAAsB,CAAvB,GAA4BC,UAAtC;AACA;;AACD,UAAI,CAACD,SAAS,GAAG,IAAb,KAAsB,IAA1B,EAAgC;AAC/B;AACA,YAAIE,gBAAgB,GAAG,KAAK7B,WAAL,CAAiB,CAAjB,CAAvB;AAA2C;AAC3CY,QAAAA,OAAO,GAAI,CAACe,SAAS,GAAG,IAAb,KAAsB,EAAvB,GAA6BE,gBAAvC;AACA;;AACD,aAAOjB,OAAP;AACA,KAjBD;;AAmBA,SAAKvkB,gBAAL,CAAsB,UAAtB,EAAkC,YAAY;AAC7C,UAAI8kB,MAAM,GAAG,IAAI3mB,KAAJ,EAAb;AACA,UAAIsnB,WAAW,GAAG,CAAlB;AACA,UAAIC,qBAAqB,GAAG,CAA5B;AACA,UAAIC,cAAc,GAAG,CAArB;AACA,UAAIC,QAAQ,GAAG,CAAf;AACA,UAAIC,UAAU,GAAG,CAAjB;;AACA,SAAG;AACF,YAAIC,IAAI,GAAG,KAAK3B,QAAL,EAAX,CADE,CAEF;;AACA,YAAI2B,IAAI,IAAI,CAAZ,EAAe;AACd,cAAIhB,MAAM,CAACrnB,MAAP,GAAgB,CAApB,EACC,MADD,KAGC,MAAM,kBAAN;AACD;;AACD,YAAIqoB,IAAI,IAAIL,WAAR,IAAuBK,IAAI,IAAIJ,qBAA/B,IAAwDI,IAAI,IAAIH,cAAhE,IAAkFG,IAAI,IAAID,UAA1F,IAAwGC,IAAI,IAAIF,QAApH,EAA8H;AAC7H,gBAAM,mBAAmBE,IAAnB,GAA0B,aAA1B,GAA0C,KAAKvC,YAA/C,GAA8D,OAA9D,GAAwE,KAAKC,UAA7E,GAA0F,GAAhG;AACA;;AAED,YAAIsC,IAAI,IAAIF,QAAZ,EAAsB;AACrB,cAAIG,gBAAgB,GAAG,KAAKV,aAAL,EAAvB,CADqB,CAErB;AACA,SAHD,MAIK;AAEJ,cAAI5B,UAAU,GAAG,KAAKW,aAAL,CAAmB0B,IAAnB,CAAjB;AACA,cAAIrC,UAAU,GAAG,CAAjB,EACC,MAAM,0BAA0BA,UAAhC;;AACD,kBAAQqC,IAAR;AAEC,iBAAKL,WAAL;AACC,kBAAIO,QAAQ,GAAG,KAAKpB,eAAL,CAAqBnB,UAArB,CAAf;AACA,kBAAIwC,EAAE,GAAG,IAAI9nB,KAAJ,CAAU6nB,QAAQ,CAACvoB,MAAnB,CAAT;;AACA,mBAAK,IAAIgQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuY,QAAQ,CAACvoB,MAA7B,EAAqCgQ,CAAC,EAAtC;AACCwY,gBAAAA,EAAE,CAACxY,CAAD,CAAF,GAAQuY,QAAQ,CAACE,UAAT,CAAoBzY,CAApB,CAAR;AADD;;AAEAqX,cAAAA,MAAM,CAAC1D,IAAP,CAAY6E,EAAZ;AACA;;AAED,iBAAKP,qBAAL;AACC,kBAAIM,QAAQ,GAAG,KAAK1B,uBAAL,CAA6Bb,UAA7B,CAAf;AACA,kBAAIwC,EAAE,GAAG,IAAI9nB,KAAJ,CAAU6nB,QAAQ,CAACvoB,MAAnB,CAAT;;AACA,mBAAK,IAAIgQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuY,QAAQ,CAACvoB,MAA7B,EAAqCgQ,CAAC,EAAtC;AACCwY,gBAAAA,EAAE,CAACxY,CAAD,CAAF,GAAQuY,QAAQ,CAACE,UAAT,CAAoBzY,CAApB,CAAR;AADD;;AAEAqX,cAAAA,MAAM,CAAC1D,IAAP,CAAY6E,EAAZ;AACA;;AAED,iBAAKN,cAAL;AACC,kBAAII,gBAAgB,GAAG,KAAKlB,gBAAL,CAAsBpB,UAAtB,CAAvB;AACAqB,cAAAA,MAAM,CAAC1D,IAAP,CAAY2E,gBAAZ;AACA;;AAED,iBAAKF,UAAL;AACC,kBAAIG,QAAQ,GAAG,KAAKjB,cAAL,CAAoBtB,UAApB,CAAf;AACAqB,cAAAA,MAAM,CAAC1D,IAAP,CAAY4E,QAAZ;AACA;AA1BF;AA4BA;AACD,OAnDD,QAoDO,IApDP;;AAqDA,aAAOlB,MAAP;AACA,KA7DD;AA8DA;;AAED,SAAOznB,MAAP;AACA","file":"js.00a46daa.js","sourceRoot":"..\\src","sourcesContent":["/*\r\n  Ported to JavaScript by Lazar Laszlo 2011 \r\n  \r\n  lazarsoft@gmail.com, www.lazarsoft.info\r\n  \r\n*/\r\n\r\n/*\r\n*\r\n* Copyright 2007 ZXing authors\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*      http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n*/\r\n\r\nexport default function getLazarSoftScanner() {\r\n\r\n\tvar GridSampler = {};\r\n\r\n\tGridSampler.checkAndNudgePoints = function (image, points) {\r\n\t\tvar width = qrcode.width;\r\n\t\tvar height = qrcode.height;\r\n\t\t// Check and nudge points from start until we see some that are OK:\r\n\t\tvar nudged = true;\r\n\t\tfor (var offset = 0; offset < points.length && nudged; offset += 2) {\r\n\t\t\tvar x = Math.floor(points[offset]);\r\n\t\t\tvar y = Math.floor(points[offset + 1]);\r\n\t\t\tif (x < - 1 || x > width || y < - 1 || y > height) {\r\n\t\t\t\tthrow \"Error.checkAndNudgePoints \";\r\n\t\t\t}\r\n\t\t\tnudged = false;\r\n\t\t\tif (x == - 1) {\r\n\t\t\t\tpoints[offset] = 0.0;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\telse if (x == width) {\r\n\t\t\t\tpoints[offset] = width - 1;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\tif (y == - 1) {\r\n\t\t\t\tpoints[offset + 1] = 0.0;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\telse if (y == height) {\r\n\t\t\t\tpoints[offset + 1] = height - 1;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Check and nudge points from end:\r\n\t\tnudged = true;\r\n\t\tfor (var offset = points.length - 2; offset >= 0 && nudged; offset -= 2) {\r\n\t\t\tvar x = Math.floor(points[offset]);\r\n\t\t\tvar y = Math.floor(points[offset + 1]);\r\n\t\t\tif (x < - 1 || x > width || y < - 1 || y > height) {\r\n\t\t\t\tthrow \"Error.checkAndNudgePoints \";\r\n\t\t\t}\r\n\t\t\tnudged = false;\r\n\t\t\tif (x == - 1) {\r\n\t\t\t\tpoints[offset] = 0.0;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\telse if (x == width) {\r\n\t\t\t\tpoints[offset] = width - 1;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\tif (y == - 1) {\r\n\t\t\t\tpoints[offset + 1] = 0.0;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t\telse if (y == height) {\r\n\t\t\t\tpoints[offset + 1] = height - 1;\r\n\t\t\t\tnudged = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tGridSampler.sampleGrid3 = function (image, dimension, transform) {\r\n\t\tvar bits = new BitMatrix(dimension);\r\n\t\tvar points = new Array(dimension << 1);\r\n\t\tfor (var y = 0; y < dimension; y++) {\r\n\t\t\tvar max = points.length;\r\n\t\t\tvar iValue = y + 0.5;\r\n\t\t\tfor (var x = 0; x < max; x += 2) {\r\n\t\t\t\tpoints[x] = (x >> 1) + 0.5;\r\n\t\t\t\tpoints[x + 1] = iValue;\r\n\t\t\t}\r\n\t\t\ttransform.transformPoints1(points);\r\n\t\t\t// Quick check to see if points transformed to something inside the image;\r\n\t\t\t// sufficient to check the endpoints\r\n\t\t\tGridSampler.checkAndNudgePoints(image, points);\r\n\t\t\ttry {\r\n\t\t\t\tfor (var x = 0; x < max; x += 2) {\r\n\t\t\t\t\t//var xpoint = (Math.floor( points[x]) * 4) + (Math.floor( points[x + 1]) * qrcode.width * 4);\r\n\t\t\t\t\tvar bit = image[Math.floor(points[x]) + qrcode.width * Math.floor(points[x + 1])];\r\n\t\t\t\t\t//qrcode.imagedata.data[xpoint] = bit?255:0;\r\n\t\t\t\t\t//qrcode.imagedata.data[xpoint+1] = bit?255:0;\r\n\t\t\t\t\t//qrcode.imagedata.data[xpoint+2] = 0;\r\n\t\t\t\t\t//qrcode.imagedata.data[xpoint+3] = 255;\r\n\t\t\t\t\t//bits[x >> 1][ y]=bit;\r\n\t\t\t\t\tif (bit)\r\n\t\t\t\t\t\tbits.set_Renamed(x >> 1, y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (aioobe) {\r\n\t\t\t\t// This feels wrong, but, sometimes if the finder patterns are misidentified, the resulting\r\n\t\t\t\t// transform gets \"twisted\" such that it maps a straight line of points to a set of points\r\n\t\t\t\t// whose endpoints are in bounds, but others are not. There is probably some mathematical\r\n\t\t\t\t// way to detect this about the transformation that I don't know yet.\r\n\t\t\t\t// This results in an ugly runtime exception despite our clever checks above -- can't have\r\n\t\t\t\t// that. We could check each point's coordinates but that feels duplicative. We settle for\r\n\t\t\t\t// catching and wrapping ArrayIndexOutOfBoundsException.\r\n\t\t\t\tthrow \"Error.checkAndNudgePoints\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bits;\r\n\t}\r\n\r\n\tGridSampler.sampleGridx = function (image, dimension, p1ToX, p1ToY, p2ToX, p2ToY, p3ToX, p3ToY, p4ToX, p4ToY, p1FromX, p1FromY, p2FromX, p2FromY, p3FromX, p3FromY, p4FromX, p4FromY) {\r\n\t\tvar transform = PerspectiveTransform.quadrilateralToQuadrilateral(p1ToX, p1ToY, p2ToX, p2ToY, p3ToX, p3ToY, p4ToX, p4ToY, p1FromX, p1FromY, p2FromX, p2FromY, p3FromX, p3FromY, p4FromX, p4FromY);\r\n\r\n\t\treturn GridSampler.sampleGrid3(image, dimension, transform);\r\n\t}\r\n\r\n\r\n\r\n\tfunction ECB(count, dataCodewords) {\r\n\t\tthis.count = count;\r\n\t\tthis.dataCodewords = dataCodewords;\r\n\r\n\t\tthis.__defineGetter__(\"Count\", function () {\r\n\t\t\treturn this.count;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"DataCodewords\", function () {\r\n\t\t\treturn this.dataCodewords;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction ECBlocks(ecCodewordsPerBlock, ecBlocks1, ecBlocks2) {\r\n\t\tthis.ecCodewordsPerBlock = ecCodewordsPerBlock;\r\n\t\tif (ecBlocks2)\r\n\t\t\tthis.ecBlocks = new Array(ecBlocks1, ecBlocks2);\r\n\t\telse\r\n\t\t\tthis.ecBlocks = new Array(ecBlocks1);\r\n\r\n\t\tthis.__defineGetter__(\"ECCodewordsPerBlock\", function () {\r\n\t\t\treturn this.ecCodewordsPerBlock;\r\n\t\t});\r\n\r\n\t\tthis.__defineGetter__(\"TotalECCodewords\", function () {\r\n\t\t\treturn this.ecCodewordsPerBlock * this.NumBlocks;\r\n\t\t});\r\n\r\n\t\tthis.__defineGetter__(\"NumBlocks\", function () {\r\n\t\t\tvar total = 0;\r\n\t\t\tfor (var i = 0; i < this.ecBlocks.length; i++) {\r\n\t\t\t\ttotal += this.ecBlocks[i].length;\r\n\t\t\t}\r\n\t\t\treturn total;\r\n\t\t});\r\n\r\n\t\tthis.getECBlocks = function () {\r\n\t\t\treturn this.ecBlocks;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Version(versionNumber, alignmentPatternCenters, ecBlocks1, ecBlocks2, ecBlocks3, ecBlocks4) {\r\n\t\tthis.versionNumber = versionNumber;\r\n\t\tthis.alignmentPatternCenters = alignmentPatternCenters;\r\n\t\tthis.ecBlocks = new Array(ecBlocks1, ecBlocks2, ecBlocks3, ecBlocks4);\r\n\r\n\t\tvar total = 0;\r\n\t\tvar ecCodewords = ecBlocks1.ECCodewordsPerBlock;\r\n\t\tvar ecbArray = ecBlocks1.getECBlocks();\r\n\t\tfor (var i = 0; i < ecbArray.length; i++) {\r\n\t\t\tvar ecBlock = ecbArray[i];\r\n\t\t\ttotal += ecBlock.Count * (ecBlock.DataCodewords + ecCodewords);\r\n\t\t}\r\n\t\tthis.totalCodewords = total;\r\n\r\n\t\tthis.__defineGetter__(\"VersionNumber\", function () {\r\n\t\t\treturn this.versionNumber;\r\n\t\t});\r\n\r\n\t\tthis.__defineGetter__(\"AlignmentPatternCenters\", function () {\r\n\t\t\treturn this.alignmentPatternCenters;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"TotalCodewords\", function () {\r\n\t\t\treturn this.totalCodewords;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"DimensionForVersion\", function () {\r\n\t\t\treturn 17 + 4 * this.versionNumber;\r\n\t\t});\r\n\r\n\t\tthis.buildFunctionPattern = function () {\r\n\t\t\tvar dimension = this.DimensionForVersion;\r\n\t\t\tvar bitMatrix = new BitMatrix(dimension);\r\n\r\n\t\t\t// Top left finder pattern + separator + format\r\n\t\t\tbitMatrix.setRegion(0, 0, 9, 9);\r\n\t\t\t// Top right finder pattern + separator + format\r\n\t\t\tbitMatrix.setRegion(dimension - 8, 0, 8, 9);\r\n\t\t\t// Bottom left finder pattern + separator + format\r\n\t\t\tbitMatrix.setRegion(0, dimension - 8, 9, 8);\r\n\r\n\t\t\t// Alignment patterns\r\n\t\t\tvar max = this.alignmentPatternCenters.length;\r\n\t\t\tfor (var x = 0; x < max; x++) {\r\n\t\t\t\tvar i = this.alignmentPatternCenters[x] - 2;\r\n\t\t\t\tfor (var y = 0; y < max; y++) {\r\n\t\t\t\t\tif ((x == 0 && (y == 0 || y == max - 1)) || (x == max - 1 && y == 0)) {\r\n\t\t\t\t\t\t// No alignment patterns near the three finder paterns\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbitMatrix.setRegion(this.alignmentPatternCenters[y] - 2, i, 5, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Vertical timing pattern\r\n\t\t\tbitMatrix.setRegion(6, 9, 1, dimension - 17);\r\n\t\t\t// Horizontal timing pattern\r\n\t\t\tbitMatrix.setRegion(9, 6, dimension - 17, 1);\r\n\r\n\t\t\tif (this.versionNumber > 6) {\r\n\t\t\t\t// Version info, top right\r\n\t\t\t\tbitMatrix.setRegion(dimension - 11, 0, 3, 6);\r\n\t\t\t\t// Version info, bottom left\r\n\t\t\t\tbitMatrix.setRegion(0, dimension - 11, 6, 3);\r\n\t\t\t}\r\n\r\n\t\t\treturn bitMatrix;\r\n\t\t}\r\n\t\tthis.getECBlocksForLevel = function (ecLevel) {\r\n\t\t\treturn this.ecBlocks[ecLevel.ordinal()];\r\n\t\t}\r\n\t}\r\n\r\n\tVersion.VERSION_DECODE_INFO = new Array(0x07C94, 0x085BC, 0x09A99, 0x0A4D3, 0x0BBF6, 0x0C762, 0x0D847, 0x0E60D, 0x0F928, 0x10B78, 0x1145D, 0x12A17, 0x13532, 0x149A6, 0x15683, 0x168C9, 0x177EC, 0x18EC4, 0x191E1, 0x1AFAB, 0x1B08E, 0x1CC1A, 0x1D33F, 0x1ED75, 0x1F250, 0x209D5, 0x216F0, 0x228BA, 0x2379F, 0x24B0B, 0x2542E, 0x26A64, 0x27541, 0x28C69);\r\n\r\n\tVersion.VERSIONS = buildVersions();\r\n\r\n\tVersion.getVersionForNumber = function (versionNumber) {\r\n\t\tif (versionNumber < 1 || versionNumber > 40) {\r\n\t\t\tthrow \"ArgumentException\";\r\n\t\t}\r\n\t\treturn Version.VERSIONS[versionNumber - 1];\r\n\t}\r\n\r\n\tVersion.getProvisionalVersionForDimension = function (dimension) {\r\n\t\tif (dimension % 4 != 1) {\r\n\t\t\tthrow \"Error getProvisionalVersionForDimension\";\r\n\t\t}\r\n\t\ttry {\r\n\t\t\treturn Version.getVersionForNumber((dimension - 17) >> 2);\r\n\t\t}\r\n\t\tcatch (iae) {\r\n\t\t\tthrow \"Error getVersionForNumber\";\r\n\t\t}\r\n\t}\r\n\r\n\tVersion.decodeVersionInformation = function (versionBits) {\r\n\t\tvar bestDifference = 0xffffffff;\r\n\t\tvar bestVersion = 0;\r\n\t\tfor (var i = 0; i < Version.VERSION_DECODE_INFO.length; i++) {\r\n\t\t\tvar targetVersion = Version.VERSION_DECODE_INFO[i];\r\n\t\t\t// Do the version info bits match exactly? done.\r\n\t\t\tif (targetVersion == versionBits) {\r\n\t\t\t\treturn this.getVersionForNumber(i + 7);\r\n\t\t\t}\r\n\t\t\t// Otherwise see if this is the closest to a real version info bit string\r\n\t\t\t// we have seen so far\r\n\t\t\tvar bitsDifference = FormatInformation.numBitsDiffering(versionBits, targetVersion);\r\n\t\t\tif (bitsDifference < bestDifference) {\r\n\t\t\t\tbestVersion = i + 7;\r\n\t\t\t\tbestDifference = bitsDifference;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// We can tolerate up to 3 bits of error since no two version info codewords will\r\n\t\t// differ in less than 4 bits.\r\n\t\tif (bestDifference <= 3) {\r\n\t\t\treturn this.getVersionForNumber(bestVersion);\r\n\t\t}\r\n\t\t// If we didn't find a close enough match, fail\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction buildVersions() {\r\n\t\treturn new Array(new Version(1, new Array(), new ECBlocks(7, new ECB(1, 19)), new ECBlocks(10, new ECB(1, 16)), new ECBlocks(13, new ECB(1, 13)), new ECBlocks(17, new ECB(1, 9))),\r\n\t\t\tnew Version(2, new Array(6, 18), new ECBlocks(10, new ECB(1, 34)), new ECBlocks(16, new ECB(1, 28)), new ECBlocks(22, new ECB(1, 22)), new ECBlocks(28, new ECB(1, 16))),\r\n\t\t\tnew Version(3, new Array(6, 22), new ECBlocks(15, new ECB(1, 55)), new ECBlocks(26, new ECB(1, 44)), new ECBlocks(18, new ECB(2, 17)), new ECBlocks(22, new ECB(2, 13))),\r\n\t\t\tnew Version(4, new Array(6, 26), new ECBlocks(20, new ECB(1, 80)), new ECBlocks(18, new ECB(2, 32)), new ECBlocks(26, new ECB(2, 24)), new ECBlocks(16, new ECB(4, 9))),\r\n\t\t\tnew Version(5, new Array(6, 30), new ECBlocks(26, new ECB(1, 108)), new ECBlocks(24, new ECB(2, 43)), new ECBlocks(18, new ECB(2, 15), new ECB(2, 16)), new ECBlocks(22, new ECB(2, 11), new ECB(2, 12))),\r\n\t\t\tnew Version(6, new Array(6, 34), new ECBlocks(18, new ECB(2, 68)), new ECBlocks(16, new ECB(4, 27)), new ECBlocks(24, new ECB(4, 19)), new ECBlocks(28, new ECB(4, 15))),\r\n\t\t\tnew Version(7, new Array(6, 22, 38), new ECBlocks(20, new ECB(2, 78)), new ECBlocks(18, new ECB(4, 31)), new ECBlocks(18, new ECB(2, 14), new ECB(4, 15)), new ECBlocks(26, new ECB(4, 13), new ECB(1, 14))),\r\n\t\t\tnew Version(8, new Array(6, 24, 42), new ECBlocks(24, new ECB(2, 97)), new ECBlocks(22, new ECB(2, 38), new ECB(2, 39)), new ECBlocks(22, new ECB(4, 18), new ECB(2, 19)), new ECBlocks(26, new ECB(4, 14), new ECB(2, 15))),\r\n\t\t\tnew Version(9, new Array(6, 26, 46), new ECBlocks(30, new ECB(2, 116)), new ECBlocks(22, new ECB(3, 36), new ECB(2, 37)), new ECBlocks(20, new ECB(4, 16), new ECB(4, 17)), new ECBlocks(24, new ECB(4, 12), new ECB(4, 13))),\r\n\t\t\tnew Version(10, new Array(6, 28, 50), new ECBlocks(18, new ECB(2, 68), new ECB(2, 69)), new ECBlocks(26, new ECB(4, 43), new ECB(1, 44)), new ECBlocks(24, new ECB(6, 19), new ECB(2, 20)), new ECBlocks(28, new ECB(6, 15), new ECB(2, 16))),\r\n\t\t\tnew Version(11, new Array(6, 30, 54), new ECBlocks(20, new ECB(4, 81)), new ECBlocks(30, new ECB(1, 50), new ECB(4, 51)), new ECBlocks(28, new ECB(4, 22), new ECB(4, 23)), new ECBlocks(24, new ECB(3, 12), new ECB(8, 13))),\r\n\t\t\tnew Version(12, new Array(6, 32, 58), new ECBlocks(24, new ECB(2, 92), new ECB(2, 93)), new ECBlocks(22, new ECB(6, 36), new ECB(2, 37)), new ECBlocks(26, new ECB(4, 20), new ECB(6, 21)), new ECBlocks(28, new ECB(7, 14), new ECB(4, 15))),\r\n\t\t\tnew Version(13, new Array(6, 34, 62), new ECBlocks(26, new ECB(4, 107)), new ECBlocks(22, new ECB(8, 37), new ECB(1, 38)), new ECBlocks(24, new ECB(8, 20), new ECB(4, 21)), new ECBlocks(22, new ECB(12, 11), new ECB(4, 12))),\r\n\t\t\tnew Version(14, new Array(6, 26, 46, 66), new ECBlocks(30, new ECB(3, 115), new ECB(1, 116)), new ECBlocks(24, new ECB(4, 40), new ECB(5, 41)), new ECBlocks(20, new ECB(11, 16), new ECB(5, 17)), new ECBlocks(24, new ECB(11, 12), new ECB(5, 13))),\r\n\t\t\tnew Version(15, new Array(6, 26, 48, 70), new ECBlocks(22, new ECB(5, 87), new ECB(1, 88)), new ECBlocks(24, new ECB(5, 41), new ECB(5, 42)), new ECBlocks(30, new ECB(5, 24), new ECB(7, 25)), new ECBlocks(24, new ECB(11, 12), new ECB(7, 13))),\r\n\t\t\tnew Version(16, new Array(6, 26, 50, 74), new ECBlocks(24, new ECB(5, 98), new ECB(1, 99)), new ECBlocks(28, new ECB(7, 45), new ECB(3, 46)), new ECBlocks(24, new ECB(15, 19), new ECB(2, 20)), new ECBlocks(30, new ECB(3, 15), new ECB(13, 16))),\r\n\t\t\tnew Version(17, new Array(6, 30, 54, 78), new ECBlocks(28, new ECB(1, 107), new ECB(5, 108)), new ECBlocks(28, new ECB(10, 46), new ECB(1, 47)), new ECBlocks(28, new ECB(1, 22), new ECB(15, 23)), new ECBlocks(28, new ECB(2, 14), new ECB(17, 15))),\r\n\t\t\tnew Version(18, new Array(6, 30, 56, 82), new ECBlocks(30, new ECB(5, 120), new ECB(1, 121)), new ECBlocks(26, new ECB(9, 43), new ECB(4, 44)), new ECBlocks(28, new ECB(17, 22), new ECB(1, 23)), new ECBlocks(28, new ECB(2, 14), new ECB(19, 15))),\r\n\t\t\tnew Version(19, new Array(6, 30, 58, 86), new ECBlocks(28, new ECB(3, 113), new ECB(4, 114)), new ECBlocks(26, new ECB(3, 44), new ECB(11, 45)), new ECBlocks(26, new ECB(17, 21), new ECB(4, 22)), new ECBlocks(26, new ECB(9, 13), new ECB(16, 14))),\r\n\t\t\tnew Version(20, new Array(6, 34, 62, 90), new ECBlocks(28, new ECB(3, 107), new ECB(5, 108)), new ECBlocks(26, new ECB(3, 41), new ECB(13, 42)), new ECBlocks(30, new ECB(15, 24), new ECB(5, 25)), new ECBlocks(28, new ECB(15, 15), new ECB(10, 16))),\r\n\t\t\tnew Version(21, new Array(6, 28, 50, 72, 94), new ECBlocks(28, new ECB(4, 116), new ECB(4, 117)), new ECBlocks(26, new ECB(17, 42)), new ECBlocks(28, new ECB(17, 22), new ECB(6, 23)), new ECBlocks(30, new ECB(19, 16), new ECB(6, 17))),\r\n\t\t\tnew Version(22, new Array(6, 26, 50, 74, 98), new ECBlocks(28, new ECB(2, 111), new ECB(7, 112)), new ECBlocks(28, new ECB(17, 46)), new ECBlocks(30, new ECB(7, 24), new ECB(16, 25)), new ECBlocks(24, new ECB(34, 13))),\r\n\t\t\tnew Version(23, new Array(6, 30, 54, 74, 102), new ECBlocks(30, new ECB(4, 121), new ECB(5, 122)), new ECBlocks(28, new ECB(4, 47), new ECB(14, 48)), new ECBlocks(30, new ECB(11, 24), new ECB(14, 25)), new ECBlocks(30, new ECB(16, 15), new ECB(14, 16))),\r\n\t\t\tnew Version(24, new Array(6, 28, 54, 80, 106), new ECBlocks(30, new ECB(6, 117), new ECB(4, 118)), new ECBlocks(28, new ECB(6, 45), new ECB(14, 46)), new ECBlocks(30, new ECB(11, 24), new ECB(16, 25)), new ECBlocks(30, new ECB(30, 16), new ECB(2, 17))),\r\n\t\t\tnew Version(25, new Array(6, 32, 58, 84, 110), new ECBlocks(26, new ECB(8, 106), new ECB(4, 107)), new ECBlocks(28, new ECB(8, 47), new ECB(13, 48)), new ECBlocks(30, new ECB(7, 24), new ECB(22, 25)), new ECBlocks(30, new ECB(22, 15), new ECB(13, 16))),\r\n\t\t\tnew Version(26, new Array(6, 30, 58, 86, 114), new ECBlocks(28, new ECB(10, 114), new ECB(2, 115)), new ECBlocks(28, new ECB(19, 46), new ECB(4, 47)), new ECBlocks(28, new ECB(28, 22), new ECB(6, 23)), new ECBlocks(30, new ECB(33, 16), new ECB(4, 17))),\r\n\t\t\tnew Version(27, new Array(6, 34, 62, 90, 118), new ECBlocks(30, new ECB(8, 122), new ECB(4, 123)), new ECBlocks(28, new ECB(22, 45), new ECB(3, 46)), new ECBlocks(30, new ECB(8, 23), new ECB(26, 24)), new ECBlocks(30, new ECB(12, 15), new ECB(28, 16))),\r\n\t\t\tnew Version(28, new Array(6, 26, 50, 74, 98, 122), new ECBlocks(30, new ECB(3, 117), new ECB(10, 118)), new ECBlocks(28, new ECB(3, 45), new ECB(23, 46)), new ECBlocks(30, new ECB(4, 24), new ECB(31, 25)), new ECBlocks(30, new ECB(11, 15), new ECB(31, 16))),\r\n\t\t\tnew Version(29, new Array(6, 30, 54, 78, 102, 126), new ECBlocks(30, new ECB(7, 116), new ECB(7, 117)), new ECBlocks(28, new ECB(21, 45), new ECB(7, 46)), new ECBlocks(30, new ECB(1, 23), new ECB(37, 24)), new ECBlocks(30, new ECB(19, 15), new ECB(26, 16))),\r\n\t\t\tnew Version(30, new Array(6, 26, 52, 78, 104, 130), new ECBlocks(30, new ECB(5, 115), new ECB(10, 116)), new ECBlocks(28, new ECB(19, 47), new ECB(10, 48)), new ECBlocks(30, new ECB(15, 24), new ECB(25, 25)), new ECBlocks(30, new ECB(23, 15), new ECB(25, 16))),\r\n\t\t\tnew Version(31, new Array(6, 30, 56, 82, 108, 134), new ECBlocks(30, new ECB(13, 115), new ECB(3, 116)), new ECBlocks(28, new ECB(2, 46), new ECB(29, 47)), new ECBlocks(30, new ECB(42, 24), new ECB(1, 25)), new ECBlocks(30, new ECB(23, 15), new ECB(28, 16))),\r\n\t\t\tnew Version(32, new Array(6, 34, 60, 86, 112, 138), new ECBlocks(30, new ECB(17, 115)), new ECBlocks(28, new ECB(10, 46), new ECB(23, 47)), new ECBlocks(30, new ECB(10, 24), new ECB(35, 25)), new ECBlocks(30, new ECB(19, 15), new ECB(35, 16))),\r\n\t\t\tnew Version(33, new Array(6, 30, 58, 86, 114, 142), new ECBlocks(30, new ECB(17, 115), new ECB(1, 116)), new ECBlocks(28, new ECB(14, 46), new ECB(21, 47)), new ECBlocks(30, new ECB(29, 24), new ECB(19, 25)), new ECBlocks(30, new ECB(11, 15), new ECB(46, 16))),\r\n\t\t\tnew Version(34, new Array(6, 34, 62, 90, 118, 146), new ECBlocks(30, new ECB(13, 115), new ECB(6, 116)), new ECBlocks(28, new ECB(14, 46), new ECB(23, 47)), new ECBlocks(30, new ECB(44, 24), new ECB(7, 25)), new ECBlocks(30, new ECB(59, 16), new ECB(1, 17))),\r\n\t\t\tnew Version(35, new Array(6, 30, 54, 78, 102, 126, 150), new ECBlocks(30, new ECB(12, 121), new ECB(7, 122)), new ECBlocks(28, new ECB(12, 47), new ECB(26, 48)), new ECBlocks(30, new ECB(39, 24), new ECB(14, 25)), new ECBlocks(30, new ECB(22, 15), new ECB(41, 16))),\r\n\t\t\tnew Version(36, new Array(6, 24, 50, 76, 102, 128, 154), new ECBlocks(30, new ECB(6, 121), new ECB(14, 122)), new ECBlocks(28, new ECB(6, 47), new ECB(34, 48)), new ECBlocks(30, new ECB(46, 24), new ECB(10, 25)), new ECBlocks(30, new ECB(2, 15), new ECB(64, 16))),\r\n\t\t\tnew Version(37, new Array(6, 28, 54, 80, 106, 132, 158), new ECBlocks(30, new ECB(17, 122), new ECB(4, 123)), new ECBlocks(28, new ECB(29, 46), new ECB(14, 47)), new ECBlocks(30, new ECB(49, 24), new ECB(10, 25)), new ECBlocks(30, new ECB(24, 15), new ECB(46, 16))),\r\n\t\t\tnew Version(38, new Array(6, 32, 58, 84, 110, 136, 162), new ECBlocks(30, new ECB(4, 122), new ECB(18, 123)), new ECBlocks(28, new ECB(13, 46), new ECB(32, 47)), new ECBlocks(30, new ECB(48, 24), new ECB(14, 25)), new ECBlocks(30, new ECB(42, 15), new ECB(32, 16))),\r\n\t\t\tnew Version(39, new Array(6, 26, 54, 82, 110, 138, 166), new ECBlocks(30, new ECB(20, 117), new ECB(4, 118)), new ECBlocks(28, new ECB(40, 47), new ECB(7, 48)), new ECBlocks(30, new ECB(43, 24), new ECB(22, 25)), new ECBlocks(30, new ECB(10, 15), new ECB(67, 16))),\r\n\t\t\tnew Version(40, new Array(6, 30, 58, 86, 114, 142, 170), new ECBlocks(30, new ECB(19, 118), new ECB(6, 119)), new ECBlocks(28, new ECB(18, 47), new ECB(31, 48)), new ECBlocks(30, new ECB(34, 24), new ECB(34, 25)), new ECBlocks(30, new ECB(20, 15), new ECB(61, 16))));\r\n\t}\r\n\r\n\r\n\r\n\tfunction PerspectiveTransform(a11, a21, a31, a12, a22, a32, a13, a23, a33) {\r\n\t\tthis.a11 = a11;\r\n\t\tthis.a12 = a12;\r\n\t\tthis.a13 = a13;\r\n\t\tthis.a21 = a21;\r\n\t\tthis.a22 = a22;\r\n\t\tthis.a23 = a23;\r\n\t\tthis.a31 = a31;\r\n\t\tthis.a32 = a32;\r\n\t\tthis.a33 = a33;\r\n\t\tthis.transformPoints1 = function (points) {\r\n\t\t\tvar max = points.length;\r\n\t\t\tvar a11 = this.a11;\r\n\t\t\tvar a12 = this.a12;\r\n\t\t\tvar a13 = this.a13;\r\n\t\t\tvar a21 = this.a21;\r\n\t\t\tvar a22 = this.a22;\r\n\t\t\tvar a23 = this.a23;\r\n\t\t\tvar a31 = this.a31;\r\n\t\t\tvar a32 = this.a32;\r\n\t\t\tvar a33 = this.a33;\r\n\t\t\tfor (var i = 0; i < max; i += 2) {\r\n\t\t\t\tvar x = points[i];\r\n\t\t\t\tvar y = points[i + 1];\r\n\t\t\t\tvar denominator = a13 * x + a23 * y + a33;\r\n\t\t\t\tpoints[i] = (a11 * x + a21 * y + a31) / denominator;\r\n\t\t\t\tpoints[i + 1] = (a12 * x + a22 * y + a32) / denominator;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.transformPoints2 = function (xValues, yValues) {\r\n\t\t\tvar n = xValues.length;\r\n\t\t\tfor (var i = 0; i < n; i++) {\r\n\t\t\t\tvar x = xValues[i];\r\n\t\t\t\tvar y = yValues[i];\r\n\t\t\t\tvar denominator = this.a13 * x + this.a23 * y + this.a33;\r\n\t\t\t\txValues[i] = (this.a11 * x + this.a21 * y + this.a31) / denominator;\r\n\t\t\t\tyValues[i] = (this.a12 * x + this.a22 * y + this.a32) / denominator;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.buildAdjoint = function () {\r\n\t\t\t// Adjoint is the transpose of the cofactor matrix:\r\n\t\t\treturn new PerspectiveTransform(this.a22 * this.a33 - this.a23 * this.a32, this.a23 * this.a31 - this.a21 * this.a33, this.a21 * this.a32 - this.a22 * this.a31, this.a13 * this.a32 - this.a12 * this.a33, this.a11 * this.a33 - this.a13 * this.a31, this.a12 * this.a31 - this.a11 * this.a32, this.a12 * this.a23 - this.a13 * this.a22, this.a13 * this.a21 - this.a11 * this.a23, this.a11 * this.a22 - this.a12 * this.a21);\r\n\t\t}\r\n\t\tthis.times = function (other) {\r\n\t\t\treturn new PerspectiveTransform(this.a11 * other.a11 + this.a21 * other.a12 + this.a31 * other.a13, this.a11 * other.a21 + this.a21 * other.a22 + this.a31 * other.a23, this.a11 * other.a31 + this.a21 * other.a32 + this.a31 * other.a33, this.a12 * other.a11 + this.a22 * other.a12 + this.a32 * other.a13, this.a12 * other.a21 + this.a22 * other.a22 + this.a32 * other.a23, this.a12 * other.a31 + this.a22 * other.a32 + this.a32 * other.a33, this.a13 * other.a11 + this.a23 * other.a12 + this.a33 * other.a13, this.a13 * other.a21 + this.a23 * other.a22 + this.a33 * other.a23, this.a13 * other.a31 + this.a23 * other.a32 + this.a33 * other.a33);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tPerspectiveTransform.quadrilateralToQuadrilateral = function (x0, y0, x1, y1, x2, y2, x3, y3, x0p, y0p, x1p, y1p, x2p, y2p, x3p, y3p) {\r\n\r\n\t\tvar qToS = this.quadrilateralToSquare(x0, y0, x1, y1, x2, y2, x3, y3);\r\n\t\tvar sToQ = this.squareToQuadrilateral(x0p, y0p, x1p, y1p, x2p, y2p, x3p, y3p);\r\n\t\treturn sToQ.times(qToS);\r\n\t}\r\n\r\n\tPerspectiveTransform.squareToQuadrilateral = function (x0, y0, x1, y1, x2, y2, x3, y3) {\r\n\t\tvar dy2 = y3 - y2;\r\n\t\tvar dy3 = y0 - y1 + y2 - y3;\r\n\t\tif (dy2 == 0.0 && dy3 == 0.0) {\r\n\t\t\treturn new PerspectiveTransform(x1 - x0, x2 - x1, x0, y1 - y0, y2 - y1, y0, 0.0, 0.0, 1.0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar dx1 = x1 - x2;\r\n\t\t\tvar dx2 = x3 - x2;\r\n\t\t\tvar dx3 = x0 - x1 + x2 - x3;\r\n\t\t\tvar dy1 = y1 - y2;\r\n\t\t\tvar denominator = dx1 * dy2 - dx2 * dy1;\r\n\t\t\tvar a13 = (dx3 * dy2 - dx2 * dy3) / denominator;\r\n\t\t\tvar a23 = (dx1 * dy3 - dx3 * dy1) / denominator;\r\n\t\t\treturn new PerspectiveTransform(x1 - x0 + a13 * x1, x3 - x0 + a23 * x3, x0, y1 - y0 + a13 * y1, y3 - y0 + a23 * y3, y0, a13, a23, 1.0);\r\n\t\t}\r\n\t}\r\n\r\n\tPerspectiveTransform.quadrilateralToSquare = function (x0, y0, x1, y1, x2, y2, x3, y3) {\r\n\t\t// Here, the adjoint serves as the inverse:\r\n\t\treturn this.squareToQuadrilateral(x0, y0, x1, y1, x2, y2, x3, y3).buildAdjoint();\r\n\t}\r\n\r\n\tfunction DetectorResult(bits, points) {\r\n\t\tthis.bits = bits;\r\n\t\tthis.points = points;\r\n\t}\r\n\r\n\r\n\tfunction Detector(image) {\r\n\t\tthis.image = image;\r\n\t\tthis.resultPointCallback = null;\r\n\r\n\t\tthis.sizeOfBlackWhiteBlackRun = function (fromX, fromY, toX, toY) {\r\n\t\t\t// Mild variant of Bresenham's algorithm;\r\n\t\t\t// see http://en.wikipedia.org/wiki/Bresenham's_line_algorithm\r\n\t\t\tvar steep = Math.abs(toY - fromY) > Math.abs(toX - fromX);\r\n\t\t\tif (steep) {\r\n\t\t\t\tvar temp = fromX;\r\n\t\t\t\tfromX = fromY;\r\n\t\t\t\tfromY = temp;\r\n\t\t\t\ttemp = toX;\r\n\t\t\t\ttoX = toY;\r\n\t\t\t\ttoY = temp;\r\n\t\t\t}\r\n\r\n\t\t\tvar dx = Math.abs(toX - fromX);\r\n\t\t\tvar dy = Math.abs(toY - fromY);\r\n\t\t\tvar error = - dx >> 1;\r\n\t\t\tvar ystep = fromY < toY ? 1 : - 1;\r\n\t\t\tvar xstep = fromX < toX ? 1 : - 1;\r\n\t\t\tvar state = 0; // In black pixels, looking for white, first or second time\r\n\t\t\tfor (var x = fromX, y = fromY; x != toX; x += xstep) {\r\n\r\n\t\t\t\tvar realX = steep ? y : x;\r\n\t\t\t\tvar realY = steep ? x : y;\r\n\t\t\t\tif (state == 1) {\r\n\t\t\t\t\t// In white pixels, looking for black\r\n\t\t\t\t\tif (this.image[realX + realY * qrcode.width]) {\r\n\t\t\t\t\t\tstate++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (!this.image[realX + realY * qrcode.width]) {\r\n\t\t\t\t\t\tstate++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (state == 3) {\r\n\t\t\t\t\t// Found black, white, black, and stumbled back onto white; done\r\n\t\t\t\t\tvar diffX = x - fromX;\r\n\t\t\t\t\tvar diffY = y - fromY;\r\n\t\t\t\t\treturn Math.sqrt((diffX * diffX + diffY * diffY));\r\n\t\t\t\t}\r\n\t\t\t\terror += dy;\r\n\t\t\t\tif (error > 0) {\r\n\t\t\t\t\tif (y == toY) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ty += ystep;\r\n\t\t\t\t\terror -= dx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar diffX2 = toX - fromX;\r\n\t\t\tvar diffY2 = toY - fromY;\r\n\t\t\treturn Math.sqrt((diffX2 * diffX2 + diffY2 * diffY2));\r\n\t\t}\r\n\r\n\r\n\t\tthis.sizeOfBlackWhiteBlackRunBothWays = function (fromX, fromY, toX, toY) {\r\n\r\n\t\t\tvar result = this.sizeOfBlackWhiteBlackRun(fromX, fromY, toX, toY);\r\n\r\n\t\t\t// Now count other way -- don't run off image though of course\r\n\t\t\tvar scale = 1.0;\r\n\t\t\tvar otherToX = fromX - (toX - fromX);\r\n\t\t\tif (otherToX < 0) {\r\n\t\t\t\tscale = fromX / (fromX - otherToX);\r\n\t\t\t\totherToX = 0;\r\n\t\t\t}\r\n\t\t\telse if (otherToX >= qrcode.width) {\r\n\t\t\t\tscale = (qrcode.width - 1 - fromX) / (otherToX - fromX);\r\n\t\t\t\totherToX = qrcode.width - 1;\r\n\t\t\t}\r\n\t\t\tvar otherToY = Math.floor(fromY - (toY - fromY) * scale);\r\n\r\n\t\t\tscale = 1.0;\r\n\t\t\tif (otherToY < 0) {\r\n\t\t\t\tscale = fromY / (fromY - otherToY);\r\n\t\t\t\totherToY = 0;\r\n\t\t\t}\r\n\t\t\telse if (otherToY >= qrcode.height) {\r\n\t\t\t\tscale = (qrcode.height - 1 - fromY) / (otherToY - fromY);\r\n\t\t\t\totherToY = qrcode.height - 1;\r\n\t\t\t}\r\n\t\t\totherToX = Math.floor(fromX + (otherToX - fromX) * scale);\r\n\r\n\t\t\tresult += this.sizeOfBlackWhiteBlackRun(fromX, fromY, otherToX, otherToY);\r\n\t\t\treturn result - 1.0; // -1 because we counted the middle pixel twice\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.calculateModuleSizeOneWay = function (pattern, otherPattern) {\r\n\t\t\tvar moduleSizeEst1 = this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(pattern.X), Math.floor(pattern.Y), Math.floor(otherPattern.X), Math.floor(otherPattern.Y));\r\n\t\t\tvar moduleSizeEst2 = this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(otherPattern.X), Math.floor(otherPattern.Y), Math.floor(pattern.X), Math.floor(pattern.Y));\r\n\t\t\tif (isNaN(moduleSizeEst1)) {\r\n\t\t\t\treturn moduleSizeEst2 / 7.0;\r\n\t\t\t}\r\n\t\t\tif (isNaN(moduleSizeEst2)) {\r\n\t\t\t\treturn moduleSizeEst1 / 7.0;\r\n\t\t\t}\r\n\t\t\t// Average them, and divide by 7 since we've counted the width of 3 black modules,\r\n\t\t\t// and 1 white and 1 black module on either side. Ergo, divide sum by 14.\r\n\t\t\treturn (moduleSizeEst1 + moduleSizeEst2) / 14.0;\r\n\t\t}\r\n\r\n\r\n\t\tthis.calculateModuleSize = function (topLeft, topRight, bottomLeft) {\r\n\t\t\t// Take the average\r\n\t\t\treturn (this.calculateModuleSizeOneWay(topLeft, topRight) + this.calculateModuleSizeOneWay(topLeft, bottomLeft)) / 2.0;\r\n\t\t}\r\n\r\n\t\tthis.distance = function (pattern1, pattern2) {\r\n\t\t\tvar xDiff = pattern1.X - pattern2.X;\r\n\t\t\tvar yDiff = pattern1.Y - pattern2.Y;\r\n\t\t\treturn Math.sqrt((xDiff * xDiff + yDiff * yDiff));\r\n\t\t}\r\n\t\tthis.computeDimension = function (topLeft, topRight, bottomLeft, moduleSize) {\r\n\r\n\t\t\tvar tltrCentersDimension = Math.round(this.distance(topLeft, topRight) / moduleSize);\r\n\t\t\tvar tlblCentersDimension = Math.round(this.distance(topLeft, bottomLeft) / moduleSize);\r\n\t\t\tvar dimension = ((tltrCentersDimension + tlblCentersDimension) >> 1) + 7;\r\n\t\t\tswitch (dimension & 0x03) {\r\n\r\n\t\t\t\t// mod 4\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tdimension++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t// 1? do nothing\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tdimension--;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tthrow \"Error\";\r\n\t\t\t}\r\n\t\t\treturn dimension;\r\n\t\t}\r\n\r\n\t\tthis.findAlignmentInRegion = function (overallEstModuleSize, estAlignmentX, estAlignmentY, allowanceFactor) {\r\n\t\t\t// Look for an alignment pattern (3 modules in size) around where it\r\n\t\t\t// should be\r\n\t\t\tvar allowance = Math.floor(allowanceFactor * overallEstModuleSize);\r\n\t\t\tvar alignmentAreaLeftX = Math.max(0, estAlignmentX - allowance);\r\n\t\t\tvar alignmentAreaRightX = Math.min(qrcode.width - 1, estAlignmentX + allowance);\r\n\t\t\tif (alignmentAreaRightX - alignmentAreaLeftX < overallEstModuleSize * 3) {\r\n\t\t\t\tthrow \"Error\";\r\n\t\t\t}\r\n\r\n\t\t\tvar alignmentAreaTopY = Math.max(0, estAlignmentY - allowance);\r\n\t\t\tvar alignmentAreaBottomY = Math.min(qrcode.height - 1, estAlignmentY + allowance);\r\n\r\n\t\t\tvar alignmentFinder = new AlignmentPatternFinder(this.image, alignmentAreaLeftX, alignmentAreaTopY, alignmentAreaRightX - alignmentAreaLeftX, alignmentAreaBottomY - alignmentAreaTopY, overallEstModuleSize, this.resultPointCallback);\r\n\t\t\treturn alignmentFinder.find();\r\n\t\t}\r\n\r\n\t\tthis.createTransform = function (topLeft, topRight, bottomLeft, alignmentPattern, dimension) {\r\n\t\t\tvar dimMinusThree = dimension - 3.5;\r\n\t\t\tvar bottomRightX;\r\n\t\t\tvar bottomRightY;\r\n\t\t\tvar sourceBottomRightX;\r\n\t\t\tvar sourceBottomRightY;\r\n\t\t\tif (alignmentPattern != null) {\r\n\t\t\t\tbottomRightX = alignmentPattern.X;\r\n\t\t\t\tbottomRightY = alignmentPattern.Y;\r\n\t\t\t\tsourceBottomRightX = sourceBottomRightY = dimMinusThree - 3.0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Don't have an alignment pattern, just make up the bottom-right point\r\n\t\t\t\tbottomRightX = (topRight.X - topLeft.X) + bottomLeft.X;\r\n\t\t\t\tbottomRightY = (topRight.Y - topLeft.Y) + bottomLeft.Y;\r\n\t\t\t\tsourceBottomRightX = sourceBottomRightY = dimMinusThree;\r\n\t\t\t}\r\n\r\n\t\t\tvar transform = PerspectiveTransform.quadrilateralToQuadrilateral(3.5, 3.5, dimMinusThree, 3.5, sourceBottomRightX, sourceBottomRightY, 3.5, dimMinusThree, topLeft.X, topLeft.Y, topRight.X, topRight.Y, bottomRightX, bottomRightY, bottomLeft.X, bottomLeft.Y);\r\n\r\n\t\t\treturn transform;\r\n\t\t}\r\n\r\n\t\tthis.sampleGrid = function (image, transform, dimension) {\r\n\r\n\t\t\tvar sampler = GridSampler;\r\n\t\t\treturn sampler.sampleGrid3(image, dimension, transform);\r\n\t\t}\r\n\r\n\t\tthis.processFinderPatternInfo = function (info) {\r\n\r\n\t\t\tvar topLeft = info.TopLeft;\r\n\t\t\tvar topRight = info.TopRight;\r\n\t\t\tvar bottomLeft = info.BottomLeft;\r\n\r\n\t\t\tvar moduleSize = this.calculateModuleSize(topLeft, topRight, bottomLeft);\r\n\t\t\tif (moduleSize < 1.0) {\r\n\t\t\t\tthrow \"Error\";\r\n\t\t\t}\r\n\t\t\tvar dimension = this.computeDimension(topLeft, topRight, bottomLeft, moduleSize);\r\n\t\t\tvar provisionalVersion = Version.getProvisionalVersionForDimension(dimension);\r\n\t\t\tvar modulesBetweenFPCenters = provisionalVersion.DimensionForVersion - 7;\r\n\r\n\t\t\tvar alignmentPattern = null;\r\n\t\t\t// Anything above version 1 has an alignment pattern\r\n\t\t\tif (provisionalVersion.AlignmentPatternCenters.length > 0) {\r\n\r\n\t\t\t\t// Guess where a \"bottom right\" finder pattern would have been\r\n\t\t\t\tvar bottomRightX = topRight.X - topLeft.X + bottomLeft.X;\r\n\t\t\t\tvar bottomRightY = topRight.Y - topLeft.Y + bottomLeft.Y;\r\n\r\n\t\t\t\t// Estimate that alignment pattern is closer by 3 modules\r\n\t\t\t\t// from \"bottom right\" to known top left location\r\n\t\t\t\tvar correctionToTopLeft = 1.0 - 3.0 / modulesBetweenFPCenters;\r\n\t\t\t\tvar estAlignmentX = Math.floor(topLeft.X + correctionToTopLeft * (bottomRightX - topLeft.X));\r\n\t\t\t\tvar estAlignmentY = Math.floor(topLeft.Y + correctionToTopLeft * (bottomRightY - topLeft.Y));\r\n\r\n\t\t\t\t// Kind of arbitrary -- expand search radius before giving up\r\n\t\t\t\tfor (var i = 4; i <= 16; i <<= 1) {\r\n\t\t\t\t\t//try\r\n\t\t\t\t\t//{\r\n\t\t\t\t\talignmentPattern = this.findAlignmentInRegion(moduleSize, estAlignmentX, estAlignmentY, i);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t//}\r\n\t\t\t\t\t//catch (re)\r\n\t\t\t\t\t//{\r\n\t\t\t\t\t// try next round\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t\t// If we didn't find alignment pattern... well try anyway without it\r\n\t\t\t}\r\n\r\n\t\t\tvar transform = this.createTransform(topLeft, topRight, bottomLeft, alignmentPattern, dimension);\r\n\r\n\t\t\tvar bits = this.sampleGrid(this.image, transform, dimension);\r\n\r\n\t\t\tvar points;\r\n\t\t\tif (alignmentPattern == null) {\r\n\t\t\t\tpoints = new Array(bottomLeft, topLeft, topRight);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tpoints = new Array(bottomLeft, topLeft, topRight, alignmentPattern);\r\n\t\t\t}\r\n\t\t\treturn new DetectorResult(bits, points);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.detect = function () {\r\n\t\t\tvar info = new FinderPatternFinder().findFinderPattern(this.image);\r\n\r\n\t\t\treturn this.processFinderPatternInfo(info);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tvar FORMAT_INFO_MASK_QR = 0x5412;\r\n\tvar FORMAT_INFO_DECODE_LOOKUP = new Array(new Array(0x5412, 0x00), new Array(0x5125, 0x01), new Array(0x5E7C, 0x02), new Array(0x5B4B, 0x03), new Array(0x45F9, 0x04), new Array(0x40CE, 0x05), new Array(0x4F97, 0x06), new Array(0x4AA0, 0x07), new Array(0x77C4, 0x08), new Array(0x72F3, 0x09), new Array(0x7DAA, 0x0A), new Array(0x789D, 0x0B), new Array(0x662F, 0x0C), new Array(0x6318, 0x0D), new Array(0x6C41, 0x0E), new Array(0x6976, 0x0F), new Array(0x1689, 0x10), new Array(0x13BE, 0x11), new Array(0x1CE7, 0x12), new Array(0x19D0, 0x13), new Array(0x0762, 0x14), new Array(0x0255, 0x15), new Array(0x0D0C, 0x16), new Array(0x083B, 0x17), new Array(0x355F, 0x18), new Array(0x3068, 0x19), new Array(0x3F31, 0x1A), new Array(0x3A06, 0x1B), new Array(0x24B4, 0x1C), new Array(0x2183, 0x1D), new Array(0x2EDA, 0x1E), new Array(0x2BED, 0x1F));\r\n\tvar BITS_SET_IN_HALF_BYTE = new Array(0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4);\r\n\r\n\r\n\tfunction FormatInformation(formatInfo) {\r\n\t\tthis.errorCorrectionLevel = ErrorCorrectionLevel.forBits((formatInfo >> 3) & 0x03);\r\n\t\tthis.dataMask = (formatInfo & 0x07);\r\n\r\n\t\tthis.__defineGetter__(\"ErrorCorrectionLevel\", function () {\r\n\t\t\treturn this.errorCorrectionLevel;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"DataMask\", function () {\r\n\t\t\treturn this.dataMask;\r\n\t\t});\r\n\t\tthis.GetHashCode = function () {\r\n\t\t\treturn (this.errorCorrectionLevel.ordinal() << 3) | this.dataMask;\r\n\t\t}\r\n\t\tthis.Equals = function (o) {\r\n\t\t\tvar other = o;\r\n\t\t\treturn this.errorCorrectionLevel == other.errorCorrectionLevel && this.dataMask == other.dataMask;\r\n\t\t}\r\n\t}\r\n\r\n\tFormatInformation.numBitsDiffering = function (a, b) {\r\n\t\ta ^= b; // a now has a 1 bit exactly where its bit differs with b's\r\n\t\t// Count bits set quickly with a series of lookups:\r\n\t\treturn BITS_SET_IN_HALF_BYTE[a & 0x0F] + BITS_SET_IN_HALF_BYTE[(URShift(a, 4) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 8) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 12) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 16) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 20) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 24) & 0x0F)] + BITS_SET_IN_HALF_BYTE[(URShift(a, 28) & 0x0F)];\r\n\t}\r\n\r\n\tFormatInformation.decodeFormatInformation = function (maskedFormatInfo) {\r\n\t\tvar formatInfo = FormatInformation.doDecodeFormatInformation(maskedFormatInfo);\r\n\t\tif (formatInfo != null) {\r\n\t\t\treturn formatInfo;\r\n\t\t}\r\n\t\t// Should return null, but, some QR codes apparently\r\n\t\t// do not mask this info. Try again by actually masking the pattern\r\n\t\t// first\r\n\t\treturn FormatInformation.doDecodeFormatInformation(maskedFormatInfo ^ FORMAT_INFO_MASK_QR);\r\n\t}\r\n\tFormatInformation.doDecodeFormatInformation = function (maskedFormatInfo) {\r\n\t\t// Find the int in FORMAT_INFO_DECODE_LOOKUP with fewest bits differing\r\n\t\tvar bestDifference = 0xffffffff;\r\n\t\tvar bestFormatInfo = 0;\r\n\t\tfor (var i = 0; i < FORMAT_INFO_DECODE_LOOKUP.length; i++) {\r\n\t\t\tvar decodeInfo = FORMAT_INFO_DECODE_LOOKUP[i];\r\n\t\t\tvar targetInfo = decodeInfo[0];\r\n\t\t\tif (targetInfo == maskedFormatInfo) {\r\n\t\t\t\t// Found an exact match\r\n\t\t\t\treturn new FormatInformation(decodeInfo[1]);\r\n\t\t\t}\r\n\t\t\tvar bitsDifference = this.numBitsDiffering(maskedFormatInfo, targetInfo);\r\n\t\t\tif (bitsDifference < bestDifference) {\r\n\t\t\t\tbestFormatInfo = decodeInfo[1];\r\n\t\t\t\tbestDifference = bitsDifference;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Hamming distance of the 32 masked codes is 7, by construction, so <= 3 bits\r\n\t\t// differing means we found a match\r\n\t\tif (bestDifference <= 3) {\r\n\t\t\treturn new FormatInformation(bestFormatInfo);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\r\n\tfunction ErrorCorrectionLevel(ordinal, bits, name) {\r\n\t\tthis.ordinal_Renamed_Field = ordinal;\r\n\t\tthis.bits = bits;\r\n\t\tthis.name = name;\r\n\t\tthis.__defineGetter__(\"Bits\", function () {\r\n\t\t\treturn this.bits;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Name\", function () {\r\n\t\t\treturn this.name;\r\n\t\t});\r\n\t\tthis.ordinal = function () {\r\n\t\t\treturn this.ordinal_Renamed_Field;\r\n\t\t}\r\n\t}\r\n\r\n\tErrorCorrectionLevel.forBits = function (bits) {\r\n\t\tif (bits < 0 || bits >= FOR_BITS.length) {\r\n\t\t\tthrow \"ArgumentException\";\r\n\t\t}\r\n\t\treturn FOR_BITS[bits];\r\n\t}\r\n\r\n\tvar L = new ErrorCorrectionLevel(0, 0x01, \"L\");\r\n\tvar M = new ErrorCorrectionLevel(1, 0x00, \"M\");\r\n\tvar Q = new ErrorCorrectionLevel(2, 0x03, \"Q\");\r\n\tvar H = new ErrorCorrectionLevel(3, 0x02, \"H\");\r\n\tvar FOR_BITS = new Array(M, L, H, Q);\r\n\r\n\r\n\r\n\tfunction BitMatrix(width, height) {\r\n\t\tif (!height)\r\n\t\t\theight = width;\r\n\t\tif (width < 1 || height < 1) {\r\n\t\t\tthrow \"Both dimensions must be greater than 0\";\r\n\t\t}\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tvar rowSize = width >> 5;\r\n\t\tif ((width & 0x1f) != 0) {\r\n\t\t\trowSize++;\r\n\t\t}\r\n\t\tthis.rowSize = rowSize;\r\n\t\tthis.bits = new Array(rowSize * height);\r\n\t\tfor (var i = 0; i < this.bits.length; i++)\r\n\t\t\tthis.bits[i] = 0;\r\n\r\n\t\tthis.__defineGetter__(\"Width\", function () {\r\n\t\t\treturn this.width;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Height\", function () {\r\n\t\t\treturn this.height;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Dimension\", function () {\r\n\t\t\tif (this.width != this.height) {\r\n\t\t\t\tthrow \"Can't call getDimension() on a non-square matrix\";\r\n\t\t\t}\r\n\t\t\treturn this.width;\r\n\t\t});\r\n\r\n\t\tthis.get_Renamed = function (x, y) {\r\n\t\t\tvar offset = y * this.rowSize + (x >> 5);\r\n\t\t\treturn ((URShift(this.bits[offset], (x & 0x1f))) & 1) != 0;\r\n\t\t}\r\n\t\tthis.set_Renamed = function (x, y) {\r\n\t\t\tvar offset = y * this.rowSize + (x >> 5);\r\n\t\t\tthis.bits[offset] |= 1 << (x & 0x1f);\r\n\t\t}\r\n\t\tthis.flip = function (x, y) {\r\n\t\t\tvar offset = y * this.rowSize + (x >> 5);\r\n\t\t\tthis.bits[offset] ^= 1 << (x & 0x1f);\r\n\t\t}\r\n\t\tthis.clear = function () {\r\n\t\t\tvar max = this.bits.length;\r\n\t\t\tfor (var i = 0; i < max; i++) {\r\n\t\t\t\tthis.bits[i] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setRegion = function (left, top, width, height) {\r\n\t\t\tif (top < 0 || left < 0) {\r\n\t\t\t\tthrow \"Left and top must be nonnegative\";\r\n\t\t\t}\r\n\t\t\tif (height < 1 || width < 1) {\r\n\t\t\t\tthrow \"Height and width must be at least 1\";\r\n\t\t\t}\r\n\t\t\tvar right = left + width;\r\n\t\t\tvar bottom = top + height;\r\n\t\t\tif (bottom > this.height || right > this.width) {\r\n\t\t\t\tthrow \"The region must fit inside the matrix\";\r\n\t\t\t}\r\n\t\t\tfor (var y = top; y < bottom; y++) {\r\n\t\t\t\tvar offset = y * this.rowSize;\r\n\t\t\t\tfor (var x = left; x < right; x++) {\r\n\t\t\t\t\tthis.bits[offset + (x >> 5)] |= 1 << (x & 0x1f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction DataBlock(numDataCodewords, codewords) {\r\n\t\tthis.numDataCodewords = numDataCodewords;\r\n\t\tthis.codewords = codewords;\r\n\r\n\t\tthis.__defineGetter__(\"NumDataCodewords\", function () {\r\n\t\t\treturn this.numDataCodewords;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Codewords\", function () {\r\n\t\t\treturn this.codewords;\r\n\t\t});\r\n\t}\r\n\r\n\tDataBlock.getDataBlocks = function (rawCodewords, version, ecLevel) {\r\n\r\n\t\tif (rawCodewords.length != version.TotalCodewords) {\r\n\t\t\tthrow \"ArgumentException\";\r\n\t\t}\r\n\r\n\t\t// Figure out the number and size of data blocks used by this version and\r\n\t\t// error correction level\r\n\t\tvar ecBlocks = version.getECBlocksForLevel(ecLevel);\r\n\r\n\t\t// First count the total number of data blocks\r\n\t\tvar totalBlocks = 0;\r\n\t\tvar ecBlockArray = ecBlocks.getECBlocks();\r\n\t\tfor (var i = 0; i < ecBlockArray.length; i++) {\r\n\t\t\ttotalBlocks += ecBlockArray[i].Count;\r\n\t\t}\r\n\r\n\t\t// Now establish DataBlocks of the appropriate size and number of data codewords\r\n\t\tvar result = new Array(totalBlocks);\r\n\t\tvar numResultBlocks = 0;\r\n\t\tfor (var j = 0; j < ecBlockArray.length; j++) {\r\n\t\t\tvar ecBlock = ecBlockArray[j];\r\n\t\t\tfor (var i = 0; i < ecBlock.Count; i++) {\r\n\t\t\t\tvar numDataCodewords = ecBlock.DataCodewords;\r\n\t\t\t\tvar numBlockCodewords = ecBlocks.ECCodewordsPerBlock + numDataCodewords;\r\n\t\t\t\tresult[numResultBlocks++] = new DataBlock(numDataCodewords, new Array(numBlockCodewords));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// All blocks have the same amount of data, except that the last n\r\n\t\t// (where n may be 0) have 1 more byte. Figure out where these start.\r\n\t\tvar shorterBlocksTotalCodewords = result[0].codewords.length;\r\n\t\tvar longerBlocksStartAt = result.length - 1;\r\n\t\twhile (longerBlocksStartAt >= 0) {\r\n\t\t\tvar numCodewords = result[longerBlocksStartAt].codewords.length;\r\n\t\t\tif (numCodewords == shorterBlocksTotalCodewords) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlongerBlocksStartAt--;\r\n\t\t}\r\n\t\tlongerBlocksStartAt++;\r\n\r\n\t\tvar shorterBlocksNumDataCodewords = shorterBlocksTotalCodewords - ecBlocks.ECCodewordsPerBlock;\r\n\t\t// The last elements of result may be 1 element longer;\r\n\t\t// first fill out as many elements as all of them have\r\n\t\tvar rawCodewordsOffset = 0;\r\n\t\tfor (var i = 0; i < shorterBlocksNumDataCodewords; i++) {\r\n\t\t\tfor (var j = 0; j < numResultBlocks; j++) {\r\n\t\t\t\tresult[j].codewords[i] = rawCodewords[rawCodewordsOffset++];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Fill out the last data block in the longer ones\r\n\t\tfor (var j = longerBlocksStartAt; j < numResultBlocks; j++) {\r\n\t\t\tresult[j].codewords[shorterBlocksNumDataCodewords] = rawCodewords[rawCodewordsOffset++];\r\n\t\t}\r\n\t\t// Now add in error correction blocks\r\n\t\tvar max = result[0].codewords.length;\r\n\t\tfor (var i = shorterBlocksNumDataCodewords; i < max; i++) {\r\n\t\t\tfor (var j = 0; j < numResultBlocks; j++) {\r\n\t\t\t\tvar iOffset = j < longerBlocksStartAt ? i : i + 1;\r\n\t\t\t\tresult[j].codewords[iOffset] = rawCodewords[rawCodewordsOffset++];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n\tfunction BitMatrixParser(bitMatrix) {\r\n\t\tvar dimension = bitMatrix.Dimension;\r\n\t\tif (dimension < 21 || (dimension & 0x03) != 1) {\r\n\t\t\tthrow \"Error BitMatrixParser\";\r\n\t\t}\r\n\t\tthis.bitMatrix = bitMatrix;\r\n\t\tthis.parsedVersion = null;\r\n\t\tthis.parsedFormatInfo = null;\r\n\r\n\t\tthis.copyBit = function (i, j, versionBits) {\r\n\t\t\treturn this.bitMatrix.get_Renamed(i, j) ? (versionBits << 1) | 0x1 : versionBits << 1;\r\n\t\t}\r\n\r\n\t\tthis.readFormatInformation = function () {\r\n\t\t\tif (this.parsedFormatInfo != null) {\r\n\t\t\t\treturn this.parsedFormatInfo;\r\n\t\t\t}\r\n\r\n\t\t\t// Read top-left format info bits\r\n\t\t\tvar formatInfoBits = 0;\r\n\t\t\tfor (var i = 0; i < 6; i++) {\r\n\t\t\t\tformatInfoBits = this.copyBit(i, 8, formatInfoBits);\r\n\t\t\t}\r\n\t\t\t// .. and skip a bit in the timing pattern ...\r\n\t\t\tformatInfoBits = this.copyBit(7, 8, formatInfoBits);\r\n\t\t\tformatInfoBits = this.copyBit(8, 8, formatInfoBits);\r\n\t\t\tformatInfoBits = this.copyBit(8, 7, formatInfoBits);\r\n\t\t\t// .. and skip a bit in the timing pattern ...\r\n\t\t\tfor (var j = 5; j >= 0; j--) {\r\n\t\t\t\tformatInfoBits = this.copyBit(8, j, formatInfoBits);\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedFormatInfo = FormatInformation.decodeFormatInformation(formatInfoBits);\r\n\t\t\tif (this.parsedFormatInfo != null) {\r\n\t\t\t\treturn this.parsedFormatInfo;\r\n\t\t\t}\r\n\r\n\t\t\t// Hmm, failed. Try the top-right/bottom-left pattern\r\n\t\t\tvar dimension = this.bitMatrix.Dimension;\r\n\t\t\tformatInfoBits = 0;\r\n\t\t\tvar iMin = dimension - 8;\r\n\t\t\tfor (var i = dimension - 1; i >= iMin; i--) {\r\n\t\t\t\tformatInfoBits = this.copyBit(i, 8, formatInfoBits);\r\n\t\t\t}\r\n\t\t\tfor (var j = dimension - 7; j < dimension; j++) {\r\n\t\t\t\tformatInfoBits = this.copyBit(8, j, formatInfoBits);\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedFormatInfo = FormatInformation.decodeFormatInformation(formatInfoBits);\r\n\t\t\tif (this.parsedFormatInfo != null) {\r\n\t\t\t\treturn this.parsedFormatInfo;\r\n\t\t\t}\r\n\t\t\tthrow \"Error readFormatInformation\";\r\n\t\t}\r\n\t\tthis.readVersion = function () {\r\n\r\n\t\t\tif (this.parsedVersion != null) {\r\n\t\t\t\treturn this.parsedVersion;\r\n\t\t\t}\r\n\r\n\t\t\tvar dimension = this.bitMatrix.Dimension;\r\n\r\n\t\t\tvar provisionalVersion = (dimension - 17) >> 2;\r\n\t\t\tif (provisionalVersion <= 6) {\r\n\t\t\t\treturn Version.getVersionForNumber(provisionalVersion);\r\n\t\t\t}\r\n\r\n\t\t\t// Read top-right version info: 3 wide by 6 tall\r\n\t\t\tvar versionBits = 0;\r\n\t\t\tvar ijMin = dimension - 11;\r\n\t\t\tfor (var j = 5; j >= 0; j--) {\r\n\t\t\t\tfor (var i = dimension - 9; i >= ijMin; i--) {\r\n\t\t\t\t\tversionBits = this.copyBit(i, j, versionBits);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedVersion = Version.decodeVersionInformation(versionBits);\r\n\t\t\tif (this.parsedVersion != null && this.parsedVersion.DimensionForVersion == dimension) {\r\n\t\t\t\treturn this.parsedVersion;\r\n\t\t\t}\r\n\r\n\t\t\t// Hmm, failed. Try bottom left: 6 wide by 3 tall\r\n\t\t\tversionBits = 0;\r\n\t\t\tfor (var i = 5; i >= 0; i--) {\r\n\t\t\t\tfor (var j = dimension - 9; j >= ijMin; j--) {\r\n\t\t\t\t\tversionBits = this.copyBit(i, j, versionBits);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.parsedVersion = Version.decodeVersionInformation(versionBits);\r\n\t\t\tif (this.parsedVersion != null && this.parsedVersion.DimensionForVersion == dimension) {\r\n\t\t\t\treturn this.parsedVersion;\r\n\t\t\t}\r\n\t\t\tthrow \"Error readVersion\";\r\n\t\t}\r\n\t\tthis.readCodewords = function () {\r\n\r\n\t\t\tvar formatInfo = this.readFormatInformation();\r\n\t\t\tvar version = this.readVersion();\r\n\r\n\t\t\t// Get the data mask for the format used in this QR Code. This will exclude\r\n\t\t\t// some bits from reading as we wind through the bit matrix.\r\n\t\t\tvar dataMask = DataMask.forReference(formatInfo.DataMask);\r\n\t\t\tvar dimension = this.bitMatrix.Dimension;\r\n\t\t\tdataMask.unmaskBitMatrix(this.bitMatrix, dimension);\r\n\r\n\t\t\tvar functionPattern = version.buildFunctionPattern();\r\n\r\n\t\t\tvar readingUp = true;\r\n\t\t\tvar result = new Array(version.TotalCodewords);\r\n\t\t\tvar resultOffset = 0;\r\n\t\t\tvar currentByte = 0;\r\n\t\t\tvar bitsRead = 0;\r\n\t\t\t// Read columns in pairs, from right to left\r\n\t\t\tfor (var j = dimension - 1; j > 0; j -= 2) {\r\n\t\t\t\tif (j == 6) {\r\n\t\t\t\t\t// Skip whole column with vertical alignment pattern;\r\n\t\t\t\t\t// saves time and makes the other code proceed more cleanly\r\n\t\t\t\t\tj--;\r\n\t\t\t\t}\r\n\t\t\t\t// Read alternatingly from bottom to top then top to bottom\r\n\t\t\t\tfor (var count = 0; count < dimension; count++) {\r\n\t\t\t\t\tvar i = readingUp ? dimension - 1 - count : count;\r\n\t\t\t\t\tfor (var col = 0; col < 2; col++) {\r\n\t\t\t\t\t\t// Ignore bits covered by the function pattern\r\n\t\t\t\t\t\tif (!functionPattern.get_Renamed(j - col, i)) {\r\n\t\t\t\t\t\t\t// Read a bit\r\n\t\t\t\t\t\t\tbitsRead++;\r\n\t\t\t\t\t\t\tcurrentByte <<= 1;\r\n\t\t\t\t\t\t\tif (this.bitMatrix.get_Renamed(j - col, i)) {\r\n\t\t\t\t\t\t\t\tcurrentByte |= 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// If we've made a whole byte, save it off\r\n\t\t\t\t\t\t\tif (bitsRead == 8) {\r\n\t\t\t\t\t\t\t\tresult[resultOffset++] = currentByte;\r\n\t\t\t\t\t\t\t\tbitsRead = 0;\r\n\t\t\t\t\t\t\t\tcurrentByte = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treadingUp ^= true; // readingUp = !readingUp; // switch directions\r\n\t\t\t}\r\n\t\t\tif (resultOffset != version.TotalCodewords) {\r\n\t\t\t\tthrow \"Error readCodewords\";\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tvar DataMask = {};\r\n\r\n\tDataMask.forReference = function (reference) {\r\n\t\tif (reference < 0 || reference > 7) {\r\n\t\t\tthrow \"System.ArgumentException\";\r\n\t\t}\r\n\t\treturn DataMask.DATA_MASKS[reference];\r\n\t}\r\n\r\n\tfunction DataMask000() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn ((i + j) & 0x01) == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask001() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn (i & 0x01) == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask010() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn j % 3 == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask011() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn (i + j) % 3 == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask100() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn (((URShift(i, 1)) + (j / 3)) & 0x01) == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask101() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\tvar temp = i * j;\r\n\t\t\treturn (temp & 0x01) + (temp % 3) == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DataMask110() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\tvar temp = i * j;\r\n\t\t\treturn (((temp & 0x01) + (temp % 3)) & 0x01) == 0;\r\n\t\t}\r\n\t}\r\n\tfunction DataMask111() {\r\n\t\tthis.unmaskBitMatrix = function (bits, dimension) {\r\n\t\t\tfor (var i = 0; i < dimension; i++) {\r\n\t\t\t\tfor (var j = 0; j < dimension; j++) {\r\n\t\t\t\t\tif (this.isMasked(i, j)) {\r\n\t\t\t\t\t\tbits.flip(j, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isMasked = function (i, j) {\r\n\t\t\treturn ((((i + j) & 0x01) + ((i * j) % 3)) & 0x01) == 0;\r\n\t\t}\r\n\t}\r\n\r\n\tDataMask.DATA_MASKS = new Array(new DataMask000(), new DataMask001(), new DataMask010(), new DataMask011(), new DataMask100(), new DataMask101(), new DataMask110(), new DataMask111());\r\n\r\n\r\n\r\n\tfunction ReedSolomonDecoder(field) {\r\n\t\tthis.field = field;\r\n\t\tthis.decode = function (received, twoS) {\r\n\t\t\tvar poly = new GF256Poly(this.field, received);\r\n\t\t\tvar syndromeCoefficients = new Array(twoS);\r\n\t\t\tfor (var i = 0; i < syndromeCoefficients.length; i++)syndromeCoefficients[i] = 0;\r\n\t\t\tvar dataMatrix = false;//this.field.Equals(GF256.DATA_MATRIX_FIELD);\r\n\t\t\tvar noError = true;\r\n\t\t\tfor (var i = 0; i < twoS; i++) {\r\n\t\t\t\t// Thanks to sanfordsquires for this fix:\r\n\t\t\t\tvar evalu = poly.evaluateAt(this.field.exp(dataMatrix ? i + 1 : i));\r\n\t\t\t\tsyndromeCoefficients[syndromeCoefficients.length - 1 - i] = evalu;\r\n\t\t\t\tif (evalu != 0) {\r\n\t\t\t\t\tnoError = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (noError) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar syndrome = new GF256Poly(this.field, syndromeCoefficients);\r\n\t\t\tvar sigmaOmega = this.runEuclideanAlgorithm(this.field.buildMonomial(twoS, 1), syndrome, twoS);\r\n\t\t\tvar sigma = sigmaOmega[0];\r\n\t\t\tvar omega = sigmaOmega[1];\r\n\t\t\tvar errorLocations = this.findErrorLocations(sigma);\r\n\t\t\tvar errorMagnitudes = this.findErrorMagnitudes(omega, errorLocations, dataMatrix);\r\n\t\t\tfor (var i = 0; i < errorLocations.length; i++) {\r\n\t\t\t\tvar position = received.length - 1 - this.field.log(errorLocations[i]);\r\n\t\t\t\tif (position < 0) {\r\n\t\t\t\t\tthrow \"ReedSolomonException Bad error location\";\r\n\t\t\t\t}\r\n\t\t\t\treceived[position] = GF256.addOrSubtract(received[position], errorMagnitudes[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.runEuclideanAlgorithm = function (a, b, R) {\r\n\t\t\t// Assume a's degree is >= b's\r\n\t\t\tif (a.Degree < b.Degree) {\r\n\t\t\t\tvar temp = a;\r\n\t\t\t\ta = b;\r\n\t\t\t\tb = temp;\r\n\t\t\t}\r\n\r\n\t\t\tvar rLast = a;\r\n\t\t\tvar r = b;\r\n\t\t\tvar sLast = this.field.One;\r\n\t\t\tvar s = this.field.Zero;\r\n\t\t\tvar tLast = this.field.Zero;\r\n\t\t\tvar t = this.field.One;\r\n\r\n\t\t\t// Run Euclidean algorithm until r's degree is less than R/2\r\n\t\t\twhile (r.Degree >= Math.floor(R / 2)) {\r\n\t\t\t\tvar rLastLast = rLast;\r\n\t\t\t\tvar sLastLast = sLast;\r\n\t\t\t\tvar tLastLast = tLast;\r\n\t\t\t\trLast = r;\r\n\t\t\t\tsLast = s;\r\n\t\t\t\ttLast = t;\r\n\r\n\t\t\t\t// Divide rLastLast by rLast, with quotient in q and remainder in r\r\n\t\t\t\tif (rLast.Zero) {\r\n\t\t\t\t\t// Oops, Euclidean algorithm already terminated?\r\n\t\t\t\t\tthrow \"r_{i-1} was zero\";\r\n\t\t\t\t}\r\n\t\t\t\tr = rLastLast;\r\n\t\t\t\tvar q = this.field.Zero;\r\n\t\t\t\tvar denominatorLeadingTerm = rLast.getCoefficient(rLast.Degree);\r\n\t\t\t\tvar dltInverse = this.field.inverse(denominatorLeadingTerm);\r\n\t\t\t\twhile (r.Degree >= rLast.Degree && !r.Zero) {\r\n\t\t\t\t\tvar degreeDiff = r.Degree - rLast.Degree;\r\n\t\t\t\t\tvar scale = this.field.multiply(r.getCoefficient(r.Degree), dltInverse);\r\n\t\t\t\t\tq = q.addOrSubtract(this.field.buildMonomial(degreeDiff, scale));\r\n\t\t\t\t\tr = r.addOrSubtract(rLast.multiplyByMonomial(degreeDiff, scale));\r\n\t\t\t\t\t//r.EXE();\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts = q.multiply1(sLast).addOrSubtract(sLastLast);\r\n\t\t\t\tt = q.multiply1(tLast).addOrSubtract(tLastLast);\r\n\t\t\t}\r\n\r\n\t\t\tvar sigmaTildeAtZero = t.getCoefficient(0);\r\n\t\t\tif (sigmaTildeAtZero == 0) {\r\n\t\t\t\tthrow \"ReedSolomonException sigmaTilde(0) was zero\";\r\n\t\t\t}\r\n\r\n\t\t\tvar inverse = this.field.inverse(sigmaTildeAtZero);\r\n\t\t\tvar sigma = t.multiply2(inverse);\r\n\t\t\tvar omega = r.multiply2(inverse);\r\n\t\t\treturn new Array(sigma, omega);\r\n\t\t}\r\n\t\tthis.findErrorLocations = function (errorLocator) {\r\n\t\t\t// This is a direct application of Chien's search\r\n\t\t\tvar numErrors = errorLocator.Degree;\r\n\t\t\tif (numErrors == 1) {\r\n\t\t\t\t// shortcut\r\n\t\t\t\treturn new Array(errorLocator.getCoefficient(1));\r\n\t\t\t}\r\n\t\t\tvar result = new Array(numErrors);\r\n\t\t\tvar e = 0;\r\n\t\t\tfor (var i = 1; i < 256 && e < numErrors; i++) {\r\n\t\t\t\tif (errorLocator.evaluateAt(i) == 0) {\r\n\t\t\t\t\tresult[e] = this.field.inverse(i);\r\n\t\t\t\t\te++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e != numErrors) {\r\n\t\t\t\tthrow \"Error locator degree does not match number of roots\";\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tthis.findErrorMagnitudes = function (errorEvaluator, errorLocations, dataMatrix) {\r\n\t\t\t// This is directly applying Forney's Formula\r\n\t\t\tvar s = errorLocations.length;\r\n\t\t\tvar result = new Array(s);\r\n\t\t\tfor (var i = 0; i < s; i++) {\r\n\t\t\t\tvar xiInverse = this.field.inverse(errorLocations[i]);\r\n\t\t\t\tvar denominator = 1;\r\n\t\t\t\tfor (var j = 0; j < s; j++) {\r\n\t\t\t\t\tif (i != j) {\r\n\t\t\t\t\t\tdenominator = this.field.multiply(denominator, GF256.addOrSubtract(1, this.field.multiply(errorLocations[j], xiInverse)));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresult[i] = this.field.multiply(errorEvaluator.evaluateAt(xiInverse), this.field.inverse(denominator));\r\n\t\t\t\t// Thanks to sanfordsquires for this fix:\r\n\t\t\t\tif (dataMatrix) {\r\n\t\t\t\t\tresult[i] = this.field.multiply(result[i], xiInverse);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tfunction GF256Poly(field, coefficients) {\r\n\t\tif (coefficients == null || coefficients.length == 0) {\r\n\t\t\tthrow \"System.ArgumentException\";\r\n\t\t}\r\n\t\tthis.field = field;\r\n\t\tvar coefficientsLength = coefficients.length;\r\n\t\tif (coefficientsLength > 1 && coefficients[0] == 0) {\r\n\t\t\t// Leading term must be non-zero for anything except the constant polynomial \"0\"\r\n\t\t\tvar firstNonZero = 1;\r\n\t\t\twhile (firstNonZero < coefficientsLength && coefficients[firstNonZero] == 0) {\r\n\t\t\t\tfirstNonZero++;\r\n\t\t\t}\r\n\t\t\tif (firstNonZero == coefficientsLength) {\r\n\t\t\t\tthis.coefficients = field.Zero.coefficients;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.coefficients = new Array(coefficientsLength - firstNonZero);\r\n\t\t\t\tfor (var i = 0; i < this.coefficients.length; i++)this.coefficients[i] = 0;\r\n\t\t\t\t//Array.Copy(coefficients, firstNonZero, this.coefficients, 0, this.coefficients.length);\r\n\t\t\t\tfor (var ci = 0; ci < this.coefficients.length; ci++)this.coefficients[ci] = coefficients[firstNonZero + ci];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.coefficients = coefficients;\r\n\t\t}\r\n\r\n\t\tthis.__defineGetter__(\"Zero\", function () {\r\n\t\t\treturn this.coefficients[0] == 0;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Degree\", function () {\r\n\t\t\treturn this.coefficients.length - 1;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Coefficients\", function () {\r\n\t\t\treturn this.coefficients;\r\n\t\t});\r\n\r\n\t\tthis.getCoefficient = function (degree) {\r\n\t\t\treturn this.coefficients[this.coefficients.length - 1 - degree];\r\n\t\t}\r\n\r\n\t\tthis.evaluateAt = function (a) {\r\n\t\t\tif (a == 0) {\r\n\t\t\t\t// Just return the x^0 coefficient\r\n\t\t\t\treturn this.getCoefficient(0);\r\n\t\t\t}\r\n\t\t\tvar size = this.coefficients.length;\r\n\t\t\tif (a == 1) {\r\n\t\t\t\t// Just the sum of the coefficients\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\t\t\tresult = GF256.addOrSubtract(result, this.coefficients[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tvar result2 = this.coefficients[0];\r\n\t\t\tfor (var i = 1; i < size; i++) {\r\n\t\t\t\tresult2 = GF256.addOrSubtract(this.field.multiply(a, result2), this.coefficients[i]);\r\n\t\t\t}\r\n\t\t\treturn result2;\r\n\t\t}\r\n\r\n\t\tthis.addOrSubtract = function (other) {\r\n\t\t\tif (this.field != other.field) {\r\n\t\t\t\tthrow \"GF256Polys do not have same GF256 field\";\r\n\t\t\t}\r\n\t\t\tif (this.Zero) {\r\n\t\t\t\treturn other;\r\n\t\t\t}\r\n\t\t\tif (other.Zero) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar smallerCoefficients = this.coefficients;\r\n\t\t\tvar largerCoefficients = other.coefficients;\r\n\t\t\tif (smallerCoefficients.length > largerCoefficients.length) {\r\n\t\t\t\tvar temp = smallerCoefficients;\r\n\t\t\t\tsmallerCoefficients = largerCoefficients;\r\n\t\t\t\tlargerCoefficients = temp;\r\n\t\t\t}\r\n\t\t\tvar sumDiff = new Array(largerCoefficients.length);\r\n\t\t\tvar lengthDiff = largerCoefficients.length - smallerCoefficients.length;\r\n\t\t\t// Copy high-order terms only found in higher-degree polynomial's coefficients\r\n\t\t\t//Array.Copy(largerCoefficients, 0, sumDiff, 0, lengthDiff);\r\n\t\t\tfor (var ci = 0; ci < lengthDiff; ci++)sumDiff[ci] = largerCoefficients[ci];\r\n\r\n\t\t\tfor (var i = lengthDiff; i < largerCoefficients.length; i++) {\r\n\t\t\t\tsumDiff[i] = GF256.addOrSubtract(smallerCoefficients[i - lengthDiff], largerCoefficients[i]);\r\n\t\t\t}\r\n\r\n\t\t\treturn new GF256Poly(field, sumDiff);\r\n\t\t}\r\n\t\tthis.multiply1 = function (other) {\r\n\t\t\tif (this.field != other.field) {\r\n\t\t\t\tthrow \"GF256Polys do not have same GF256 field\";\r\n\t\t\t}\r\n\t\t\tif (this.Zero || other.Zero) {\r\n\t\t\t\treturn this.field.Zero;\r\n\t\t\t}\r\n\t\t\tvar aCoefficients = this.coefficients;\r\n\t\t\tvar aLength = aCoefficients.length;\r\n\t\t\tvar bCoefficients = other.coefficients;\r\n\t\t\tvar bLength = bCoefficients.length;\r\n\t\t\tvar product = new Array(aLength + bLength - 1);\r\n\t\t\tfor (var i = 0; i < aLength; i++) {\r\n\t\t\t\tvar aCoeff = aCoefficients[i];\r\n\t\t\t\tfor (var j = 0; j < bLength; j++) {\r\n\t\t\t\t\tproduct[i + j] = GF256.addOrSubtract(product[i + j], this.field.multiply(aCoeff, bCoefficients[j]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new GF256Poly(this.field, product);\r\n\t\t}\r\n\t\tthis.multiply2 = function (scalar) {\r\n\t\t\tif (scalar == 0) {\r\n\t\t\t\treturn this.field.Zero;\r\n\t\t\t}\r\n\t\t\tif (scalar == 1) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tvar size = this.coefficients.length;\r\n\t\t\tvar product = new Array(size);\r\n\t\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\t\tproduct[i] = this.field.multiply(this.coefficients[i], scalar);\r\n\t\t\t}\r\n\t\t\treturn new GF256Poly(this.field, product);\r\n\t\t}\r\n\t\tthis.multiplyByMonomial = function (degree, coefficient) {\r\n\t\t\tif (degree < 0) {\r\n\t\t\t\tthrow \"System.ArgumentException\";\r\n\t\t\t}\r\n\t\t\tif (coefficient == 0) {\r\n\t\t\t\treturn this.field.Zero;\r\n\t\t\t}\r\n\t\t\tvar size = this.coefficients.length;\r\n\t\t\tvar product = new Array(size + degree);\r\n\t\t\tfor (var i = 0; i < product.length; i++)product[i] = 0;\r\n\t\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\t\tproduct[i] = this.field.multiply(this.coefficients[i], coefficient);\r\n\t\t\t}\r\n\t\t\treturn new GF256Poly(this.field, product);\r\n\t\t}\r\n\t\tthis.divide = function (other) {\r\n\t\t\tif (this.field != other.field) {\r\n\t\t\t\tthrow \"GF256Polys do not have same GF256 field\";\r\n\t\t\t}\r\n\t\t\tif (other.Zero) {\r\n\t\t\t\tthrow \"Divide by 0\";\r\n\t\t\t}\r\n\r\n\t\t\tvar quotient = this.field.Zero;\r\n\t\t\tvar remainder = this;\r\n\r\n\t\t\tvar denominatorLeadingTerm = other.getCoefficient(other.Degree);\r\n\t\t\tvar inverseDenominatorLeadingTerm = this.field.inverse(denominatorLeadingTerm);\r\n\r\n\t\t\twhile (remainder.Degree >= other.Degree && !remainder.Zero) {\r\n\t\t\t\tvar degreeDifference = remainder.Degree - other.Degree;\r\n\t\t\t\tvar scale = this.field.multiply(remainder.getCoefficient(remainder.Degree), inverseDenominatorLeadingTerm);\r\n\t\t\t\tvar term = other.multiplyByMonomial(degreeDifference, scale);\r\n\t\t\t\tvar iterationQuotient = this.field.buildMonomial(degreeDifference, scale);\r\n\t\t\t\tquotient = quotient.addOrSubtract(iterationQuotient);\r\n\t\t\t\tremainder = remainder.addOrSubtract(term);\r\n\t\t\t}\r\n\r\n\t\t\treturn new Array(quotient, remainder);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tfunction GF256(primitive) {\r\n\t\tthis.expTable = new Array(256);\r\n\t\tthis.logTable = new Array(256);\r\n\t\tvar x = 1;\r\n\t\tfor (var i = 0; i < 256; i++) {\r\n\t\t\tthis.expTable[i] = x;\r\n\t\t\tx <<= 1; // x = x * 2; we're assuming the generator alpha is 2\r\n\t\t\tif (x >= 0x100) {\r\n\t\t\t\tx ^= primitive;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < 255; i++) {\r\n\t\t\tthis.logTable[this.expTable[i]] = i;\r\n\t\t}\r\n\t\t// logTable[0] == 0 but this should never be used\r\n\t\tvar at0 = new Array(1); at0[0] = 0;\r\n\t\tthis.zero = new GF256Poly(this, new Array(at0));\r\n\t\tvar at1 = new Array(1); at1[0] = 1;\r\n\t\tthis.one = new GF256Poly(this, new Array(at1));\r\n\r\n\t\tthis.__defineGetter__(\"Zero\", function () {\r\n\t\t\treturn this.zero;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"One\", function () {\r\n\t\t\treturn this.one;\r\n\t\t});\r\n\t\tthis.buildMonomial = function (degree, coefficient) {\r\n\t\t\tif (degree < 0) {\r\n\t\t\t\tthrow \"System.ArgumentException\";\r\n\t\t\t}\r\n\t\t\tif (coefficient == 0) {\r\n\t\t\t\treturn this.zero;\r\n\t\t\t}\r\n\t\t\tvar coefficients = new Array(degree + 1);\r\n\t\t\tfor (var i = 0; i < coefficients.length; i++)coefficients[i] = 0;\r\n\t\t\tcoefficients[0] = coefficient;\r\n\t\t\treturn new GF256Poly(this, coefficients);\r\n\t\t}\r\n\t\tthis.exp = function (a) {\r\n\t\t\treturn this.expTable[a];\r\n\t\t}\r\n\t\tthis.log = function (a) {\r\n\t\t\tif (a == 0) {\r\n\t\t\t\tthrow \"System.ArgumentException\";\r\n\t\t\t}\r\n\t\t\treturn this.logTable[a];\r\n\t\t}\r\n\t\tthis.inverse = function (a) {\r\n\t\t\tif (a == 0) {\r\n\t\t\t\tthrow \"System.ArithmeticException\";\r\n\t\t\t}\r\n\t\t\treturn this.expTable[255 - this.logTable[a]];\r\n\t\t}\r\n\t\tthis.multiply = function (a, b) {\r\n\t\t\tif (a == 0 || b == 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif (a == 1) {\r\n\t\t\t\treturn b;\r\n\t\t\t}\r\n\t\t\tif (b == 1) {\r\n\t\t\t\treturn a;\r\n\t\t\t}\r\n\t\t\treturn this.expTable[(this.logTable[a] + this.logTable[b]) % 255];\r\n\t\t}\r\n\t}\r\n\r\n\tGF256.QR_CODE_FIELD = new GF256(0x011D);\r\n\tGF256.DATA_MATRIX_FIELD = new GF256(0x012D);\r\n\r\n\tGF256.addOrSubtract = function (a, b) {\r\n\t\treturn a ^ b;\r\n\t}\r\n\r\n\r\n\tvar Decoder = {};\r\n\tDecoder.rsDecoder = new ReedSolomonDecoder(GF256.QR_CODE_FIELD);\r\n\r\n\tDecoder.correctErrors = function (codewordBytes, numDataCodewords) {\r\n\t\tvar numCodewords = codewordBytes.length;\r\n\t\t// First read into an array of ints\r\n\t\tvar codewordsInts = new Array(numCodewords);\r\n\t\tfor (var i = 0; i < numCodewords; i++) {\r\n\t\t\tcodewordsInts[i] = codewordBytes[i] & 0xFF;\r\n\t\t}\r\n\t\tvar numECCodewords = codewordBytes.length - numDataCodewords;\r\n\t\ttry {\r\n\t\t\tDecoder.rsDecoder.decode(codewordsInts, numECCodewords);\r\n\t\t\t//var corrector = new ReedSolomon(codewordsInts, numECCodewords);\r\n\t\t\t//corrector.correct();\r\n\t\t}\r\n\t\tcatch (rse) {\r\n\t\t\tthrow rse;\r\n\t\t}\r\n\t\t// Copy back into array of bytes -- only need to worry about the bytes that were data\r\n\t\t// We don't care about errors in the error-correction codewords\r\n\t\tfor (var i = 0; i < numDataCodewords; i++) {\r\n\t\t\tcodewordBytes[i] = codewordsInts[i];\r\n\t\t}\r\n\t}\r\n\r\n\tDecoder.decode = function (bits) {\r\n\t\tvar parser = new BitMatrixParser(bits);\r\n\t\tvar version = parser.readVersion();\r\n\t\tvar ecLevel = parser.readFormatInformation().ErrorCorrectionLevel;\r\n\r\n\t\t// Read codewords\r\n\t\tvar codewords = parser.readCodewords();\r\n\r\n\t\t// Separate into data blocks\r\n\t\tvar dataBlocks = DataBlock.getDataBlocks(codewords, version, ecLevel);\r\n\r\n\t\t// Count total number of data bytes\r\n\t\tvar totalBytes = 0;\r\n\t\tfor (var i = 0; i < dataBlocks.length; i++) {\r\n\t\t\ttotalBytes += dataBlocks[i].NumDataCodewords;\r\n\t\t}\r\n\t\tvar resultBytes = new Array(totalBytes);\r\n\t\tvar resultOffset = 0;\r\n\r\n\t\t// Error-correct and copy data blocks together into a stream of bytes\r\n\t\tfor (var j = 0; j < dataBlocks.length; j++) {\r\n\t\t\tvar dataBlock = dataBlocks[j];\r\n\t\t\tvar codewordBytes = dataBlock.Codewords;\r\n\t\t\tvar numDataCodewords = dataBlock.NumDataCodewords;\r\n\t\t\tDecoder.correctErrors(codewordBytes, numDataCodewords);\r\n\t\t\tfor (var i = 0; i < numDataCodewords; i++) {\r\n\t\t\t\tresultBytes[resultOffset++] = codewordBytes[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Decode the contents of that stream of bytes\r\n\t\tvar reader = new QRCodeDataBlockReader(resultBytes, version.VersionNumber, ecLevel.Bits);\r\n\t\treturn reader;\r\n\t\t//return DecodedBitStreamParser.decode(resultBytes, version, ecLevel);\r\n\t}\r\n\r\n\r\n\tvar qrcode = {};\r\n\tqrcode.imagedata = null;\r\n\tqrcode.width = 0;\r\n\tqrcode.height = 0;\r\n\tqrcode.qrCodeSymbol = null;\r\n\tqrcode.debug = false;\r\n\tqrcode.maxImgSize = 1024 * 1024;\r\n\r\n\tqrcode.sizeOfDataLengthInfo = [[10, 9, 8, 8], [12, 11, 16, 10], [14, 13, 16, 12]];\r\n\r\n\tqrcode.callback = null;\r\n\r\n\tqrcode.vidSuccess = function (stream) {\r\n\t\tqrcode.localstream = stream;\r\n\t\tif (qrcode.webkit)\r\n\t\t\tqrcode.video.src = window.webkitURL.createObjectURL(stream);\r\n\t\telse\r\n\t\t\tif (qrcode.moz) {\r\n\t\t\t\tqrcode.video.mozSrcObject = stream;\r\n\t\t\t\tqrcode.video.play();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tqrcode.video.src = stream;\r\n\r\n\t\tqrcode.gUM = true;\r\n\r\n\t\tqrcode.canvas_qr2 = document.createElement('canvas');\r\n\t\tqrcode.canvas_qr2.id = \"qr-canvas\";\r\n\t\tqrcode.qrcontext2 = qrcode.canvas_qr2.getContext('2d');\r\n\t\tqrcode.canvas_qr2.width = qrcode.video.videoWidth;\r\n\t\tqrcode.canvas_qr2.height = qrcode.video.videoHeight;\r\n\t\tsetTimeout(qrcode.captureToCanvas, 500);\r\n\t}\r\n\r\n\tqrcode.vidError = function (error) {\r\n\t\tqrcode.gUM = false;\r\n\t\treturn;\r\n\t}\r\n\r\n\tqrcode.captureToCanvas = function () {\r\n\t\tif (qrcode.gUM) {\r\n\t\t\ttry {\r\n\t\t\t\tif (qrcode.video.videoWidth == 0) {\r\n\t\t\t\t\tsetTimeout(qrcode.captureToCanvas, 500);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tqrcode.canvas_qr2.width = qrcode.video.videoWidth;\r\n\t\t\t\t\tqrcode.canvas_qr2.height = qrcode.video.videoHeight;\r\n\t\t\t\t}\r\n\t\t\t\tqrcode.qrcontext2.drawImage(qrcode.video, 0, 0);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tqrcode.decode();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\tsetTimeout(qrcode.captureToCanvas, 500);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tsetTimeout(qrcode.captureToCanvas, 500);\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tqrcode.setWebcam = function (videoId) {\r\n\t\tvar n = navigator;\r\n\t\tqrcode.video = document.getElementById(videoId);\r\n\r\n\t\tvar options = true;\r\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\r\n\t\t\ttry {\r\n\t\t\t\tnavigator.mediaDevices.enumerateDevices()\r\n\t\t\t\t\t.then(function (devices) {\r\n\t\t\t\t\t\tdevices.forEach(function (device) {\r\n\t\t\t\t\t\t\tconsole.log(\"deb1\");\r\n\t\t\t\t\t\t\tif (device.kind === 'videoinput') {\r\n\t\t\t\t\t\t\t\tif (device.label.toLowerCase().search(\"back\") > -1)\r\n\t\t\t\t\t\t\t\t\toptions = [{ 'sourceId': device.deviceId }];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(device.kind + \": \" + device.label +\r\n\t\t\t\t\t\t\t\t\" id = \" + device.deviceId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"no navigator.mediaDevices.enumerateDevices\");\r\n\t\t}\r\n\r\n\t\tif (n.getUserMedia)\r\n\t\t\tn.getUserMedia({ video: options, audio: false }, qrcode.vidSuccess, qrcode.vidError);\r\n\t\telse\r\n\t\t\tif (n.webkitGetUserMedia) {\r\n\t\t\t\tqrcode.webkit = true;\r\n\t\t\t\tn.webkitGetUserMedia({ video: options, audio: false }, qrcode.vidSuccess, qrcode.vidError);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tif (n.mozGetUserMedia) {\r\n\t\t\t\t\tqrcode.moz = true;\r\n\t\t\t\t\tn.mozGetUserMedia({ video: options, audio: false }, qrcode.vidSuccess, qrcode.vidError);\r\n\t\t\t\t}\r\n\t}\r\n\r\n\tqrcode.decode = function (src) {\r\n\r\n\t\tif (arguments.length == 0) {\r\n\t\t\tif (qrcode.canvas_qr2) {\r\n\t\t\t\tvar canvas_qr = qrcode.canvas_qr2;\r\n\t\t\t\tvar context = qrcode.qrcontext2;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar canvas_qr = document.getElementById(\"qr-canvas\");\r\n\t\t\t\tvar context = canvas_qr.getContext('2d');\r\n\t\t\t}\r\n\t\t\tqrcode.width = canvas_qr.width;\r\n\t\t\tqrcode.height = canvas_qr.height;\r\n\t\t\tqrcode.imagedata = context.getImageData(0, 0, qrcode.width, qrcode.height);\r\n\t\t\tqrcode.result = qrcode.process(context);\r\n\t\t\tif (qrcode.callback != null)\r\n\t\t\t\tqrcode.callback(qrcode.result);\r\n\t\t\treturn qrcode.result;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar image = new Image();\r\n\t\t\timage.crossOrigin = \"Anonymous\";\r\n\t\t\timage.onload = function () {\r\n\t\t\t\t//var canvas_qr = document.getElementById(\"qr-canvas\");\r\n\t\t\t\tvar canvas_out = document.getElementById(\"out-canvas\");\r\n\t\t\t\tif (canvas_out != null) {\r\n\t\t\t\t\tvar outctx = canvas_out.getContext('2d');\r\n\t\t\t\t\toutctx.clearRect(0, 0, 320, 240);\r\n\t\t\t\t\toutctx.drawImage(image, 0, 0, 320, 240);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar canvas_qr = document.createElement('canvas');\r\n\t\t\t\tvar context = canvas_qr.getContext('2d');\r\n\t\t\t\tvar nheight = image.height;\r\n\t\t\t\tvar nwidth = image.width;\r\n\t\t\t\tif (image.width * image.height > qrcode.maxImgSize) {\r\n\t\t\t\t\tvar ir = image.width / image.height;\r\n\t\t\t\t\tnheight = Math.sqrt(qrcode.maxImgSize / ir);\r\n\t\t\t\t\tnwidth = ir * nheight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcanvas_qr.width = nwidth;\r\n\t\t\t\tcanvas_qr.height = nheight;\r\n\r\n\t\t\t\tcontext.drawImage(image, 0, 0, canvas_qr.width, canvas_qr.height);\r\n\t\t\t\tqrcode.width = canvas_qr.width;\r\n\t\t\t\tqrcode.height = canvas_qr.height;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tqrcode.imagedata = context.getImageData(0, 0, canvas_qr.width, canvas_qr.height);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tqrcode.result = \"Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!\";\r\n\t\t\t\t\tif (qrcode.callback != null)\r\n\t\t\t\t\t\tqrcode.callback(qrcode.result);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tqrcode.result = qrcode.process(context);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\tqrcode.result = \"error decoding QR Code\";\r\n\t\t\t\t}\r\n\t\t\t\tif (qrcode.callback != null)\r\n\t\t\t\t\tqrcode.callback(qrcode.result);\r\n\t\t\t}\r\n\t\t\timage.onerror = function () {\r\n\t\t\t\tif (qrcode.callback != null)\r\n\t\t\t\t\tqrcode.callback(\"Failed to load the image\");\r\n\t\t\t}\r\n\t\t\timage.src = src;\r\n\t\t}\r\n\t}\r\n\r\n\tqrcode.isUrl = function (s) {\r\n\t\tvar regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n\t\treturn regexp.test(s);\r\n\t}\r\n\r\n\tqrcode.decode_url = function (s) {\r\n\t\tvar escaped = \"\";\r\n\t\ttry {\r\n\t\t\tescaped = escape(s);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\tescaped = s;\r\n\t\t}\r\n\t\tvar ret = \"\";\r\n\t\ttry {\r\n\t\t\tret = decodeURIComponent(escaped);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\tret = escaped;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tqrcode.decode_utf8 = function (s) {\r\n\t\tif (qrcode.isUrl(s))\r\n\t\t\treturn qrcode.decode_url(s);\r\n\t\telse\r\n\t\t\treturn s;\r\n\t}\r\n\r\n\tqrcode.process = function (ctx) {\r\n\r\n\t\tvar start = new Date().getTime();\r\n\r\n\t\tvar image = qrcode.grayScaleToBitmap(qrcode.grayscale());\r\n\t\t//var image = qrcode.binarize(128);\r\n\r\n\t\tif (qrcode.debug) {\r\n\t\t\tfor (var y = 0; y < qrcode.height; y++) {\r\n\t\t\t\tfor (var x = 0; x < qrcode.width; x++) {\r\n\t\t\t\t\tvar point = (x * 4) + (y * qrcode.width * 4);\r\n\t\t\t\t\tqrcode.imagedata.data[point] = image[x + y * qrcode.width] ? 0 : 0;\r\n\t\t\t\t\tqrcode.imagedata.data[point + 1] = image[x + y * qrcode.width] ? 0 : 0;\r\n\t\t\t\t\tqrcode.imagedata.data[point + 2] = image[x + y * qrcode.width] ? 255 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.putImageData(qrcode.imagedata, 0, 0);\r\n\t\t}\r\n\r\n\t\t//var finderPatternInfo = new FinderPatternFinder().findFinderPattern(image);\r\n\r\n\t\tvar detector = new Detector(image);\r\n\r\n\t\tvar qRCodeMatrix = detector.detect();\r\n\r\n\t\tif (qrcode.debug) {\r\n\t\t\tfor (var y = 0; y < qRCodeMatrix.bits.Height; y++) {\r\n\t\t\t\tfor (var x = 0; x < qRCodeMatrix.bits.Width; x++) {\r\n\t\t\t\t\tvar point = (x * 4 * 2) + (y * 2 * qrcode.width * 4);\r\n\t\t\t\t\tqrcode.imagedata.data[point] = qRCodeMatrix.bits.get_Renamed(x, y) ? 0 : 0;\r\n\t\t\t\t\tqrcode.imagedata.data[point + 1] = qRCodeMatrix.bits.get_Renamed(x, y) ? 0 : 0;\r\n\t\t\t\t\tqrcode.imagedata.data[point + 2] = qRCodeMatrix.bits.get_Renamed(x, y) ? 255 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.putImageData(qrcode.imagedata, 0, 0);\r\n\t\t}\r\n\r\n\r\n\t\tvar reader = Decoder.decode(qRCodeMatrix.bits);\r\n\t\tvar data = reader.DataByte;\r\n\t\tvar str = \"\";\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tfor (var j = 0; j < data[i].length; j++)\r\n\t\t\t\tstr += String.fromCharCode(data[i][j]);\r\n\t\t}\r\n\r\n\t\tvar end = new Date().getTime();\r\n\t\tvar time = end - start;\r\n\t\tconsole.log(time);\r\n\r\n\t\treturn qrcode.decode_utf8(str);\r\n\t\t//alert(\"Time:\" + time + \" Code: \"+str);\r\n\t}\r\n\r\n\tqrcode.getPixel = function (x, y) {\r\n\t\tif (qrcode.width < x) {\r\n\t\t\tthrow \"point error\";\r\n\t\t}\r\n\t\tif (qrcode.height < y) {\r\n\t\t\tthrow \"point error\";\r\n\t\t}\r\n\t\tvar point = (x * 4) + (y * qrcode.width * 4);\r\n\t\tvar p = (qrcode.imagedata.data[point] * 33 + qrcode.imagedata.data[point + 1] * 34 + qrcode.imagedata.data[point + 2] * 33) / 100;\r\n\t\treturn p;\r\n\t}\r\n\r\n\tqrcode.binarize = function (th) {\r\n\t\tvar ret = new Array(qrcode.width * qrcode.height);\r\n\t\tfor (var y = 0; y < qrcode.height; y++) {\r\n\t\t\tfor (var x = 0; x < qrcode.width; x++) {\r\n\t\t\t\tvar gray = qrcode.getPixel(x, y);\r\n\r\n\t\t\t\tret[x + y * qrcode.width] = gray <= th ? true : false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tqrcode.getMiddleBrightnessPerArea = function (image) {\r\n\t\tvar numSqrtArea = 4;\r\n\t\t//obtain middle brightness((min + max) / 2) per area\r\n\t\tvar areaWidth = Math.floor(qrcode.width / numSqrtArea);\r\n\t\tvar areaHeight = Math.floor(qrcode.height / numSqrtArea);\r\n\t\tvar minmax = new Array(numSqrtArea);\r\n\t\tfor (var i = 0; i < numSqrtArea; i++) {\r\n\t\t\tminmax[i] = new Array(numSqrtArea);\r\n\t\t\tfor (var i2 = 0; i2 < numSqrtArea; i2++) {\r\n\t\t\t\tminmax[i][i2] = new Array(0, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var ay = 0; ay < numSqrtArea; ay++) {\r\n\t\t\tfor (var ax = 0; ax < numSqrtArea; ax++) {\r\n\t\t\t\tminmax[ax][ay][0] = 0xFF;\r\n\t\t\t\tfor (var dy = 0; dy < areaHeight; dy++) {\r\n\t\t\t\t\tfor (var dx = 0; dx < areaWidth; dx++) {\r\n\t\t\t\t\t\tvar target = image[areaWidth * ax + dx + (areaHeight * ay + dy) * qrcode.width];\r\n\t\t\t\t\t\tif (target < minmax[ax][ay][0])\r\n\t\t\t\t\t\t\tminmax[ax][ay][0] = target;\r\n\t\t\t\t\t\tif (target > minmax[ax][ay][1])\r\n\t\t\t\t\t\t\tminmax[ax][ay][1] = target;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//minmax[ax][ay][0] = (minmax[ax][ay][0] + minmax[ax][ay][1]) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar middle = new Array(numSqrtArea);\r\n\t\tfor (var i3 = 0; i3 < numSqrtArea; i3++) {\r\n\t\t\tmiddle[i3] = new Array(numSqrtArea);\r\n\t\t}\r\n\t\tfor (var ay = 0; ay < numSqrtArea; ay++) {\r\n\t\t\tfor (var ax = 0; ax < numSqrtArea; ax++) {\r\n\t\t\t\tmiddle[ax][ay] = Math.floor((minmax[ax][ay][0] + minmax[ax][ay][1]) / 2);\r\n\t\t\t\t//Console.out.print(middle[ax][ay] + \",\");\r\n\t\t\t}\r\n\t\t\t//Console.out.println(\"\");\r\n\t\t}\r\n\t\t//Console.out.println(\"\");\r\n\r\n\t\treturn middle;\r\n\t}\r\n\r\n\tqrcode.grayScaleToBitmap = function (grayScale) {\r\n\t\tvar middle = qrcode.getMiddleBrightnessPerArea(grayScale);\r\n\t\tvar sqrtNumArea = middle.length;\r\n\t\tvar areaWidth = Math.floor(qrcode.width / sqrtNumArea);\r\n\t\tvar areaHeight = Math.floor(qrcode.height / sqrtNumArea);\r\n\r\n\t\tvar buff = new ArrayBuffer(qrcode.width * qrcode.height);\r\n\t\tvar bitmap = new Uint8Array(buff);\r\n\r\n\t\t//var bitmap = new Array(qrcode.height*qrcode.width);\r\n\r\n\t\tfor (var ay = 0; ay < sqrtNumArea; ay++) {\r\n\t\t\tfor (var ax = 0; ax < sqrtNumArea; ax++) {\r\n\t\t\t\tfor (var dy = 0; dy < areaHeight; dy++) {\r\n\t\t\t\t\tfor (var dx = 0; dx < areaWidth; dx++) {\r\n\t\t\t\t\t\tbitmap[areaWidth * ax + dx + (areaHeight * ay + dy) * qrcode.width] = (grayScale[areaWidth * ax + dx + (areaHeight * ay + dy) * qrcode.width] < middle[ax][ay]) ? true : false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bitmap;\r\n\t}\r\n\r\n\tqrcode.grayscale = function () {\r\n\t\tvar buff = new ArrayBuffer(qrcode.width * qrcode.height);\r\n\t\tvar ret = new Uint8Array(buff);\r\n\t\t//var ret = new Array(qrcode.width*qrcode.height);\r\n\r\n\t\tfor (var y = 0; y < qrcode.height; y++) {\r\n\t\t\tfor (var x = 0; x < qrcode.width; x++) {\r\n\t\t\t\tvar gray = qrcode.getPixel(x, y);\r\n\r\n\t\t\t\tret[x + y * qrcode.width] = gray;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\r\n\r\n\r\n\tfunction URShift(number, bits) {\r\n\t\tif (number >= 0)\r\n\t\t\treturn number >> bits;\r\n\t\telse\r\n\t\t\treturn (number >> bits) + (2 << ~bits);\r\n\t}\r\n\r\n\r\n\tvar MIN_SKIP = 3;\r\n\tvar MAX_MODULES = 57;\r\n\tvar INTEGER_MATH_SHIFT = 8;\r\n\tvar CENTER_QUORUM = 2;\r\n\r\n\tqrcode.orderBestPatterns = function (patterns) {\r\n\r\n\t\tfunction distance(pattern1, pattern2) {\r\n\t\t\tvar xDiff = pattern1.X - pattern2.X;\r\n\t\t\tvar yDiff = pattern1.Y - pattern2.Y;\r\n\t\t\treturn Math.sqrt((xDiff * xDiff + yDiff * yDiff));\r\n\t\t}\r\n\r\n\t\t/// <summary> Returns the z component of the cross product between vectors BC and BA.</summary>\r\n\t\tfunction crossProductZ(pointA, pointB, pointC) {\r\n\t\t\tvar bX = pointB.x;\r\n\t\t\tvar bY = pointB.y;\r\n\t\t\treturn ((pointC.x - bX) * (pointA.y - bY)) - ((pointC.y - bY) * (pointA.x - bX));\r\n\t\t}\r\n\r\n\r\n\t\t// Find distances between pattern centers\r\n\t\tvar zeroOneDistance = distance(patterns[0], patterns[1]);\r\n\t\tvar oneTwoDistance = distance(patterns[1], patterns[2]);\r\n\t\tvar zeroTwoDistance = distance(patterns[0], patterns[2]);\r\n\r\n\t\tvar pointA, pointB, pointC;\r\n\t\t// Assume one closest to other two is B; A and C will just be guesses at first\r\n\t\tif (oneTwoDistance >= zeroOneDistance && oneTwoDistance >= zeroTwoDistance) {\r\n\t\t\tpointB = patterns[0];\r\n\t\t\tpointA = patterns[1];\r\n\t\t\tpointC = patterns[2];\r\n\t\t}\r\n\t\telse if (zeroTwoDistance >= oneTwoDistance && zeroTwoDistance >= zeroOneDistance) {\r\n\t\t\tpointB = patterns[1];\r\n\t\t\tpointA = patterns[0];\r\n\t\t\tpointC = patterns[2];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpointB = patterns[2];\r\n\t\t\tpointA = patterns[0];\r\n\t\t\tpointC = patterns[1];\r\n\t\t}\r\n\r\n\t\t// Use cross product to figure out whether A and C are correct or flipped.\r\n\t\t// This asks whether BC x BA has a positive z component, which is the arrangement\r\n\t\t// we want for A, B, C. If it's negative, then we've got it flipped around and\r\n\t\t// should swap A and C.\r\n\t\tif (crossProductZ(pointA, pointB, pointC) < 0.0) {\r\n\t\t\tvar temp = pointA;\r\n\t\t\tpointA = pointC;\r\n\t\t\tpointC = temp;\r\n\t\t}\r\n\r\n\t\tpatterns[0] = pointA;\r\n\t\tpatterns[1] = pointB;\r\n\t\tpatterns[2] = pointC;\r\n\t}\r\n\r\n\r\n\tfunction FinderPattern(posX, posY, estimatedModuleSize) {\r\n\t\tthis.x = posX;\r\n\t\tthis.y = posY;\r\n\t\tthis.count = 1;\r\n\t\tthis.estimatedModuleSize = estimatedModuleSize;\r\n\r\n\t\tthis.__defineGetter__(\"EstimatedModuleSize\", function () {\r\n\t\t\treturn this.estimatedModuleSize;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Count\", function () {\r\n\t\t\treturn this.count;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"X\", function () {\r\n\t\t\treturn this.x;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Y\", function () {\r\n\t\t\treturn this.y;\r\n\t\t});\r\n\t\tthis.incrementCount = function () {\r\n\t\t\tthis.count++;\r\n\t\t}\r\n\t\tthis.aboutEquals = function (moduleSize, i, j) {\r\n\t\t\tif (Math.abs(i - this.y) <= moduleSize && Math.abs(j - this.x) <= moduleSize) {\r\n\t\t\t\tvar moduleSizeDiff = Math.abs(moduleSize - this.estimatedModuleSize);\r\n\t\t\t\treturn moduleSizeDiff <= 1.0 || moduleSizeDiff / this.estimatedModuleSize <= 1.0;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction FinderPatternInfo(patternCenters) {\r\n\t\tthis.bottomLeft = patternCenters[0];\r\n\t\tthis.topLeft = patternCenters[1];\r\n\t\tthis.topRight = patternCenters[2];\r\n\t\tthis.__defineGetter__(\"BottomLeft\", function () {\r\n\t\t\treturn this.bottomLeft;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"TopLeft\", function () {\r\n\t\t\treturn this.topLeft;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"TopRight\", function () {\r\n\t\t\treturn this.topRight;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction FinderPatternFinder() {\r\n\t\tthis.image = null;\r\n\t\tthis.possibleCenters = [];\r\n\t\tthis.hasSkipped = false;\r\n\t\tthis.crossCheckStateCount = new Array(0, 0, 0, 0, 0);\r\n\t\tthis.resultPointCallback = null;\r\n\r\n\t\tthis.__defineGetter__(\"CrossCheckStateCount\", function () {\r\n\t\t\tthis.crossCheckStateCount[0] = 0;\r\n\t\t\tthis.crossCheckStateCount[1] = 0;\r\n\t\t\tthis.crossCheckStateCount[2] = 0;\r\n\t\t\tthis.crossCheckStateCount[3] = 0;\r\n\t\t\tthis.crossCheckStateCount[4] = 0;\r\n\t\t\treturn this.crossCheckStateCount;\r\n\t\t});\r\n\r\n\t\tthis.foundPatternCross = function (stateCount) {\r\n\t\t\tvar totalModuleSize = 0;\r\n\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\tvar count = stateCount[i];\r\n\t\t\t\tif (count == 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\ttotalModuleSize += count;\r\n\t\t\t}\r\n\t\t\tif (totalModuleSize < 7) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar moduleSize = Math.floor((totalModuleSize << INTEGER_MATH_SHIFT) / 7);\r\n\t\t\tvar maxVariance = Math.floor(moduleSize / 2);\r\n\t\t\t// Allow less than 50% variance from 1-1-3-1-1 proportions\r\n\t\t\treturn Math.abs(moduleSize - (stateCount[0] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(moduleSize - (stateCount[1] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(3 * moduleSize - (stateCount[2] << INTEGER_MATH_SHIFT)) < 3 * maxVariance && Math.abs(moduleSize - (stateCount[3] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(moduleSize - (stateCount[4] << INTEGER_MATH_SHIFT)) < maxVariance;\r\n\t\t}\r\n\t\tthis.centerFromEnd = function (stateCount, end) {\r\n\t\t\treturn (end - stateCount[4] - stateCount[3]) - stateCount[2] / 2.0;\r\n\t\t}\r\n\t\tthis.crossCheckVertical = function (startI, centerJ, maxCount, originalStateCountTotal) {\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tvar maxI = qrcode.height;\r\n\t\t\tvar stateCount = this.CrossCheckStateCount;\r\n\r\n\t\t\t// Start counting up from center\r\n\t\t\tvar i = startI;\r\n\t\t\twhile (i >= 0 && image[centerJ + i * qrcode.width]) {\r\n\t\t\t\tstateCount[2]++;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\tif (i < 0) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i >= 0 && !image[centerJ + i * qrcode.width] && stateCount[1] <= maxCount) {\r\n\t\t\t\tstateCount[1]++;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\t// If already too many modules in this state or ran off the edge:\r\n\t\t\tif (i < 0 || stateCount[1] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i >= 0 && image[centerJ + i * qrcode.width] && stateCount[0] <= maxCount) {\r\n\t\t\t\tstateCount[0]++;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\tif (stateCount[0] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\t// Now also count down from center\r\n\t\t\ti = startI + 1;\r\n\t\t\twhile (i < maxI && image[centerJ + i * qrcode.width]) {\r\n\t\t\t\tstateCount[2]++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i == maxI) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i < maxI && !image[centerJ + i * qrcode.width] && stateCount[3] < maxCount) {\r\n\t\t\t\tstateCount[3]++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i == maxI || stateCount[3] >= maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i < maxI && image[centerJ + i * qrcode.width] && stateCount[4] < maxCount) {\r\n\t\t\t\tstateCount[4]++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (stateCount[4] >= maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\t// If we found a finder-pattern-like section, but its size is more than 40% different than\r\n\t\t\t// the original, assume it's a false positive\r\n\t\t\tvar stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];\r\n\t\t\tif (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= 2 * originalStateCountTotal) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.foundPatternCross(stateCount) ? this.centerFromEnd(stateCount, i) : NaN;\r\n\t\t}\r\n\t\tthis.crossCheckHorizontal = function (startJ, centerI, maxCount, originalStateCountTotal) {\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tvar maxJ = qrcode.width;\r\n\t\t\tvar stateCount = this.CrossCheckStateCount;\r\n\r\n\t\t\tvar j = startJ;\r\n\t\t\twhile (j >= 0 && image[j + centerI * qrcode.width]) {\r\n\t\t\t\tstateCount[2]++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\tif (j < 0) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (j >= 0 && !image[j + centerI * qrcode.width] && stateCount[1] <= maxCount) {\r\n\t\t\t\tstateCount[1]++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\tif (j < 0 || stateCount[1] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (j >= 0 && image[j + centerI * qrcode.width] && stateCount[0] <= maxCount) {\r\n\t\t\t\tstateCount[0]++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\tif (stateCount[0] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\tj = startJ + 1;\r\n\t\t\twhile (j < maxJ && image[j + centerI * qrcode.width]) {\r\n\t\t\t\tstateCount[2]++;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (j == maxJ) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (j < maxJ && !image[j + centerI * qrcode.width] && stateCount[3] < maxCount) {\r\n\t\t\t\tstateCount[3]++;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (j == maxJ || stateCount[3] >= maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (j < maxJ && image[j + centerI * qrcode.width] && stateCount[4] < maxCount) {\r\n\t\t\t\tstateCount[4]++;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\tif (stateCount[4] >= maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\t// If we found a finder-pattern-like section, but its size is significantly different than\r\n\t\t\t// the original, assume it's a false positive\r\n\t\t\tvar stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];\r\n\t\t\tif (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= originalStateCountTotal) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.foundPatternCross(stateCount) ? this.centerFromEnd(stateCount, j) : NaN;\r\n\t\t}\r\n\t\tthis.handlePossibleCenter = function (stateCount, i, j) {\r\n\t\t\tvar stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];\r\n\t\t\tvar centerJ = this.centerFromEnd(stateCount, j); //float\r\n\t\t\tvar centerI = this.crossCheckVertical(i, Math.floor(centerJ), stateCount[2], stateCountTotal); //float\r\n\t\t\tif (!isNaN(centerI)) {\r\n\t\t\t\t// Re-cross check\r\n\t\t\t\tcenterJ = this.crossCheckHorizontal(Math.floor(centerJ), Math.floor(centerI), stateCount[2], stateCountTotal);\r\n\t\t\t\tif (!isNaN(centerJ)) {\r\n\t\t\t\t\tvar estimatedModuleSize = stateCountTotal / 7.0;\r\n\t\t\t\t\tvar found = false;\r\n\t\t\t\t\tvar max = this.possibleCenters.length;\r\n\t\t\t\t\tfor (var index = 0; index < max; index++) {\r\n\t\t\t\t\t\tvar center = this.possibleCenters[index];\r\n\t\t\t\t\t\t// Look for about the same center and module size:\r\n\t\t\t\t\t\tif (center.aboutEquals(estimatedModuleSize, centerI, centerJ)) {\r\n\t\t\t\t\t\t\tcenter.incrementCount();\r\n\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!found) {\r\n\t\t\t\t\t\tvar point = new FinderPattern(centerJ, centerI, estimatedModuleSize);\r\n\t\t\t\t\t\tthis.possibleCenters.push(point);\r\n\t\t\t\t\t\tif (this.resultPointCallback != null) {\r\n\t\t\t\t\t\t\tthis.resultPointCallback.foundPossibleResultPoint(point);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.selectBestPatterns = function () {\r\n\r\n\t\t\tvar startSize = this.possibleCenters.length;\r\n\t\t\tif (startSize < 3) {\r\n\t\t\t\t// Couldn't find enough finder patterns\r\n\t\t\t\tthrow \"Couldn't find enough finder patterns (found \" + startSize + \")\"\r\n\t\t\t}\r\n\r\n\t\t\t// Filter outlier possibilities whose module size is too different\r\n\t\t\tif (startSize > 3) {\r\n\t\t\t\t// But we can only afford to do so if we have at least 4 possibilities to choose from\r\n\t\t\t\tvar totalModuleSize = 0.0;\r\n\t\t\t\tvar square = 0.0;\r\n\t\t\t\tfor (var i = 0; i < startSize; i++) {\r\n\t\t\t\t\t//totalModuleSize +=  this.possibleCenters[i].EstimatedModuleSize;\r\n\t\t\t\t\tvar centerValue = this.possibleCenters[i].EstimatedModuleSize;\r\n\t\t\t\t\ttotalModuleSize += centerValue;\r\n\t\t\t\t\tsquare += (centerValue * centerValue);\r\n\t\t\t\t}\r\n\t\t\t\tvar average = totalModuleSize / startSize;\r\n\t\t\t\tthis.possibleCenters.sort(function (center1, center2) {\r\n\t\t\t\t\tvar dA = Math.abs(center2.EstimatedModuleSize - average);\r\n\t\t\t\t\tvar dB = Math.abs(center1.EstimatedModuleSize - average);\r\n\t\t\t\t\tif (dA < dB) {\r\n\t\t\t\t\t\treturn (-1);\r\n\t\t\t\t\t} else if (dA == dB) {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar stdDev = Math.sqrt(square / startSize - average * average);\r\n\t\t\t\tvar limit = Math.max(0.2 * average, stdDev);\r\n\t\t\t\t//for (var i = 0; i < this.possibleCenters.length && this.possibleCenters.length > 3; i++)\r\n\t\t\t\tfor (var i = this.possibleCenters.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tvar pattern = this.possibleCenters[i];\r\n\t\t\t\t\t//if (Math.abs(pattern.EstimatedModuleSize - average) > 0.2 * average)\r\n\t\t\t\t\tif (Math.abs(pattern.EstimatedModuleSize - average) > limit) {\r\n\t\t\t\t\t\t//this.possibleCenters.remove(i);\r\n\t\t\t\t\t\tthis.possibleCenters.splice(i, 1);\r\n\t\t\t\t\t\t//i--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.possibleCenters.length > 3) {\r\n\t\t\t\t// Throw away all but those first size candidate points we found.\r\n\t\t\t\tthis.possibleCenters.sort(function (a, b) {\r\n\t\t\t\t\tif (a.count > b.count) { return -1; }\r\n\t\t\t\t\tif (a.count < b.count) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn new Array(this.possibleCenters[0], this.possibleCenters[1], this.possibleCenters[2]);\r\n\t\t}\r\n\r\n\t\tthis.findRowSkip = function () {\r\n\t\t\tvar max = this.possibleCenters.length;\r\n\t\t\tif (max <= 1) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tvar firstConfirmedCenter = null;\r\n\t\t\tfor (var i = 0; i < max; i++) {\r\n\t\t\t\tvar center = this.possibleCenters[i];\r\n\t\t\t\tif (center.Count >= CENTER_QUORUM) {\r\n\t\t\t\t\tif (firstConfirmedCenter == null) {\r\n\t\t\t\t\t\tfirstConfirmedCenter = center;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// We have two confirmed centers\r\n\t\t\t\t\t\t// How far down can we skip before resuming looking for the next\r\n\t\t\t\t\t\t// pattern? In the worst case, only the difference between the\r\n\t\t\t\t\t\t// difference in the x / y coordinates of the two centers.\r\n\t\t\t\t\t\t// This is the case where you find top left last.\r\n\t\t\t\t\t\tthis.hasSkipped = true;\r\n\t\t\t\t\t\treturn Math.floor((Math.abs(firstConfirmedCenter.X - center.X) - Math.abs(firstConfirmedCenter.Y - center.Y)) / 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tthis.haveMultiplyConfirmedCenters = function () {\r\n\t\t\tvar confirmedCount = 0;\r\n\t\t\tvar totalModuleSize = 0.0;\r\n\t\t\tvar max = this.possibleCenters.length;\r\n\t\t\tfor (var i = 0; i < max; i++) {\r\n\t\t\t\tvar pattern = this.possibleCenters[i];\r\n\t\t\t\tif (pattern.Count >= CENTER_QUORUM) {\r\n\t\t\t\t\tconfirmedCount++;\r\n\t\t\t\t\ttotalModuleSize += pattern.EstimatedModuleSize;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (confirmedCount < 3) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// OK, we have at least 3 confirmed centers, but, it's possible that one is a \"false positive\"\r\n\t\t\t// and that we need to keep looking. We detect this by asking if the estimated module sizes\r\n\t\t\t// vary too much. We arbitrarily say that when the total deviation from average exceeds\r\n\t\t\t// 5% of the total module size estimates, it's too much.\r\n\t\t\tvar average = totalModuleSize / max;\r\n\t\t\tvar totalDeviation = 0.0;\r\n\t\t\tfor (var i = 0; i < max; i++) {\r\n\t\t\t\tpattern = this.possibleCenters[i];\r\n\t\t\t\ttotalDeviation += Math.abs(pattern.EstimatedModuleSize - average);\r\n\t\t\t}\r\n\t\t\treturn totalDeviation <= 0.05 * totalModuleSize;\r\n\t\t}\r\n\r\n\t\tthis.findFinderPattern = function (image) {\r\n\t\t\tvar tryHarder = false;\r\n\t\t\tthis.image = image;\r\n\t\t\tvar maxI = qrcode.height;\r\n\t\t\tvar maxJ = qrcode.width;\r\n\t\t\tvar iSkip = Math.floor((3 * maxI) / (4 * MAX_MODULES));\r\n\t\t\tif (iSkip < MIN_SKIP || tryHarder) {\r\n\t\t\t\tiSkip = MIN_SKIP;\r\n\t\t\t}\r\n\r\n\t\t\tvar done = false;\r\n\t\t\tvar stateCount = new Array(5);\r\n\t\t\tfor (var i = iSkip - 1; i < maxI && !done; i += iSkip) {\r\n\t\t\t\t// Get a row of black/white values\r\n\t\t\t\tstateCount[0] = 0;\r\n\t\t\t\tstateCount[1] = 0;\r\n\t\t\t\tstateCount[2] = 0;\r\n\t\t\t\tstateCount[3] = 0;\r\n\t\t\t\tstateCount[4] = 0;\r\n\t\t\t\tvar currentState = 0;\r\n\t\t\t\tfor (var j = 0; j < maxJ; j++) {\r\n\t\t\t\t\tif (image[j + i * qrcode.width]) {\r\n\t\t\t\t\t\t// Black pixel\r\n\t\t\t\t\t\tif ((currentState & 1) == 1) {\r\n\t\t\t\t\t\t\t// Counting white pixels\r\n\t\t\t\t\t\t\tcurrentState++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstateCount[currentState]++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// White pixel\r\n\t\t\t\t\t\tif ((currentState & 1) == 0) {\r\n\t\t\t\t\t\t\t// Counting black pixels\r\n\t\t\t\t\t\t\tif (currentState == 4) {\r\n\t\t\t\t\t\t\t\t// A winner?\r\n\t\t\t\t\t\t\t\tif (this.foundPatternCross(stateCount)) {\r\n\t\t\t\t\t\t\t\t\t// Yes\r\n\t\t\t\t\t\t\t\t\tvar confirmed = this.handlePossibleCenter(stateCount, i, j);\r\n\t\t\t\t\t\t\t\t\tif (confirmed) {\r\n\t\t\t\t\t\t\t\t\t\t// Start examining every other line. Checking each line turned out to be too\r\n\t\t\t\t\t\t\t\t\t\t// expensive and didn't improve performance.\r\n\t\t\t\t\t\t\t\t\t\tiSkip = 2;\r\n\t\t\t\t\t\t\t\t\t\tif (this.hasSkipped) {\r\n\t\t\t\t\t\t\t\t\t\t\tdone = this.haveMultiplyConfirmedCenters();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\tvar rowSkip = this.findRowSkip();\r\n\t\t\t\t\t\t\t\t\t\t\tif (rowSkip > stateCount[2]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Skip rows between row of lower confirmed center\r\n\t\t\t\t\t\t\t\t\t\t\t\t// and top of presumed third confirmed center\r\n\t\t\t\t\t\t\t\t\t\t\t\t// but back up a bit to get a full chance of detecting\r\n\t\t\t\t\t\t\t\t\t\t\t\t// it, entire width of center of finder pattern\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Skip by rowSkip, but back off by stateCount[2] (size of last center\r\n\t\t\t\t\t\t\t\t\t\t\t\t// of pattern we saw) to be conservative, and also back off by iSkip which\r\n\t\t\t\t\t\t\t\t\t\t\t\t// is about to be re-added\r\n\t\t\t\t\t\t\t\t\t\t\t\ti += rowSkip - stateCount[2] - iSkip;\r\n\t\t\t\t\t\t\t\t\t\t\t\tj = maxJ - 1;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t// Advance to next black pixel\r\n\t\t\t\t\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\twhile (j < maxJ && !image[j + i * qrcode.width]);\r\n\t\t\t\t\t\t\t\t\t\tj--; // back up to that last white pixel\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// Clear state to start looking again\r\n\t\t\t\t\t\t\t\t\tcurrentState = 0;\r\n\t\t\t\t\t\t\t\t\tstateCount[0] = 0;\r\n\t\t\t\t\t\t\t\t\tstateCount[1] = 0;\r\n\t\t\t\t\t\t\t\t\tstateCount[2] = 0;\r\n\t\t\t\t\t\t\t\t\tstateCount[3] = 0;\r\n\t\t\t\t\t\t\t\t\tstateCount[4] = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t// No, shift counts back by two\r\n\t\t\t\t\t\t\t\t\tstateCount[0] = stateCount[2];\r\n\t\t\t\t\t\t\t\t\tstateCount[1] = stateCount[3];\r\n\t\t\t\t\t\t\t\t\tstateCount[2] = stateCount[4];\r\n\t\t\t\t\t\t\t\t\tstateCount[3] = 1;\r\n\t\t\t\t\t\t\t\t\tstateCount[4] = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentState = 3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstateCount[++currentState]++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t// Counting white pixels\r\n\t\t\t\t\t\t\tstateCount[currentState]++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.foundPatternCross(stateCount)) {\r\n\t\t\t\t\tvar confirmed = this.handlePossibleCenter(stateCount, i, maxJ);\r\n\t\t\t\t\tif (confirmed) {\r\n\t\t\t\t\t\tiSkip = stateCount[0];\r\n\t\t\t\t\t\tif (this.hasSkipped) {\r\n\t\t\t\t\t\t\t// Found a third one\r\n\t\t\t\t\t\t\tdone = this.haveMultiplyConfirmedCenters();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar patternInfo = this.selectBestPatterns();\r\n\t\t\tqrcode.orderBestPatterns(patternInfo);\r\n\r\n\t\t\treturn new FinderPatternInfo(patternInfo);\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tfunction AlignmentPattern(posX, posY, estimatedModuleSize) {\r\n\t\tthis.x = posX;\r\n\t\tthis.y = posY;\r\n\t\tthis.count = 1;\r\n\t\tthis.estimatedModuleSize = estimatedModuleSize;\r\n\r\n\t\tthis.__defineGetter__(\"EstimatedModuleSize\", function () {\r\n\t\t\treturn this.estimatedModuleSize;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Count\", function () {\r\n\t\t\treturn this.count;\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"X\", function () {\r\n\t\t\treturn Math.floor(this.x);\r\n\t\t});\r\n\t\tthis.__defineGetter__(\"Y\", function () {\r\n\t\t\treturn Math.floor(this.y);\r\n\t\t});\r\n\t\tthis.incrementCount = function () {\r\n\t\t\tthis.count++;\r\n\t\t}\r\n\t\tthis.aboutEquals = function (moduleSize, i, j) {\r\n\t\t\tif (Math.abs(i - this.y) <= moduleSize && Math.abs(j - this.x) <= moduleSize) {\r\n\t\t\t\tvar moduleSizeDiff = Math.abs(moduleSize - this.estimatedModuleSize);\r\n\t\t\t\treturn moduleSizeDiff <= 1.0 || moduleSizeDiff / this.estimatedModuleSize <= 1.0;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction AlignmentPatternFinder(image, startX, startY, width, height, moduleSize, resultPointCallback) {\r\n\t\tthis.image = image;\r\n\t\tthis.possibleCenters = new Array();\r\n\t\tthis.startX = startX;\r\n\t\tthis.startY = startY;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.moduleSize = moduleSize;\r\n\t\tthis.crossCheckStateCount = new Array(0, 0, 0);\r\n\t\tthis.resultPointCallback = resultPointCallback;\r\n\r\n\t\tthis.centerFromEnd = function (stateCount, end) {\r\n\t\t\treturn (end - stateCount[2]) - stateCount[1] / 2.0;\r\n\t\t}\r\n\t\tthis.foundPatternCross = function (stateCount) {\r\n\t\t\tvar moduleSize = this.moduleSize;\r\n\t\t\tvar maxVariance = moduleSize / 2.0;\r\n\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\tif (Math.abs(moduleSize - stateCount[i]) >= maxVariance) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.crossCheckVertical = function (startI, centerJ, maxCount, originalStateCountTotal) {\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tvar maxI = qrcode.height;\r\n\t\t\tvar stateCount = this.crossCheckStateCount;\r\n\t\t\tstateCount[0] = 0;\r\n\t\t\tstateCount[1] = 0;\r\n\t\t\tstateCount[2] = 0;\r\n\r\n\t\t\t// Start counting up from center\r\n\t\t\tvar i = startI;\r\n\t\t\twhile (i >= 0 && image[centerJ + i * qrcode.width] && stateCount[1] <= maxCount) {\r\n\t\t\t\tstateCount[1]++;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\t// If already too many modules in this state or ran off the edge:\r\n\t\t\tif (i < 0 || stateCount[1] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i >= 0 && !image[centerJ + i * qrcode.width] && stateCount[0] <= maxCount) {\r\n\t\t\t\tstateCount[0]++;\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\tif (stateCount[0] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\t// Now also count down from center\r\n\t\t\ti = startI + 1;\r\n\t\t\twhile (i < maxI && image[centerJ + i * qrcode.width] && stateCount[1] <= maxCount) {\r\n\t\t\t\tstateCount[1]++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i == maxI || stateCount[1] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\t\t\twhile (i < maxI && !image[centerJ + i * qrcode.width] && stateCount[2] <= maxCount) {\r\n\t\t\t\tstateCount[2]++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (stateCount[2] > maxCount) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\tvar stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2];\r\n\t\t\tif (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= 2 * originalStateCountTotal) {\r\n\t\t\t\treturn NaN;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.foundPatternCross(stateCount) ? this.centerFromEnd(stateCount, i) : NaN;\r\n\t\t}\r\n\r\n\t\tthis.handlePossibleCenter = function (stateCount, i, j) {\r\n\t\t\tvar stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2];\r\n\t\t\tvar centerJ = this.centerFromEnd(stateCount, j);\r\n\t\t\tvar centerI = this.crossCheckVertical(i, Math.floor(centerJ), 2 * stateCount[1], stateCountTotal);\r\n\t\t\tif (!isNaN(centerI)) {\r\n\t\t\t\tvar estimatedModuleSize = (stateCount[0] + stateCount[1] + stateCount[2]) / 3.0;\r\n\t\t\t\tvar max = this.possibleCenters.length;\r\n\t\t\t\tfor (var index = 0; index < max; index++) {\r\n\t\t\t\t\tvar center = this.possibleCenters[index];\r\n\t\t\t\t\t// Look for about the same center and module size:\r\n\t\t\t\t\tif (center.aboutEquals(estimatedModuleSize, centerI, centerJ)) {\r\n\t\t\t\t\t\treturn new AlignmentPattern(centerJ, centerI, estimatedModuleSize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Hadn't found this before; save it\r\n\t\t\t\tvar point = new AlignmentPattern(centerJ, centerI, estimatedModuleSize);\r\n\t\t\t\tthis.possibleCenters.push(point);\r\n\t\t\t\tif (this.resultPointCallback != null) {\r\n\t\t\t\t\tthis.resultPointCallback.foundPossibleResultPoint(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tthis.find = function () {\r\n\t\t\tvar startX = this.startX;\r\n\t\t\tvar height = this.height;\r\n\t\t\tvar maxJ = startX + width;\r\n\t\t\tvar middleI = startY + (height >> 1);\r\n\t\t\t// We are looking for black/white/black modules in 1:1:1 ratio;\r\n\t\t\t// this tracks the number of black/white/black modules seen so far\r\n\t\t\tvar stateCount = new Array(0, 0, 0);\r\n\t\t\tfor (var iGen = 0; iGen < height; iGen++) {\r\n\t\t\t\t// Search from middle outwards\r\n\t\t\t\tvar i = middleI + ((iGen & 0x01) == 0 ? ((iGen + 1) >> 1) : - ((iGen + 1) >> 1));\r\n\t\t\t\tstateCount[0] = 0;\r\n\t\t\t\tstateCount[1] = 0;\r\n\t\t\t\tstateCount[2] = 0;\r\n\t\t\t\tvar j = startX;\r\n\t\t\t\t// Burn off leading white pixels before anything else; if we start in the middle of\r\n\t\t\t\t// a white run, it doesn't make sense to count its length, since we don't know if the\r\n\t\t\t\t// white run continued to the left of the start point\r\n\t\t\t\twhile (j < maxJ && !image[j + qrcode.width * i]) {\r\n\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t\tvar currentState = 0;\r\n\t\t\t\twhile (j < maxJ) {\r\n\t\t\t\t\tif (image[j + i * qrcode.width]) {\r\n\t\t\t\t\t\t// Black pixel\r\n\t\t\t\t\t\tif (currentState == 1) {\r\n\t\t\t\t\t\t\t// Counting black pixels\r\n\t\t\t\t\t\t\tstateCount[currentState]++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t// Counting white pixels\r\n\t\t\t\t\t\t\tif (currentState == 2) {\r\n\t\t\t\t\t\t\t\t// A winner?\r\n\t\t\t\t\t\t\t\tif (this.foundPatternCross(stateCount)) {\r\n\t\t\t\t\t\t\t\t\t// Yes\r\n\t\t\t\t\t\t\t\t\tvar confirmed = this.handlePossibleCenter(stateCount, i, j);\r\n\t\t\t\t\t\t\t\t\tif (confirmed != null) {\r\n\t\t\t\t\t\t\t\t\t\treturn confirmed;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstateCount[0] = stateCount[2];\r\n\t\t\t\t\t\t\t\tstateCount[1] = 1;\r\n\t\t\t\t\t\t\t\tstateCount[2] = 0;\r\n\t\t\t\t\t\t\t\tcurrentState = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstateCount[++currentState]++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// White pixel\r\n\t\t\t\t\t\tif (currentState == 1) {\r\n\t\t\t\t\t\t\t// Counting black pixels\r\n\t\t\t\t\t\t\tcurrentState++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstateCount[currentState]++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.foundPatternCross(stateCount)) {\r\n\t\t\t\t\tvar confirmed = this.handlePossibleCenter(stateCount, i, maxJ);\r\n\t\t\t\t\tif (confirmed != null) {\r\n\t\t\t\t\t\treturn confirmed;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Hmm, nothing we saw was observed and confirmed twice. If we had\r\n\t\t\t// any guess at all, return it.\r\n\t\t\tif (!(this.possibleCenters.length == 0)) {\r\n\t\t\t\treturn this.possibleCenters[0];\r\n\t\t\t}\r\n\r\n\t\t\tthrow \"Couldn't find enough alignment patterns\";\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction QRCodeDataBlockReader(blocks, version, numErrorCorrectionCode) {\r\n\t\tthis.blockPointer = 0;\r\n\t\tthis.bitPointer = 7;\r\n\t\tthis.dataLength = 0;\r\n\t\tthis.blocks = blocks;\r\n\t\tthis.numErrorCorrectionCode = numErrorCorrectionCode;\r\n\t\tif (version <= 9)\r\n\t\t\tthis.dataLengthMode = 0;\r\n\t\telse if (version >= 10 && version <= 26)\r\n\t\t\tthis.dataLengthMode = 1;\r\n\t\telse if (version >= 27 && version <= 40)\r\n\t\t\tthis.dataLengthMode = 2;\r\n\r\n\t\tthis.getNextBits = function (numBits) {\r\n\t\t\tvar bits = 0;\r\n\t\t\tif (numBits < this.bitPointer + 1) {\r\n\t\t\t\t// next word fits into current data block\r\n\t\t\t\tvar mask = 0;\r\n\t\t\t\tfor (var i = 0; i < numBits; i++) {\r\n\t\t\t\t\tmask += (1 << i);\r\n\t\t\t\t}\r\n\t\t\t\tmask <<= (this.bitPointer - numBits + 1);\r\n\r\n\t\t\t\tbits = (this.blocks[this.blockPointer] & mask) >> (this.bitPointer - numBits + 1);\r\n\t\t\t\tthis.bitPointer -= numBits;\r\n\t\t\t\treturn bits;\r\n\t\t\t}\r\n\t\t\telse if (numBits < this.bitPointer + 1 + 8) {\r\n\t\t\t\t// next word crosses 2 data blocks\r\n\t\t\t\tvar mask1 = 0;\r\n\t\t\t\tfor (var i = 0; i < this.bitPointer + 1; i++) {\r\n\t\t\t\t\tmask1 += (1 << i);\r\n\t\t\t\t}\r\n\t\t\t\tbits = (this.blocks[this.blockPointer] & mask1) << (numBits - (this.bitPointer + 1));\r\n\t\t\t\tthis.blockPointer++;\r\n\t\t\t\tbits += ((this.blocks[this.blockPointer]) >> (8 - (numBits - (this.bitPointer + 1))));\r\n\r\n\t\t\t\tthis.bitPointer = this.bitPointer - numBits % 8;\r\n\t\t\t\tif (this.bitPointer < 0) {\r\n\t\t\t\t\tthis.bitPointer = 8 + this.bitPointer;\r\n\t\t\t\t}\r\n\t\t\t\treturn bits;\r\n\t\t\t}\r\n\t\t\telse if (numBits < this.bitPointer + 1 + 16) {\r\n\t\t\t\t// next word crosses 3 data blocks\r\n\t\t\t\tvar mask1 = 0; // mask of first block\r\n\t\t\t\tvar mask3 = 0; // mask of 3rd block\r\n\t\t\t\t//bitPointer + 1 : number of bits of the 1st block\r\n\t\t\t\t//8 : number of the 2nd block (note that use already 8bits because next word uses 3 data blocks)\r\n\t\t\t\t//numBits - (bitPointer + 1 + 8) : number of bits of the 3rd block \r\n\t\t\t\tfor (var i = 0; i < this.bitPointer + 1; i++) {\r\n\t\t\t\t\tmask1 += (1 << i);\r\n\t\t\t\t}\r\n\t\t\t\tvar bitsFirstBlock = (this.blocks[this.blockPointer] & mask1) << (numBits - (this.bitPointer + 1));\r\n\t\t\t\tthis.blockPointer++;\r\n\r\n\t\t\t\tvar bitsSecondBlock = this.blocks[this.blockPointer] << (numBits - (this.bitPointer + 1 + 8));\r\n\t\t\t\tthis.blockPointer++;\r\n\r\n\t\t\t\tfor (var i = 0; i < numBits - (this.bitPointer + 1 + 8); i++) {\r\n\t\t\t\t\tmask3 += (1 << i);\r\n\t\t\t\t}\r\n\t\t\t\tmask3 <<= 8 - (numBits - (this.bitPointer + 1 + 8));\r\n\t\t\t\tvar bitsThirdBlock = (this.blocks[this.blockPointer] & mask3) >> (8 - (numBits - (this.bitPointer + 1 + 8)));\r\n\r\n\t\t\t\tbits = bitsFirstBlock + bitsSecondBlock + bitsThirdBlock;\r\n\t\t\t\tthis.bitPointer = this.bitPointer - (numBits - 8) % 8;\r\n\t\t\t\tif (this.bitPointer < 0) {\r\n\t\t\t\t\tthis.bitPointer = 8 + this.bitPointer;\r\n\t\t\t\t}\r\n\t\t\t\treturn bits;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.NextMode = function () {\r\n\t\t\tif ((this.blockPointer > this.blocks.length - this.numErrorCorrectionCode - 2))\r\n\t\t\t\treturn 0;\r\n\t\t\telse\r\n\t\t\t\treturn this.getNextBits(4);\r\n\t\t}\r\n\t\tthis.getDataLength = function (modeIndicator) {\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (true) {\r\n\t\t\t\tif ((modeIndicator >> index) == 1)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.getNextBits(qrcode.sizeOfDataLengthInfo[this.dataLengthMode][index]);\r\n\t\t}\r\n\t\tthis.getRomanAndFigureString = function (dataLength) {\r\n\t\t\tvar length = dataLength;\r\n\t\t\tvar intData = 0;\r\n\t\t\tvar strData = \"\";\r\n\t\t\tvar tableRomanAndFigure = new Array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' ', '$', '%', '*', '+', '-', '.', '/', ':');\r\n\t\t\tdo {\r\n\t\t\t\tif (length > 1) {\r\n\t\t\t\t\tintData = this.getNextBits(11);\r\n\t\t\t\t\tvar firstLetter = Math.floor(intData / 45);\r\n\t\t\t\t\tvar secondLetter = intData % 45;\r\n\t\t\t\t\tstrData += tableRomanAndFigure[firstLetter];\r\n\t\t\t\t\tstrData += tableRomanAndFigure[secondLetter];\r\n\t\t\t\t\tlength -= 2;\r\n\t\t\t\t}\r\n\t\t\t\telse if (length == 1) {\r\n\t\t\t\t\tintData = this.getNextBits(6);\r\n\t\t\t\t\tstrData += tableRomanAndFigure[intData];\r\n\t\t\t\t\tlength -= 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhile (length > 0);\r\n\r\n\t\t\treturn strData;\r\n\t\t}\r\n\t\tthis.getFigureString = function (dataLength) {\r\n\t\t\tvar length = dataLength;\r\n\t\t\tvar intData = 0;\r\n\t\t\tvar strData = \"\";\r\n\t\t\tdo {\r\n\t\t\t\tif (length >= 3) {\r\n\t\t\t\t\tintData = this.getNextBits(10);\r\n\t\t\t\t\tif (intData < 100)\r\n\t\t\t\t\t\tstrData += \"0\";\r\n\t\t\t\t\tif (intData < 10)\r\n\t\t\t\t\t\tstrData += \"0\";\r\n\t\t\t\t\tlength -= 3;\r\n\t\t\t\t}\r\n\t\t\t\telse if (length == 2) {\r\n\t\t\t\t\tintData = this.getNextBits(7);\r\n\t\t\t\t\tif (intData < 10)\r\n\t\t\t\t\t\tstrData += \"0\";\r\n\t\t\t\t\tlength -= 2;\r\n\t\t\t\t}\r\n\t\t\t\telse if (length == 1) {\r\n\t\t\t\t\tintData = this.getNextBits(4);\r\n\t\t\t\t\tlength -= 1;\r\n\t\t\t\t}\r\n\t\t\t\tstrData += intData;\r\n\t\t\t}\r\n\t\t\twhile (length > 0);\r\n\r\n\t\t\treturn strData;\r\n\t\t}\r\n\t\tthis.get8bitByteArray = function (dataLength) {\r\n\t\t\tvar length = dataLength;\r\n\t\t\tvar intData = 0;\r\n\t\t\tvar output = new Array();\r\n\r\n\t\t\tdo {\r\n\t\t\t\tintData = this.getNextBits(8);\r\n\t\t\t\toutput.push(intData);\r\n\t\t\t\tlength--;\r\n\t\t\t}\r\n\t\t\twhile (length > 0);\r\n\t\t\treturn output;\r\n\t\t}\r\n\t\tthis.getKanjiString = function (dataLength) {\r\n\t\t\tvar length = dataLength;\r\n\t\t\tvar intData = 0;\r\n\t\t\tvar unicodeString = \"\";\r\n\t\t\tdo {\r\n\t\t\t\tintData = this.getNextBits(13);\r\n\t\t\t\tvar lowerByte = intData % 0xC0;\r\n\t\t\t\tvar higherByte = intData / 0xC0;\r\n\r\n\t\t\t\tvar tempWord = (higherByte << 8) + lowerByte;\r\n\t\t\t\tvar shiftjisWord = 0;\r\n\t\t\t\tif (tempWord + 0x8140 <= 0x9FFC) {\r\n\t\t\t\t\t// between 8140 - 9FFC on Shift_JIS character set\r\n\t\t\t\t\tshiftjisWord = tempWord + 0x8140;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// between E040 - EBBF on Shift_JIS character set\r\n\t\t\t\t\tshiftjisWord = tempWord + 0xC140;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//var tempByte = new Array(0,0);\r\n\t\t\t\t//tempByte[0] = (sbyte) (shiftjisWord >> 8);\r\n\t\t\t\t//tempByte[1] = (sbyte) (shiftjisWord & 0xFF);\r\n\t\t\t\t//unicodeString += new String(SystemUtils.ToCharArray(SystemUtils.ToByteArray(tempByte)));\r\n\t\t\t\tunicodeString += String.fromCharCode(shiftjisWord);\r\n\t\t\t\tlength--;\r\n\t\t\t}\r\n\t\t\twhile (length > 0);\r\n\r\n\r\n\t\t\treturn unicodeString;\r\n\t\t}\r\n\r\n\t\tthis.parseECIValue = function () {\r\n\t\t\tvar intData = 0;\r\n\t\t\tvar firstByte = this.getNextBits(8);\r\n\t\t\tif ((firstByte & 0x80) == 0) {\r\n\t\t\t\tintData = firstByte & 0x7F;\r\n\t\t\t}\r\n\t\t\tif ((firstByte & 0xC0) == 0x80) {\r\n\t\t\t\t// two bytes\r\n\t\t\t\tvar secondByte = this.getNextBits(8);\r\n\t\t\t\tintData = ((firstByte & 0x3F) << 8) | secondByte;\r\n\t\t\t}\r\n\t\t\tif ((firstByte & 0xE0) == 0xC0) {\r\n\t\t\t\t// three bytes\r\n\t\t\t\tvar secondThirdBytes = this.getNextBits(8);;\r\n\t\t\t\tintData = ((firstByte & 0x1F) << 16) | secondThirdBytes;\r\n\t\t\t}\r\n\t\t\treturn intData;\r\n\t\t}\r\n\r\n\t\tthis.__defineGetter__(\"DataByte\", function () {\r\n\t\t\tvar output = new Array();\r\n\t\t\tvar MODE_NUMBER = 1;\r\n\t\t\tvar MODE_ROMAN_AND_NUMBER = 2;\r\n\t\t\tvar MODE_8BIT_BYTE = 4;\r\n\t\t\tvar MODE_ECI = 7;\r\n\t\t\tvar MODE_KANJI = 8;\r\n\t\t\tdo {\r\n\t\t\t\tvar mode = this.NextMode();\r\n\t\t\t\t//canvas.println(\"mode: \" + mode);\r\n\t\t\t\tif (mode == 0) {\r\n\t\t\t\t\tif (output.length > 0)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthrow \"Empty data block\";\r\n\t\t\t\t}\r\n\t\t\t\tif (mode != MODE_NUMBER && mode != MODE_ROMAN_AND_NUMBER && mode != MODE_8BIT_BYTE && mode != MODE_KANJI && mode != MODE_ECI) {\r\n\t\t\t\t\tthrow \"Invalid mode: \" + mode + \" in (block:\" + this.blockPointer + \" bit:\" + this.bitPointer + \")\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (mode == MODE_ECI) {\r\n\t\t\t\t\tvar temp_sbyteArray3 = this.parseECIValue();\r\n\t\t\t\t\t//output.push(temp_sbyteArray3);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tvar dataLength = this.getDataLength(mode);\r\n\t\t\t\t\tif (dataLength < 1)\r\n\t\t\t\t\t\tthrow \"Invalid data length: \" + dataLength;\r\n\t\t\t\t\tswitch (mode) {\r\n\r\n\t\t\t\t\t\tcase MODE_NUMBER:\r\n\t\t\t\t\t\t\tvar temp_str = this.getFigureString(dataLength);\r\n\t\t\t\t\t\t\tvar ta = new Array(temp_str.length);\r\n\t\t\t\t\t\t\tfor (var j = 0; j < temp_str.length; j++)\r\n\t\t\t\t\t\t\t\tta[j] = temp_str.charCodeAt(j);\r\n\t\t\t\t\t\t\toutput.push(ta);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MODE_ROMAN_AND_NUMBER:\r\n\t\t\t\t\t\t\tvar temp_str = this.getRomanAndFigureString(dataLength);\r\n\t\t\t\t\t\t\tvar ta = new Array(temp_str.length);\r\n\t\t\t\t\t\t\tfor (var j = 0; j < temp_str.length; j++)\r\n\t\t\t\t\t\t\t\tta[j] = temp_str.charCodeAt(j);\r\n\t\t\t\t\t\t\toutput.push(ta);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MODE_8BIT_BYTE:\r\n\t\t\t\t\t\t\tvar temp_sbyteArray3 = this.get8bitByteArray(dataLength);\r\n\t\t\t\t\t\t\toutput.push(temp_sbyteArray3);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MODE_KANJI:\r\n\t\t\t\t\t\t\tvar temp_str = this.getKanjiString(dataLength);\r\n\t\t\t\t\t\t\toutput.push(temp_str);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhile (true);\r\n\t\t\treturn output;\r\n\t\t});\r\n\t}\r\n\r\n\treturn qrcode;\r\n}","import getLazarSoftScanner from './qrcode';\r\n\r\n/**\r\n * @fileoverview\r\n * HTML5 QR code scanning library.\r\n * - Decode QR Code using web cam or smartphone camera\r\n * \r\n * @author mebjas <minhazav@gmail.com>\r\n * \r\n * The word \"QR Code\" is registered trademark of DENSO WAVE INCORPORATED\r\n * http://www.denso-wave.com/qrcode/faqpatent-e.html\r\n * \r\n * Note: ECMA Script is not supported by all browsers. Use minified/html5-qrcode.min.js for better\r\n * browser support. Alternatively the transpiled code lives in transpiled/html5-qrcode.js\r\n */\r\nexport default class Html5Qrcode {\r\n    //#region static constants\r\n    static DEFAULT_WIDTH = 300;\r\n    static DEFAULT_WIDTH_OFFSET = 2;\r\n    static FILE_SCAN_MIN_HEIGHT = 300;\r\n    static SCAN_DEFAULT_FPS = 2;\r\n    static MIN_QR_BOX_SIZE = 50;\r\n    static SHADED_LEFT = 1;\r\n    static SHADED_RIGHT = 2;\r\n    static SHADED_TOP = 3;\r\n    static SHADED_BOTTOM = 4;\r\n    static SHADED_REGION_CLASSNAME = \"qr-shaded-region\";\r\n    static VERBOSE = false;\r\n    static BORDER_SHADER_DEFAULT_COLOR = \"#ffffff\";\r\n    static BORDER_SHADER_MATCH_COLOR = \"rgb(90, 193, 56)\";\r\n    //#endregion\r\n\r\n    /**\r\n     * Initialize QR Code scanner.\r\n     * \r\n     * @param {String} elementId - Id of the HTML element. \r\n     * @param {Boolean} verbose - Optional argument, if true, all logs\r\n     *                  would be printed to console. \r\n     */\r\n    constructor(elementId, verbose) {\r\n        if (!getLazarSoftScanner) {\r\n            throw 'Use html5qrcode.min.js without edit, getLazarSoftScanner'\r\n            + 'not found.';\r\n        }\r\n\r\n        this.qrcode = getLazarSoftScanner();\r\n        if (!this.qrcode) {\r\n            throw 'qrcode is not defined, use the minified/html5-qrcode.min.js'\r\n            + ' for proper support';\r\n        }\r\n\r\n        this._elementId = elementId;\r\n        this._foreverScanTimeout = null;\r\n        this._localMediaStream = null;\r\n        this._shouldScan = true;\r\n        this._url\r\n            = window.URL || window.webkitURL || window.mozURL || window.msURL;\r\n        this._userMedia\r\n            = navigator.getUserMedia || navigator.webkitGetUserMedia\r\n            || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n        this._isScanning = false;\r\n\r\n        Html5Qrcode.VERBOSE = verbose === true;\r\n    }\r\n\r\n    /**\r\n     * Start scanning QR Code for given camera.\r\n     * \r\n     * @param {String or Object} identifier of the camera, it can either be the\r\n     *  cameraId retrieved from {@code Html5Qrcode#getCameras()} method or\r\n     *  object with facingMode constraint.\r\n     *  Example values:\r\n     *      - \"a76afe74e95e3aba9fc1b69c39b8701cde2d3e29aa73065c9cd89438627b3bde\"\r\n     *          ^ This is 'deviceId' from camera retrieved from \r\n     *          {@code Html5Qrcode#getCameras()}\r\n     *      - { facingMode: \"user\" }\r\n     *      - { facingMode: \"environment\" }\r\n     *      - { facingMode: { exact: \"environment\" } }\r\n     *      - { facingMode: { exact: \"user\" } }\r\n     *      - { deviceId: { exact: \"a76afe74e95e3....73065c9cd89438627b3bde\" }\r\n     *      - { deviceId: \"a76afe74e95e3....73065c9cd89438627b3bde\" }\r\n     *  Reference: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Syntax\r\n     * @param {Object} config extra configurations to tune QR code scanner.\r\n     *  Supported Fields:\r\n     *      - fps: expected framerate of qr code scanning. example { fps: 2 }\r\n     *          means the scanning would be done every 500 ms.\r\n     *      - qrbox: width of QR scanning box, this should be smaller than\r\n     *          the width and height of the box. This would make the scanner\r\n     *          look like this:\r\n     *          ----------------------\r\n     *          |********************|\r\n     *          |******,,,,,,,,,*****|      <--- shaded region\r\n     *          |******|       |*****|      <--- non shaded region would be\r\n     *          |******|       |*****|          used for QR code scanning.\r\n     *          |******|_______|*****|\r\n     *          |********************|\r\n     *          |********************|\r\n     *          ----------------------\r\n     *      - aspectRatio: Optional, desired aspect ratio for the video feed.\r\n     *          Ideal aspect ratios are 4:3 or 16:9. Passing very wrong aspect\r\n     *          ratio could lead to video feed not showing up.\r\n     *      - disableFlip: Optional, if {@code true} flipped QR Code won't be\r\n     *          scanned. Only use this if you are sure the camera cannot give\r\n     *          mirrored feed if you are facing performance constraints.\r\n     * @param {Function} qrCodeSuccessCallback callback on QR Code found.\r\n     *  Example:\r\n     *      function(qrCodeMessage) {}\r\n     * @param {Function} qrCodeErrorCallback callback on QR Code parse error.\r\n     *  Example:\r\n     *      function(errorMessage) {}\r\n     * \r\n     * @returns Promise for starting the scan. The Promise can fail if the user\r\n     * doesn't grant permission or some API is not supported by the browser.\r\n     */\r\n    start(cameraIdOrConfig,\r\n        configuration,\r\n        qrCodeSuccessCallback,\r\n        qrCodeErrorCallback) {\r\n        if (!cameraIdOrConfig) {\r\n            throw \"cameraIdOrConfig is required\";\r\n        }\r\n\r\n        if (!qrCodeSuccessCallback\r\n            || typeof qrCodeSuccessCallback != \"function\") {\r\n            throw \"qrCodeSuccessCallback is required and should be a function.\"\r\n        }\r\n\r\n        if (!qrCodeErrorCallback) {\r\n            qrCodeErrorCallback = console.log;\r\n        }\r\n\r\n        // Cleanup.\r\n        this._clearElement();\r\n        const $this = this;\r\n\r\n        // Create configuration by merging default and input settings.\r\n        const config = configuration ? configuration : {};\r\n        config.fps = config.fps ? config.fps : Html5Qrcode.SCAN_DEFAULT_FPS;\r\n\r\n        // qr shaded box\r\n        const isShadedBoxEnabled = config.qrbox != undefined;\r\n        const element = document.getElementById(this._elementId);\r\n        const width = element.clientWidth\r\n            ? element.clientWidth : Html5Qrcode.DEFAULT_WIDTH;\r\n        element.style.position = \"relative\";\r\n\r\n        this._shouldScan = true;\r\n        this._element = element;\r\n        this.qrcode.callback = qrCodeSuccessCallback;\r\n\r\n        // Validate before insertion\r\n        if (isShadedBoxEnabled) {\r\n            const qrboxSize = config.qrbox;\r\n            if (qrboxSize < Html5Qrcode.MIN_QR_BOX_SIZE) {\r\n                throw \"minimum size of 'config.qrbox' is\"\r\n                + ` ${Html5Qrcode.MIN_QR_BOX_SIZE}px.`;\r\n            }\r\n\r\n            if (qrboxSize > width) {\r\n                throw \"'config.qrbox' should not be greater than the \"\r\n                + \"width of the HTML element.\";\r\n            }\r\n        }\r\n\r\n        //#region local methods\r\n        /**\r\n         * Setups the UI elements, changes the state of this class.\r\n         * \r\n         * @param width derived width of viewfinder.\r\n         * @param height derived height of viewfinder.\r\n         */\r\n        const setupUi = (width, height) => {\r\n            const qrboxSize = config.qrbox;\r\n            if (qrboxSize > height) {\r\n                console.warn(\"[Html5Qrcode] config.qrboxsize is greater \"\r\n                    + \"than video height. Shading will be ignored\");\r\n            }\r\n\r\n            const shouldShadingBeApplied\r\n                = isShadedBoxEnabled && qrboxSize <= height;\r\n            const defaultQrRegion = {\r\n                x: 0,\r\n                y: 0,\r\n                width: width,\r\n                height: height\r\n            };\r\n            const qrRegion = shouldShadingBeApplied\r\n                ? this._getShadedRegionBounds(width, height, qrboxSize)\r\n                : defaultQrRegion;\r\n\r\n            const canvasElement = this._createCanvasElement(\r\n                qrRegion.width, qrRegion.height);\r\n            const context = canvasElement.getContext('2d');\r\n            context.canvas.width = qrRegion.width;\r\n            context.canvas.height = qrRegion.height;\r\n\r\n            // Insert the canvas\r\n            element.append(canvasElement);\r\n            if (shouldShadingBeApplied) {\r\n                this._possiblyInsertShadingElement(element, height, qrRegion);\r\n            }\r\n\r\n            // Update local states\r\n            $this._qrRegion = qrRegion;\r\n            $this._context = context;\r\n            $this._canvasElement = canvasElement;\r\n        }\r\n\r\n        /**\r\n         * Scans current context using the qrcode library.\r\n         * \r\n         * <p>This method call would result in callback being triggered by the\r\n         * qrcode library. This method also handles the border coloring.\r\n         * \r\n         * @returns true if scan match is found, false otherwise.\r\n         */\r\n        const scanContext = () => {\r\n            try {\r\n                $this.qrcode.decode();\r\n                this._possiblyUpdateShaders(/* qrMatch= */ true);\r\n                return true;\r\n            } catch (exception) {\r\n                this._possiblyUpdateShaders(/* qrMatch= */ false);\r\n                qrCodeErrorCallback(\r\n                    `QR code parse error, error = ${exception}`);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Method that scans forever.\r\n        const foreverScan = () => {\r\n            if (!$this._shouldScan) {\r\n                // Stop scanning.\r\n                return;\r\n            }\r\n            if ($this._localMediaStream) {\r\n\r\n                // There is difference in size of rendered video and one that is\r\n                // considered by the canvas. Need to account for scaling factor.\r\n                const videoElement = $this._videoElement;\r\n                const widthRatio\r\n                    = videoElement.videoWidth / videoElement.clientWidth;\r\n                const heightRatio\r\n                    = videoElement.videoHeight / videoElement.clientHeight;\r\n                const sWidthOffset = $this._qrRegion.width * widthRatio;\r\n                const sHeightOffset = $this._qrRegion.height * heightRatio;\r\n                const sxOffset = $this._qrRegion.x * widthRatio;\r\n                const syOffset = $this._qrRegion.y * heightRatio;\r\n\r\n                // Only decode the relevant area, ignore the shaded area,\r\n                // More reference:\r\n                // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\r\n                $this._context.drawImage(\r\n                    $this._videoElement,\r\n                    /* sx= */ sxOffset,\r\n                    /* sy= */ syOffset,\r\n                    /* sWidth= */ sWidthOffset,\r\n                    /* sHeight= */ sHeightOffset,\r\n                    /* dx= */ 0,\r\n                    /* dy= */  0,\r\n                    /* dWidth= */ $this._qrRegion.width,\r\n                    /* dHeight= */ $this._qrRegion.height);\r\n\r\n                    // Try scanning normal frame and in case of failure, scan\r\n                    // the inverted context if not explictly disabled.\r\n                    // TODO(mebjas): Move this logic to qrcode.js\r\n                    if (!scanContext() && config.disableFlip !== true) {\r\n                        // scan inverted context.\r\n                        this._context.translate(this._context.canvas.width, 0);\r\n                        this._context.scale(-1, 1);\r\n                        scanContext();\r\n                    }\r\n            }\r\n            $this._foreverScanTimeout = setTimeout(\r\n                foreverScan, Html5Qrcode._getTimeoutFps(config.fps));\r\n        }\r\n\r\n        // success callback when user media (Camera) is attached.\r\n        const onMediaStreamReceived = mediaStream => {\r\n            return new Promise((resolve, reject) => {\r\n                const setupVideo = () => {\r\n                    const videoElement = this._createVideoElement(width);\r\n                    $this._element.append(videoElement);\r\n                    // Attach listeners to video.\r\n                    videoElement.onabort = reject;\r\n                    videoElement.onerror = reject;\r\n                    videoElement.onplaying = () => {\r\n                        const videoWidth = videoElement.clientWidth;\r\n                        const videoHeight = videoElement.clientHeight;\r\n                        setupUi(videoWidth, videoHeight);\r\n\r\n                        // start scanning after video feed has started\r\n                        foreverScan();\r\n                        resolve();\r\n                    }\r\n\r\n                    videoElement.srcObject = mediaStream;\r\n                    videoElement.play();\r\n\r\n                    // Set state\r\n                    $this._videoElement = videoElement;\r\n                }\r\n\r\n                $this._localMediaStream = mediaStream;\r\n                if (!config.aspectRatio) {\r\n                    setupVideo();\r\n                } else {\r\n                    const constraints = {\r\n                        aspectRatio : config.aspectRatio\r\n                    }\r\n                    const track = mediaStream.getVideoTracks()[0];\r\n                    track.applyConstraints(constraints)\r\n                        .then(_ => setupVideo())\r\n                        .catch(error => {\r\n                            console.log(\"[Warning] [Html5Qrcode] Constriants could not be satisfied, ignoring constraints\", error);\r\n                            setupVideo();\r\n                        });\r\n                }\r\n            });\r\n        }\r\n        //#endregion\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n                const videoConstraints = $this._createVideoConstraints(\r\n                    cameraIdOrConfig);\r\n                navigator.mediaDevices.getUserMedia(\r\n                    {\r\n                        audio: false,\r\n                        video: videoConstraints\r\n                    }).then(stream => {\r\n                        onMediaStreamReceived(stream)\r\n                            .then(_ => {\r\n                                $this._isScanning = true;\r\n                                resolve();\r\n                            })\r\n                            .catch(reject);\r\n                    })\r\n                    .catch(err => {\r\n                        reject(`Error getting userMedia, error = ${err}`);\r\n                    });\r\n            } else if (navigator.getUserMedia) {\r\n                if (typeof cameraIdOrConfig != \"string\") {\r\n                    throw \"The device doesn't support navigator.mediaDevices\"\r\n                        + \", only supported cameraIdOrConfig in this case is\"\r\n                        + \" deviceId parameter (string).\"\r\n                }\r\n                const getCameraConfig = {\r\n                    video: {\r\n                        optional: [{\r\n                            sourceId: cameraIdOrConfig\r\n                        }]\r\n                    }\r\n                };\r\n                navigator.getUserMedia(getCameraConfig,\r\n                    stream => {\r\n                        onMediaStreamReceived(stream)\r\n                            .then(_ => {\r\n                                $this._isScanning = true;\r\n                                resolve();\r\n                            })\r\n                            .catch(reject);\r\n                    }, err => {\r\n                        reject(`Error getting userMedia, error = ${err}`);\r\n                    });\r\n            } else {\r\n                reject(\"Web camera streaming not supported by the browser.\");\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Stops streaming QR Code video and scanning. \r\n     * \r\n     * @returns Promise for safely closing the video stream.\r\n     */\r\n    stop() {\r\n        // TODO(mebjas): fail fast if the start() wasn't called.\r\n        this._shouldScan = false;\r\n        clearTimeout(this._foreverScanTimeout);\r\n\r\n        const $this = this;\r\n        return new Promise((resolve, /* ignore */ reject) => {\r\n            $this.qrcode.callback = null;\r\n            const tracksToClose\r\n                = $this._localMediaStream.getVideoTracks().length;\r\n            var tracksClosed = 0;\r\n\r\n            // Removes the shaded region if exists.\r\n            const removeQrRegion = () => {\r\n                while ($this._element.getElementsByClassName(\r\n                    Html5Qrcode.SHADED_REGION_CLASSNAME).length) {\r\n                    const shadedChild = $this._element.getElementsByClassName(\r\n                        Html5Qrcode.SHADED_REGION_CLASSNAME)[0];\r\n                    $this._element.removeChild(shadedChild);\r\n                }\r\n            }\r\n\r\n            const onAllTracksClosed = () => {\r\n                $this._localMediaStream = null;\r\n                $this._element.removeChild($this._videoElement);\r\n                $this._element.removeChild($this._canvasElement);\r\n                removeQrRegion();\r\n                $this._isScanning = false;\r\n                if ($this._qrRegion) {\r\n                    $this._qrRegion = null;\r\n                }\r\n                if ($this._context) {\r\n                    $this._context = null;\r\n                }\r\n                resolve(true);\r\n            }\r\n\r\n            $this._localMediaStream.getVideoTracks().forEach(videoTrack => {\r\n                videoTrack.stop();\r\n                ++tracksClosed;\r\n\r\n                if (tracksClosed >= tracksToClose) {\r\n                    onAllTracksClosed();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Scans an Image File for QR Code.\r\n     * \r\n     * This feature is mutually exclusive to camera based scanning, you should\r\n     * call stop() if the camera based scanning was ongoing.\r\n     * \r\n     * @param {File} imageFile a local file with Image content.\r\n     * @param {boolean} showImage if true the Image will be rendered on given\r\n     * element.\r\n     * \r\n     * @returns Promise with decoded QR code string on success and error message\r\n      *             on failure. Failure could happen due to different reasons:\r\n     *            1. QR Code decode failed because enough patterns not found in\r\n      *                 image.\r\n     *            2. Input file was not image or unable to load the image or\r\n      *                 other image load errors.\r\n     */\r\n    scanFile(imageFile, /* default=true */ showImage) {\r\n        const $this = this;\r\n        if (!imageFile || !(imageFile instanceof File)) {\r\n            throw \"imageFile argument is mandatory and should be instance \"\r\n            + \"of File. Use 'event.target.files[0]'\";\r\n        }\r\n\r\n        showImage = showImage === undefined ? true : showImage;\r\n\r\n        if ($this._isScanning) {\r\n            throw \"Close ongoing scan before scanning a file.\";\r\n        }\r\n\r\n        const computeCanvasDrawConfig = (\r\n            imageWidth,\r\n            imageHeight,\r\n            containerWidth,\r\n            containerHeight) => {\r\n\r\n            if (imageWidth <= containerWidth\r\n                && imageHeight <= containerHeight) {\r\n                // no downsampling needed.\r\n                const xoffset = (containerWidth - imageWidth) / 2;\r\n                const yoffset = (containerHeight - imageHeight) / 2;\r\n                return {\r\n                    x: xoffset,\r\n                    y: yoffset,\r\n                    width: imageWidth,\r\n                    height: imageHeight\r\n                };\r\n            } else {\r\n                const formerImageWidth = imageWidth;\r\n                const formerImageHeight = imageHeight;\r\n                if (imageWidth > containerWidth) {\r\n                    imageHeight = (containerWidth / imageWidth) * imageHeight;\r\n                    imageWidth = containerWidth;\r\n                }\r\n\r\n                if (imageHeight > containerHeight) {\r\n                    imageWidth = (containerHeight / imageHeight) * imageWidth;\r\n                    imageHeight = containerHeight;\r\n                }\r\n\r\n                Html5Qrcode._log(\r\n                    \"Image downsampled from \"\r\n                    + `${formerImageWidth}X${formerImageHeight}`\r\n                    + ` to ${imageWidth}X${imageHeight}.`);\r\n\r\n                return computeCanvasDrawConfig(\r\n                    imageWidth, imageHeight, containerWidth, containerHeight);\r\n            }\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            $this._possiblyCloseLastScanImageFile();\r\n            $this._clearElement();\r\n            $this._lastScanImageFile = imageFile;\r\n\r\n            const inputImage = new Image;\r\n            inputImage.onload = () => {\r\n                const imageWidth = inputImage.width;\r\n                const imageHeight = inputImage.height;\r\n                const element = document.getElementById($this._elementId);\r\n                const containerWidth = element.clientWidth\r\n                    ? element.clientWidth : Html5Qrcode.DEFAULT_WIDTH;\r\n                // No default height anymore.\r\n                const containerHeight =  Math.max(\r\n                    element.clientHeight ? element.clientHeight : imageHeight,\r\n                    Html5Qrcode.FILE_SCAN_MIN_HEIGHT);\r\n\r\n                const config = computeCanvasDrawConfig(\r\n                    imageWidth, imageHeight, containerWidth, containerHeight);\r\n                if (showImage) {\r\n                    const visibleCanvas = $this._createCanvasElement(\r\n                        containerWidth, containerHeight, 'qr-canvas-visible');\r\n                    visibleCanvas.style.display = \"inline-block\";\r\n                    element.appendChild(visibleCanvas);\r\n                    const context = visibleCanvas.getContext('2d');\r\n                    context.canvas.width = containerWidth;\r\n                    context.canvas.height = containerHeight;\r\n                    // More reference\r\n                    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\r\n                    context.drawImage(\r\n                        inputImage,\r\n                        /* sx= */ 0,\r\n                        /* sy= */ 0,\r\n                        /* sWidth= */ imageWidth,\r\n                        /* sHeight= */ imageHeight,\r\n                        /* dx= */ config.x,\r\n                        /* dy= */  config.y,\r\n                        /* dWidth= */ config.width,\r\n                        /* dHeight= */ config.height);\r\n                }\r\n\r\n                const hiddenCanvas = $this._createCanvasElement(config.width, config.height);\r\n                element.appendChild(hiddenCanvas);\r\n                const context = hiddenCanvas.getContext('2d');\r\n                context.canvas.width = config.width;\r\n                context.canvas.height = config.height;\r\n                context.drawImage(\r\n                    inputImage,\r\n                    /* sx= */ 0,\r\n                    /* sy= */ 0,\r\n                    /* sWidth= */ imageWidth,\r\n                    /* sHeight= */ imageHeight,\r\n                    /* dx= */ 0,\r\n                    /* dy= */  0,\r\n                    /* dWidth= */ config.width,\r\n                    /* dHeight= */ config.height);\r\n                try {\r\n                    resolve($this.qrcode.decode());\r\n                } catch (exception) {\r\n                    reject(`QR code parse error, error = ${exception}`);\r\n                }\r\n            }\r\n\r\n            inputImage.onerror = reject;\r\n            inputImage.onabort = reject;\r\n            inputImage.onstalled = reject;\r\n            inputImage.onsuspend = reject;\r\n            inputImage.src = URL.createObjectURL(imageFile);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Clears the existing canvas.\r\n     * \r\n     * Note: in case of ongoing web cam based scan, it needs to be explicitly\r\n     * closed before calling this method, else it will throw exception.\r\n     */\r\n    clear() {\r\n        this._clearElement();\r\n    }\r\n\r\n    /**\r\n     * Returns a Promise with list of all cameras supported by the device.\r\n     * \r\n     * The returned object is a list of result object of type:\r\n     * [{\r\n     *      id: String;     // Id of the camera.\r\n     *      label: String;  // Human readable name of the camera.\r\n     * }]\r\n     */\r\n    static getCameras() {\r\n        return new Promise((resolve, reject) => {\r\n            if (navigator.mediaDevices\r\n                && navigator.mediaDevices.enumerateDevices\r\n                && navigator.mediaDevices.getUserMedia) {\r\n                this._log(\"navigator.mediaDevices used\");\r\n                navigator.mediaDevices.getUserMedia(\r\n                    { audio: false, video: true })\r\n                    .then(stream => {\r\n                        // hacky approach to close any active stream if they are\r\n                        // active.\r\n                        stream.oninactive\r\n                            = _ => this._log(\"All streams closed\");\r\n                        const closeActiveStreams = stream => {\r\n                            const tracks = stream.getVideoTracks();\r\n                            for (var i = 0; i < tracks.length; i++) {\r\n                                const track = tracks[i];\r\n                                track.enabled = false;\r\n                                track.stop();\r\n                                stream.removeTrack(track);\r\n                            }\r\n                        }\r\n\r\n                        navigator.mediaDevices.enumerateDevices()\r\n                            .then(devices => {\r\n                                const results = [];\r\n                                for (var i = 0; i < devices.length; i++) {\r\n                                    const device = devices[i];\r\n                                    if (device.kind == \"videoinput\") {\r\n                                        results.push({\r\n                                            id: device.deviceId,\r\n                                            label: device.label\r\n                                        });\r\n                                    }\r\n                                }\r\n                                this._log(`${results.length} results found`);\r\n                                closeActiveStreams(stream);\r\n                                resolve(results);\r\n                            })\r\n                            .catch(err => {\r\n                                reject(`${err.name} : ${err.message}`);\r\n                            });\r\n                    })\r\n                    .catch(err => {\r\n                        reject(`${err.name} : ${err.message}`);\r\n                    })\r\n            } else if (MediaStreamTrack && MediaStreamTrack.getSources) {\r\n                this._log(\"MediaStreamTrack.getSources used\");\r\n                const callback = sourceInfos => {\r\n                    const results = [];\r\n                    for (var i = 0; i !== sourceInfos.length; ++i) {\r\n                        const sourceInfo = sourceInfos[i];\r\n                        if (sourceInfo.kind === 'video') {\r\n                            results.push({\r\n                                id: sourceInfo.id,\r\n                                label: sourceInfo.label\r\n                            });\r\n                        }\r\n                    }\r\n                    this._log(`${results.length} results found`);\r\n                    resolve(results);\r\n                }\r\n                MediaStreamTrack.getSources(callback);\r\n            } else {\r\n                this._log(\"unable to query supported devices.\");\r\n                reject(\"unable to query supported devices.\");\r\n            }\r\n        });\r\n    }\r\n\r\n    _clearElement() {\r\n        if (this._isScanning) {\r\n            throw 'Cannot clear while scan is ongoing, close it first.';\r\n        }\r\n        const element = document.getElementById(this._elementId);\r\n        element.innerHTML = \"\";\r\n    }\r\n\r\n    _createCanvasElement(width, height, customId) {\r\n        const canvasWidth = width;\r\n        const canvasHeight = height;\r\n        const canvasElement = document.createElement('canvas');\r\n        canvasElement.style.width = `${canvasWidth}px`;\r\n        canvasElement.style.height = `${canvasHeight}px`;\r\n        canvasElement.style.display = \"none\";\r\n        // This id is set by lazarsoft/jsqrcode\r\n        canvasElement.id = customId == undefined ? 'qr-canvas' : customId;\r\n        return canvasElement;\r\n    }\r\n\r\n    _createVideoElement(width) {\r\n        const videoElement = document.createElement('video');\r\n        videoElement.style.width = `${width}px`;\r\n        videoElement.muted = true;\r\n        videoElement.playsInline = true;\r\n        return videoElement;\r\n    }\r\n\r\n    _getShadedRegionBounds(width, height, qrboxSize) {\r\n        if (qrboxSize > width || qrboxSize > height) {\r\n            throw \"'config.qrbox' should not be greater than the \"\r\n            + \"width and height of the HTML element.\";\r\n        }\r\n\r\n        return {\r\n            x: (width - qrboxSize) / 2,\r\n            y: (height - qrboxSize) / 2,\r\n            width: qrboxSize,\r\n            height: qrboxSize\r\n        };\r\n    }\r\n\r\n    _possiblyInsertShadingElement(element, height, qrRegion) {\r\n        if (qrRegion.x == 0 && qrRegion.y == 0) {\r\n            // No shading\r\n            return;\r\n        }\r\n\r\n        const shaders = {};\r\n        shaders[Html5Qrcode.SHADED_LEFT] = this._createShadedElement(\r\n            height, qrRegion, Html5Qrcode.SHADED_LEFT);\r\n        shaders[Html5Qrcode.SHADED_RIGHT] = this._createShadedElement(\r\n            height, qrRegion, Html5Qrcode.SHADED_RIGHT);\r\n        shaders[Html5Qrcode.SHADED_TOP] = this._createShadedElement(\r\n            height, qrRegion, Html5Qrcode.SHADED_TOP);\r\n        shaders[Html5Qrcode.SHADED_BOTTOM] = this._createShadedElement(\r\n            height, qrRegion, Html5Qrcode.SHADED_BOTTOM);\r\n\r\n        Object.keys(shaders).forEach(key => element.append(shaders[key]));\r\n\r\n        if (qrRegion.x < 10 || qrRegion.y < 10) {\r\n            this.hasBorderShaders = false;\r\n        } else {\r\n            Object.keys(shaders).forEach(key =>\r\n                this._insertShaderBorders(shaders[key], qrRegion, key));\r\n            this.hasBorderShaders = true;\r\n        }\r\n\r\n    }\r\n\r\n    _createShadedElement(height, qrRegion, shadingPosition) {\r\n        const elem = document.createElement('div');\r\n        elem.style.position = \"absolute\";\r\n        elem.style.height = `${height}px`;\r\n        elem.className = Html5Qrcode.SHADED_REGION_CLASSNAME;\r\n        elem.id = `${Html5Qrcode.SHADED_REGION_CLASSNAME}_${shadingPosition}`\r\n        // TODO(mebjas): maken this configurable\r\n        elem.style.background = `#0000007a`;\r\n        switch (shadingPosition) {\r\n            case Html5Qrcode.SHADED_LEFT:\r\n                elem.style.top = \"0px\";\r\n                elem.style.left = \"0px\";\r\n                elem.style.width = `${qrRegion.x}px`;\r\n                elem.style.height = `${height}px`;\r\n                break;\r\n            case Html5Qrcode.SHADED_RIGHT:\r\n                elem.style.top = \"0px\";\r\n                elem.style.right = \"0px\";\r\n                elem.style.width = `${qrRegion.x}px`;\r\n                elem.style.height = `${height}px`;\r\n                break;\r\n            case Html5Qrcode.SHADED_TOP:\r\n                elem.style.top = \"0px\";\r\n                elem.style.left = `${qrRegion.x}px`;\r\n                elem.style.width = `${qrRegion.width}px`;\r\n                elem.style.height = `${qrRegion.y}px`;\r\n                break;\r\n            case Html5Qrcode.SHADED_BOTTOM:\r\n                const top = qrRegion.y + qrRegion.height;\r\n                elem.style.top = `${top}px`;\r\n                elem.style.left = `${qrRegion.x}px`;\r\n                elem.style.width = `${qrRegion.width}px`;\r\n                elem.style.height = `${qrRegion.y}px`;\r\n                break;\r\n            default:\r\n                throw \"Unsupported shadingPosition\";\r\n        }\r\n\r\n        return elem;\r\n    }\r\n\r\n    _insertShaderBorders(shaderElem, qrRegion, shadingPosition) {\r\n        shadingPosition = parseInt(shadingPosition);\r\n        const $this = this;\r\n        const borderOffset = 5;\r\n        const smallSize = 5;\r\n        const largeSize = 40;\r\n        const createBorder = () => {\r\n            const elem = document.createElement(\"div\");\r\n            elem.style.position = \"absolute\";\r\n            elem.style.backgroundColor\r\n                = Html5Qrcode.BORDER_SHADER_DEFAULT_COLOR;\r\n            switch (shadingPosition) {\r\n                case Html5Qrcode.SHADED_LEFT:   // intentional\r\n                case Html5Qrcode.SHADED_RIGHT:\r\n                    const height = largeSize + borderOffset;\r\n                    elem.style.width = `${smallSize}px`;\r\n                    elem.style.height = `${height}px`;\r\n                    break;\r\n                case Html5Qrcode.SHADED_TOP:   // intentional\r\n                case Html5Qrcode.SHADED_BOTTOM:\r\n                    const width = largeSize + borderOffset;\r\n                    elem.style.width = `${width}px`;\r\n                    elem.style.height = `${smallSize}px`;\r\n                    break;\r\n                default:\r\n                    throw \"Unsupported shadingPosition\";\r\n            }\r\n            return elem;\r\n        }\r\n\r\n        const insertBorder = (top, left) => {\r\n            if (!(top !== null && left !== null)) {\r\n                throw \"Shaders should have defined positions\"\r\n            }\r\n            const borderElem = createBorder();\r\n            borderElem.style.top = `${top}px`;\r\n            borderElem.style.left = `${left}px`;\r\n            shaderElem.appendChild(borderElem);\r\n\r\n            if (!$this.borderShaders) {\r\n                $this.borderShaders = [];\r\n            }\r\n\r\n            $this.borderShaders.push(borderElem);\r\n        }\r\n\r\n        let firstTop = null;\r\n        let firstLeft = null;\r\n        let secondTop = null;\r\n        let secondLeft = null;\r\n        switch (shadingPosition) {\r\n            case Html5Qrcode.SHADED_LEFT:\r\n                firstTop = qrRegion.y - borderOffset;\r\n                firstLeft = qrRegion.x - smallSize;\r\n                secondTop = qrRegion.y + qrRegion.height - largeSize;\r\n                secondLeft = firstLeft;\r\n                break;\r\n            case Html5Qrcode.SHADED_RIGHT:\r\n                firstTop = qrRegion.y - borderOffset;\r\n                firstLeft = 0;\r\n                secondTop = qrRegion.y + qrRegion.height - largeSize;\r\n                secondLeft = firstLeft;\r\n                break;\r\n            case Html5Qrcode.SHADED_TOP:\r\n                firstTop = qrRegion.y - borderOffset;\r\n                firstLeft = -smallSize;\r\n                secondTop = firstTop;\r\n                secondLeft = qrRegion.width - largeSize;\r\n                break;\r\n            case Html5Qrcode.SHADED_BOTTOM:\r\n                firstTop = 0;\r\n                firstLeft = -smallSize;\r\n                secondTop = firstTop;\r\n                secondLeft = qrRegion.width - largeSize;\r\n                break;\r\n            default:\r\n                throw \"Unsupported shadingPosition\";\r\n        }\r\n\r\n        insertBorder(firstTop, firstLeft);\r\n        insertBorder(secondTop, secondLeft);\r\n    }\r\n\r\n    _possiblyUpdateShaders(qrMatch) {\r\n        if (this.qrMatch === qrMatch) {\r\n            return;\r\n        }\r\n\r\n        if (this.hasBorderShaders\r\n            && this.borderShaders\r\n            && this.borderShaders.length) {\r\n            this.borderShaders.forEach(shader => {\r\n                shader.style.backgroundColor = qrMatch\r\n                    ? Html5Qrcode.BORDER_SHADER_MATCH_COLOR\r\n                    : Html5Qrcode.BORDER_SHADER_DEFAULT_COLOR;\r\n            });\r\n        }\r\n        this.qrMatch = qrMatch;\r\n    }\r\n\r\n    _possiblyCloseLastScanImageFile() {\r\n        if (this._lastScanImageFile) {\r\n            URL.revokeObjectURL(this._lastScanImageFile);\r\n            this._lastScanImageFile = null;\r\n        }\r\n    }\r\n\r\n    //#region private method to create correct camera selection filter.\r\n    _createVideoConstraints(cameraIdOrConfig) {\r\n        if (typeof cameraIdOrConfig == \"string\") {\r\n            // If it's a string it should be camera device Id.\r\n            return { deviceId: { exact: cameraIdOrConfig } };\r\n        } else if (typeof cameraIdOrConfig == \"object\") {\r\n            const facingModeKey = \"facingMode\";\r\n            const deviceIdKey = \"deviceId\";\r\n            const allowedFacingModeValues\r\n                = { \"user\" : true, \"environment\" : true};\r\n            const exactKey = \"exact\";\r\n            const isValidFacingModeValue = value => {\r\n                if (value in allowedFacingModeValues) {\r\n                    // Valid config\r\n                    return true;\r\n                } else {\r\n                    // Invalid config\r\n                    throw \"config has invalid 'facingMode' value = \"\r\n                        + `'${value}'`;\r\n                }\r\n            };\r\n\r\n            const keys = Object.keys(cameraIdOrConfig);\r\n            if (keys.length != 1) {\r\n                throw \"'cameraIdOrConfig' object should have exactly 1 key,\"\r\n                    + ` if passed as an object, found ${keys.length} keys`;\r\n            }\r\n\r\n            const key = Object.keys(cameraIdOrConfig)[0];\r\n            if (key != facingModeKey && key != deviceIdKey) {\r\n                throw `Only '${facingModeKey}' and '${deviceIdKey}' `\r\n                    + \" are supported for 'cameraIdOrConfig'\";\r\n            }\r\n\r\n            if (key == facingModeKey) {\r\n                /**\r\n                 * Supported scenarios:\r\n                 * - { facingMode: \"user\" }\r\n                 * - { facingMode: \"environment\" }\r\n                 * - { facingMode: { exact: \"environment\" } }\r\n                 * - { facingMode: { exact: \"user\" } }\r\n                 */\r\n                const facingMode = cameraIdOrConfig[key];\r\n                if (typeof facingMode == \"string\") {\r\n                    if (isValidFacingModeValue(facingMode)) {\r\n                        return { facingMode: facingMode };\r\n                    }\r\n                } else if (typeof facingMode == \"object\") {\r\n                    if (exactKey in facingMode) {\r\n                        if (isValidFacingModeValue(facingMode[exactKey])) {\r\n                                return {\r\n                                    facingMode: {\r\n                                        exact: facingMode[exactKey]\r\n                                    }\r\n                                };\r\n                        }\r\n                    } else {\r\n                        throw \"'facingMode' should be string or object with\"\r\n                            + ` ${exactKey} as key.`;\r\n                    }\r\n                } else {\r\n                    const type = (typeof facingMode);\r\n                    throw `Invalid type of 'facingMode' = ${type}`;\r\n                }\r\n            } else {\r\n                /**\r\n                 * key == deviceIdKey; Supported scenarios:\r\n                 * - { deviceId: { exact: \"a76afe74e95e3.....38627b3bde\" }\r\n                 * - { deviceId: \"a76afe74e95e3....065c9cd89438627b3bde\" }\r\n                 */\r\n                const deviceId = cameraIdOrConfig[key];\r\n                if (typeof deviceId == \"string\") {\r\n                    return { deviceId: deviceId };\r\n                } else if (typeof deviceId == \"object\") {\r\n                    if (exactKey in deviceId) {\r\n                        return {\r\n                            deviceId : { exact: deviceId[exactKey] }\r\n                        };\r\n                    } else {\r\n                        throw \"'deviceId' should be string or object with\"\r\n                            + ` ${exactKey} as key.`;\r\n                    }\r\n                } else {\r\n                    const type = (typeof deviceId);\r\n                    throw `Invalid type of 'deviceId' = ${type}`;\r\n                }\r\n            }\r\n        } else {\r\n            // invalid type\r\n            const type = (typeof cameraIdOrConfig);\r\n            throw `Invalid type of 'cameraIdOrConfig' = ${type}`;\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    static _getTimeoutFps(fps) {\r\n        return 1000 / fps;\r\n    }\r\n\r\n    static _log(message) {\r\n        if (Html5Qrcode.VERBOSE) {\r\n            console.log(message);\r\n        }\r\n    }\r\n}","/**\r\n * @fileoverview\r\n * Complete Scanner build on top of {@link Html5Qrcode}.\r\n * - Decode QR Code using web cam or smartphone camera\r\n * \r\n * @author mebjas <minhazav@gmail.com>\r\n * \r\n * The word \"QR Code\" is registered trademark of DENSO WAVE INCORPORATED\r\n * http://www.denso-wave.com/qrcode/faqpatent-e.html\r\n * \r\n * Note: ECMA Script is not supported by all browsers. Use minified/html5-qrcode.min.js for better\r\n * browser support. Alternatively the transpiled code lives in transpiled/html5-qrcode.js\r\n */\r\nexport default class Html5QrcodeScanner {\r\n\r\n    static SCAN_TYPE_CAMERA = \"SCAN_TYPE_CAMERA\";\r\n    static SCAN_TYPE_FILE = \"SCAN_TYPE_FILE\";\r\n    static STATUS_SUCCESS = \"STATUS_SUCCESS\";\r\n    static STATUS_WARNING = \"STATUS_WARNING\";\r\n    static STATUS_DEFAULT = \"STATUS_DEFAULT\";\r\n\r\n    static ASSET_FILE_SCAN = \"https://raw.githubusercontent.com/mebjas/html5-qrcode/master/assets/file-scan.gif\";\r\n    static ASSET_CAMERA_SCAN = \"https://raw.githubusercontent.com/mebjas/html5-qrcode/master/assets/camera-scan.gif\";\r\n\r\n    /**\r\n     * Creates instance of this class.\r\n     *\r\n     * @param {String} elementId - Id of the HTML element.\r\n     * @param {Object} config extra configurations to tune QR code scanner.\r\n     *  Supported Fields:\r\n     *      - fps: expected framerate of qr code scanning. example { fps: 2 }\r\n     *          means the scanning would be done every 500 ms.\r\n     *      - qrbox: width of QR scanning box, this should be smaller than\r\n     *          the width and height of the box. This would make the scanner\r\n     *          look like this:\r\n     *          ----------------------\r\n     *          |********************|\r\n     *          |******,,,,,,,,,*****|      <--- shaded region\r\n     *          |******|       |*****|      <--- non shaded region would be\r\n     *          |******|       |*****|          used for QR code scanning.\r\n     *          |******|_______|*****|\r\n     *          |********************|\r\n     *          |********************|\r\n     *          ----------------------\r\n     *      - aspectRatio: Optional, desired aspect ratio for the video feed.\r\n     *          Ideal aspect ratios are 4:3 or 16:9. Passing very wrong aspect\r\n     *          ratio could lead to video feed not showing up.\r\n     *      - disableFlip: Optional, if {@code true} flipped QR Code won't be\r\n     *          scanned. Only use this if you are sure the camera cannot give\r\n     *          mirrored feed if you are facing performance constraints.\r\n     * @param {Boolean} verbose - Optional argument, if true, all logs\r\n     *                  would be printed to console. \r\n     */\r\n    constructor(elementId, config, verbose) {\r\n        this.elementId = elementId;\r\n        this.config = config;\r\n        this.verbose = verbose === true;\r\n\r\n        if (!document.getElementById(elementId)) {\r\n            throw `HTML Element with id=${elementId} not found`;\r\n        }\r\n\r\n        this.currentScanType = Html5QrcodeScanner.SCAN_TYPE_CAMERA;\r\n        this.sectionSwapAllowed = true;\r\n\r\n        this.section = undefined;\r\n        this.html5Qrcode = undefined;\r\n        this.qrCodeSuccessCallback = undefined;\r\n        this.qrCodeErrorCallback = undefined;\r\n    }\r\n\r\n    /**\r\n     * Renders the User Interface\r\n     * \r\n     * @param {Function} qrCodeSuccessCallback - callback on QR Code found.\r\n     *  Example:\r\n     *      function(qrCodeMessage) {}\r\n     * @param {Function} qrCodeErrorCallback - callback on QR Code parse error.\r\n     *  Example:\r\n     *      function(errorMessage) {}\r\n     * \r\n     */\r\n    render(qrCodeSuccessCallback, qrCodeErrorCallback) {\r\n        const $this = this;\r\n\r\n        this.lastMatchFound = undefined;\r\n        // Add wrapper to success callback.\r\n        this.qrCodeSuccessCallback = message => {\r\n            $this.__setStatus(\"MATCH\", Html5QrcodeScanner.STATUS_SUCCESS);\r\n            if (qrCodeSuccessCallback) {\r\n                qrCodeSuccessCallback(message);\r\n            } else {\r\n                if ($this.lastMatchFound == message) {\r\n                    return;\r\n                }\r\n                $this.lastMatchFound = message;\r\n                $this.__setHeaderMessage(\r\n                    `Last Match: ${message}`, Html5QrcodeScanner.STATUS_SUCCESS);\r\n            }\r\n        }\r\n\r\n        // Add wrapper to failure callback\r\n        this.qrCodeErrorCallback = error => {\r\n            $this.__setStatus(\"Scanning\");\r\n            if (qrCodeErrorCallback) {\r\n                qrCodeErrorCallback(error);\r\n            }\r\n        }\r\n\r\n        const container = document.getElementById(this.elementId);\r\n        container.innerHTML = \"\";\r\n        this.__createBasicLayout(container);\r\n\r\n        this.html5Qrcode = new Html5Qrcode(\r\n            this.__getScanRegionId(), this.verbose);\r\n    }\r\n\r\n    /**\r\n     * Removes the QR Code scanner.\r\n     * \r\n     * @returns Promise which succeeds if the cleanup is complete successfully,\r\n     *  fails otherwise.\r\n     */\r\n    clear() {\r\n        const $this = this;\r\n        const emptyHtmlContainer = () => {\r\n            const mainContainer = document.getElementById(this.elementId);\r\n            if (mainContainer) {\r\n                mainContainer.innerHTML = \"\";\r\n                this.__resetBasicLayout(mainContainer);\r\n            }\r\n        }\r\n\r\n        if (this.html5Qrcode) {\r\n            return new Promise((resolve, reject) => {\r\n                if ($this.html5Qrcode._isScanning) {\r\n                    $this.html5Qrcode.stop().then(_ => {\r\n                        $this.html5Qrcode.clear();\r\n                        emptyHtmlContainer();\r\n                        resolve();\r\n                    }).catch(error => {\r\n                        if ($this.verbose) {\r\n                            console.error(\"Unable to stop qrcode scanner\", error);\r\n                        }\r\n                        reject(error);\r\n                    })\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //#region private control methods\r\n    __createBasicLayout(parent) {\r\n        parent.style.position = \"relative\";\r\n        parent.style.padding = \"0px\";\r\n        parent.style.border = \"1px solid silver\";\r\n        this.__createHeader(parent);\r\n\r\n        const qrCodeScanRegion = document.createElement(\"div\");\r\n        const scanRegionId = this.__getScanRegionId();\r\n        qrCodeScanRegion.id = scanRegionId;\r\n        qrCodeScanRegion.style.width = \"100%\";\r\n        qrCodeScanRegion.style.minHeight = \"100px\";\r\n        qrCodeScanRegion.style.textAlign = \"center\";\r\n        parent.appendChild(qrCodeScanRegion);\r\n        this.__insertCameraScanImageToScanRegion();\r\n\r\n        const qrCodeDashboard = document.createElement(\"div\");\r\n        const dashboardId = this.__getDashboardId();\r\n        qrCodeDashboard.id = dashboardId;\r\n        qrCodeDashboard.style.width = \"100%\";\r\n        parent.appendChild(qrCodeDashboard);\r\n\r\n        this.__setupInitialDashboard(qrCodeDashboard);\r\n\t}\r\n\t\r\n\t__resetBasicLayout(parent) {\r\n        parent.style.border = \"none\";\r\n\t}\r\n\r\n    __setupInitialDashboard(dashboard) {\r\n        this.__createSection(dashboard);\r\n        this.__createSectionControlPanel();\r\n        this.__createSectionSwap();\r\n    }\r\n\r\n    __createHeader(dashboard) {\r\n        const header = document.createElement(\"div\");\r\n        header.style.textAlign = \"left\";\r\n        header.style.margin = \"0px\";\r\n        header.style.padding = \"5px\";\r\n        header.style.fontSize = \"20px\";\r\n        header.style.borderBottom = \"1px solid rgba(192, 192, 192, 0.18)\";\r\n        dashboard.appendChild(header);\r\n\r\n        const titleSpan = document.createElement(\"span\");\r\n        titleSpan.innerHTML = \"QR Code Scanner\";\r\n        header.appendChild(titleSpan);\r\n\r\n        const statusSpan = document.createElement(\"span\");\r\n        statusSpan.id = this.__getStatusSpanId();\r\n        statusSpan.style.float = \"right\";\r\n        statusSpan.style.padding = \"5px 7px\";\r\n        statusSpan.style.fontSize = \"14px\";\r\n        statusSpan.style.background = \"#dedede6b\";\r\n        statusSpan.style.border = \"1px solid #00000000\";\r\n        statusSpan.style.color = \"rgb(17, 17, 17)\";\r\n        header.appendChild(statusSpan);\r\n        this.__setStatus(\"IDLE\");\r\n\r\n        const headerMessageContainer = document.createElement(\"div\");\r\n        headerMessageContainer.id = this.__getHeaderMessageContainerId();\r\n        headerMessageContainer.style.display = \"none\";\r\n        headerMessageContainer.style.fontSize = \"14px\";\r\n        headerMessageContainer.style.padding = \"2px 10px\";\r\n        headerMessageContainer.style.marginTop = \"4px\";\r\n        headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\r\n        header.appendChild(headerMessageContainer);\r\n    }\r\n\r\n    __createSection(dashboard) {\r\n        const section = document.createElement(\"div\");\r\n        section.id = this.__getDashboardSectionId();\r\n        section.style.width = \"100%\";\r\n        section.style.padding = \"10px\";\r\n        section.style.textAlign = \"left\";\r\n        dashboard.appendChild(section);\r\n    }\r\n\r\n    __createSectionControlPanel() {\r\n        const $this = this;\r\n        const section = document.getElementById(this.__getDashboardSectionId());\r\n        const sectionControlPanel = document.createElement(\"div\");\r\n        section.appendChild(sectionControlPanel);\r\n        const scpCameraScanRegion = document.createElement(\"div\");\r\n        scpCameraScanRegion.id = this.__getDashboardSectionCameraScanRegionId();\r\n        scpCameraScanRegion.style.display\r\n            = this.currentScanType == Html5QrcodeScanner.SCAN_TYPE_CAMERA\r\n                ? \"block\" : \"none\";\r\n        sectionControlPanel.appendChild(scpCameraScanRegion);\r\n\r\n        // Assuming when the object is created permission is needed.\r\n        const requestPermissionContainer = document.createElement(\"div\");\r\n        requestPermissionContainer.style.textAlign = \"center\";\r\n\r\n        const requestPermissionButton = document.createElement(\"button\");\r\n        requestPermissionButton.innerHTML = \"Request Camera Permissions\";\r\n        requestPermissionButton.addEventListener(\"click\", function () {\r\n            requestPermissionButton.disabled = true;\r\n            $this.__setStatus(\"PERMISSION\");\r\n            $this.__setHeaderMessage(\"Requesting camera permissions...\");\r\n\r\n            Html5Qrcode.getCameras().then(cameras => {\r\n                $this.__setStatus(\"IDLE\");\r\n                $this.__resetHeaderMessage();\r\n                if (!cameras || cameras.length == 0) {\r\n                    $this.__setStatus(\r\n                        \"No Cameras\", Html5QrcodeScanner.STATUS_WARNING);\r\n                } else {\r\n                    scpCameraScanRegion.removeChild(requestPermissionContainer);\r\n                    $this.__renderCameraSelection(cameras);\r\n                }\r\n            }).catch(error => {\r\n                requestPermissionButton.disabled = false;\r\n                $this.__setStatus(\"IDLE\");\r\n                $this.__setHeaderMessage(error, Html5QrcodeScanner.STATUS_WARNING);\r\n            });\r\n        });\r\n        requestPermissionContainer.appendChild(requestPermissionButton);\r\n        scpCameraScanRegion.appendChild(requestPermissionContainer);\r\n\r\n        const fileBasedScanRegion = document.createElement(\"div\");\r\n        fileBasedScanRegion.id = this.__getDashboardSectionFileScanRegionId();\r\n        fileBasedScanRegion.style.textAlign = \"center\";\r\n        fileBasedScanRegion.style.display\r\n            = this.currentScanType == Html5QrcodeScanner.SCAN_TYPE_CAMERA\r\n                ? \"none\" : \"block\";\r\n        sectionControlPanel.appendChild(fileBasedScanRegion);\r\n\r\n        const fileScanInput = document.createElement(\"input\");\r\n        fileScanInput.id = this.__getFileScanInputId();\r\n        fileScanInput.accept = \"image/*\";\r\n        fileScanInput.type = \"file\";\r\n        fileScanInput.style.width = \"200px\";\r\n        fileScanInput.disabled\r\n            = this.currentScanType == Html5QrcodeScanner.SCAN_TYPE_CAMERA;\r\n        const fileScanLabel = document.createElement(\"span\");\r\n        fileScanLabel.innerHTML = \"&nbsp; Select Image\";\r\n        fileBasedScanRegion.appendChild(fileScanInput);\r\n        fileBasedScanRegion.appendChild(fileScanLabel);\r\n        fileScanInput.addEventListener('change', e => {\r\n            if ($this.currentScanType !== Html5QrcodeScanner.SCAN_TYPE_FILE) {\r\n                return;\r\n            }\r\n            if (e.target.files.length == 0) {\r\n                return;\r\n            }\r\n            const file = e.target.files[0];\r\n            $this.html5Qrcode.scanFile(file, true)\r\n                .then(qrCode => {\r\n                    $this.__resetHeaderMessage();\r\n                    $this.qrCodeSuccessCallback(qrCode);\r\n                })\r\n                .catch(error => {\r\n                    $this.__setStatus(\"ERROR\", Html5QrcodeScanner.STATUS_WARNING);\r\n                    $this.__setHeaderMessage(error, Html5QrcodeScanner.STATUS_WARNING);\r\n                    $this.qrCodeErrorCallback(error);\r\n                });\r\n        });\r\n    }\r\n\r\n    __renderCameraSelection(cameras) {\r\n        const $this = this;\r\n        const scpCameraScanRegion = document.getElementById(\r\n            this.__getDashboardSectionCameraScanRegionId());\r\n        scpCameraScanRegion.style.textAlign = \"center\";\r\n\r\n        const cameraSelectionContainer = document.createElement(\"span\");\r\n        cameraSelectionContainer.innerHTML\r\n            = `Select Camera (${cameras.length}) &nbsp;`;\r\n        cameraSelectionContainer.style.marginRight = \"10px\";\r\n\r\n        const cameraSelectionSelect = document.createElement(\"select\");\r\n        cameraSelectionSelect.id = this.__getCameraSelectionId();\r\n        for (var i = 0; i < cameras.length; i++) {\r\n            const camera = cameras[i];\r\n            const value = camera.id;\r\n            const name = camera.label == null ? value : camera.label;\r\n            const option = document.createElement('option');\r\n            option.value = value;\r\n            option.innerHTML = name;\r\n            cameraSelectionSelect.appendChild(option);\r\n        }\r\n        cameraSelectionContainer.appendChild(cameraSelectionSelect);\r\n        scpCameraScanRegion.appendChild(cameraSelectionContainer);\r\n\r\n        const cameraActionContainer = document.createElement(\"span\");\r\n        const cameraActionStartButton = document.createElement(\"button\");\r\n        cameraActionStartButton.innerHTML = \"Start Scanning\";\r\n        cameraActionContainer.appendChild(cameraActionStartButton);\r\n\r\n        const cameraActionStopButton = document.createElement(\"button\");\r\n        cameraActionStopButton.innerHTML = \"Stop Scanning\";\r\n        cameraActionStopButton.style.display = \"none\";\r\n        cameraActionStopButton.disabled = true;\r\n        cameraActionContainer.appendChild(cameraActionStopButton);\r\n\r\n        scpCameraScanRegion.appendChild(cameraActionContainer);\r\n\r\n        cameraActionStartButton.addEventListener('click', _ => {\r\n            cameraSelectionSelect.disabled = true;\r\n            cameraActionStartButton.disabled = true;\r\n            $this._showHideScanTypeSwapLink(false);\r\n\r\n            const config = $this.config ?\r\n                $this.config : { fps: 10, qrbox: 250 };\r\n\r\n            const cameraId = cameraSelectionSelect.value;\r\n            $this.html5Qrcode.start(\r\n                cameraId,\r\n                config,\r\n                $this.qrCodeSuccessCallback,\r\n                $this.qrCodeErrorCallback)\r\n                .then(_ => {\r\n                    cameraActionStopButton.disabled = false;\r\n                    cameraActionStopButton.style.display = \"inline-block\";\r\n                    cameraActionStartButton.style.display = \"none\";\r\n                    $this.__setStatus(\"Scanning\");\r\n                })\r\n                .catch(error => {\r\n                    $this._showHideScanTypeSwapLink(true);\r\n                    cameraSelectionSelect.disabled = false;\r\n                    cameraActionStartButton.disabled = false;\r\n                    $this.__setStatus(\"IDLE\");\r\n                    $this.__setHeaderMessage(\r\n                        error, Html5QrcodeScanner.STATUS_WARNING);\r\n                });\r\n        });\r\n\r\n        cameraActionStopButton.addEventListener('click', _ => {\r\n            cameraActionStopButton.disabled = true;\r\n            $this.html5Qrcode.stop()\r\n                .then(_ => {\r\n                    $this._showHideScanTypeSwapLink(true);\r\n                    cameraSelectionSelect.disabled = false;\r\n                    cameraActionStartButton.disabled = false;\r\n                    cameraActionStopButton.style.display = \"none\";\r\n                    cameraActionStartButton.style.display = \"inline-block\";\r\n                    $this.__setStatus(\"IDLE\");\r\n                    $this.__insertCameraScanImageToScanRegion();\r\n                }).catch(error => {\r\n                    cameraActionStopButton.disabled = false;\r\n                    $this.__setStatus(\"ERROR\", Html5QrcodeScanner.STATUS_WARNING);\r\n                    $this.__setHeaderMessage(\r\n                        error, Html5QrcodeScanner.STATUS_WARNING);\r\n                });\r\n        });\r\n    }\r\n\r\n    __createSectionSwap() {\r\n        const $this = this;\r\n        const TEXT_IF_CAMERA_SCAN_SELECTED\r\n            = \"Scan an Image File\";\r\n        const TEXT_IF_FILE_SCAN_SELECTED\r\n            = \"Scan using camera directly\";\r\n\r\n        const section = document.getElementById(this.__getDashboardSectionId());\r\n        const switchContainer = document.createElement(\"div\");\r\n        switchContainer.style.textAlign = \"center\";\r\n        const swithToFileBasedLink = document.createElement(\"a\");\r\n        swithToFileBasedLink.style.textDecoration = \"underline\";\r\n        swithToFileBasedLink.id = this.__getDashboardSectionSwapLinkId();\r\n        swithToFileBasedLink.innerHTML\r\n            = this.currentScanType == Html5QrcodeScanner.SCAN_TYPE_CAMERA\r\n                ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\r\n        swithToFileBasedLink.href = \"#scan-using-file\";\r\n        swithToFileBasedLink.addEventListener('click', function () {\r\n            if (!$this.sectionSwapAllowed) {\r\n                if ($this.verbose) {\r\n                    console.error(\"Section swap called when not allowed\");\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Cleanup states\r\n            $this.__setStatus(\"IDLE\");\r\n            $this.__resetHeaderMessage();\r\n            $this.__getFileScanInput().value = \"\";\r\n\r\n            $this.sectionSwapAllowed = false;\r\n            if ($this.currentScanType == Html5QrcodeScanner.SCAN_TYPE_CAMERA) {\r\n                // swap to file\r\n                $this.__clearScanRegion();\r\n                $this.__getFileScanInput().disabled = false;\r\n                $this.__getCameraScanRegion().style.display = \"none\";\r\n                $this.__getFileScanRegion().style.display = \"block\";\r\n                swithToFileBasedLink.innerHTML = TEXT_IF_FILE_SCAN_SELECTED;\r\n                $this.currentScanType = Html5QrcodeScanner.SCAN_TYPE_FILE;\r\n                $this.__insertFileScanImageToScanRegion();\r\n            } else {\r\n                // swap to camera based scanning\r\n                $this.__clearScanRegion();\r\n                $this.__getFileScanInput().disabled = true;\r\n                $this.__getCameraScanRegion().style.display = \"block\";\r\n                $this.__getFileScanRegion().style.display = \"none\";\r\n                swithToFileBasedLink.innerHTML = TEXT_IF_CAMERA_SCAN_SELECTED;\r\n                $this.currentScanType = Html5QrcodeScanner.SCAN_TYPE_CAMERA;\r\n                $this.__insertCameraScanImageToScanRegion();\r\n            }\r\n\r\n            $this.sectionSwapAllowed = true;\r\n        });\r\n        switchContainer.appendChild(swithToFileBasedLink);\r\n        section.appendChild(switchContainer);\r\n    }\r\n\r\n    __setStatus(statusText, statusClass) {\r\n        if (!statusClass) {\r\n            statusClass = Html5QrcodeScanner.STATUS_DEFAULT;\r\n        }\r\n        const statusSpan = document.getElementById(this.__getStatusSpanId());\r\n        statusSpan.innerHTML = statusText;\r\n\r\n        switch (statusClass) {\r\n            case Html5QrcodeScanner.STATUS_SUCCESS:\r\n                statusSpan.style.background = \"#6aaf5042\";\r\n                statusSpan.style.color = \"#477735\";\r\n                break;\r\n            case Html5QrcodeScanner.STATUS_WARNING:\r\n                statusSpan.style.background = \"#cb243124\";\r\n                statusSpan.style.color = \"#cb2431\";\r\n                break;\r\n            case Html5QrcodeScanner.STATUS_DEFAULT:\r\n            default:\r\n                statusSpan.style.background = \"#eef\";\r\n                statusSpan.style.color = \"rgb(17, 17, 17)\";\r\n                break;\r\n        }\r\n    }\r\n\r\n    __resetHeaderMessage() {\r\n        const messageDiv = document.getElementById(\r\n            this.__getHeaderMessageContainerId());\r\n        messageDiv.style.display = \"none\";\r\n    }\r\n\r\n    __setHeaderMessage(messageText, statusClass) {\r\n        if (!statusClass) {\r\n            statusClass = Html5QrcodeScanner.STATUS_DEFAULT;\r\n        }\r\n        const messageDiv = document.getElementById(\r\n            this.__getHeaderMessageContainerId());\r\n        messageDiv.innerHTML = messageText;\r\n        messageDiv.style.display = \"block\";\r\n\r\n        switch (statusClass) {\r\n            case Html5QrcodeScanner.STATUS_SUCCESS:\r\n                messageDiv.style.background = \"#6aaf5042\";\r\n                messageDiv.style.color = \"#477735\";\r\n                break;\r\n            case Html5QrcodeScanner.STATUS_WARNING:\r\n                messageDiv.style.background = \"#cb243124\";\r\n                messageDiv.style.color = \"#cb2431\";\r\n                break;\r\n            case Html5QrcodeScanner.STATUS_DEFAULT:\r\n            default:\r\n                messageDiv.style.background = \"#00000000\";\r\n                messageDiv.style.color = \"rgb(17, 17, 17)\";\r\n                break;\r\n        }\r\n    }\r\n\r\n    _showHideScanTypeSwapLink(shouldDisplay) {\r\n        if (shouldDisplay !== true) {\r\n            shouldDisplay = false;\r\n        }\r\n\r\n        this.sectionSwapAllowed = shouldDisplay;\r\n        this.__getDashboardSectionSwapLink().style.display\r\n            = shouldDisplay ? \"inline-block\" : \"none\";\r\n    }\r\n\r\n    __insertCameraScanImageToScanRegion() {\r\n        const $this = this;\r\n        const qrCodeScanRegion = document.getElementById(\r\n            this.__getScanRegionId());\r\n\r\n        if (this.cameraScanImage) {\r\n            qrCodeScanRegion.innerHTML = \"<br>\";\r\n            qrCodeScanRegion.appendChild(this.cameraScanImage);\r\n            return;\r\n        }\r\n\r\n        this.cameraScanImage = new Image;\r\n        this.cameraScanImage.onload = _ => {\r\n            qrCodeScanRegion.innerHTML = \"<br>\";\r\n            qrCodeScanRegion.appendChild($this.cameraScanImage);\r\n        }\r\n        this.cameraScanImage.width = 64;\r\n        this.cameraScanImage.style.opacity = 0.3;\r\n        this.cameraScanImage.src = Html5QrcodeScanner.ASSET_CAMERA_SCAN;\r\n    }\r\n\r\n    __insertFileScanImageToScanRegion() {\r\n        const $this = this;\r\n        const qrCodeScanRegion = document.getElementById(\r\n            this.__getScanRegionId());\r\n\r\n        if (this.fileScanImage) {\r\n            qrCodeScanRegion.innerHTML = \"<br>\";\r\n            qrCodeScanRegion.appendChild(this.fileScanImage);\r\n            return;\r\n        }\r\n\r\n        this.fileScanImage = new Image;\r\n        this.fileScanImage.onload = _ => {\r\n            qrCodeScanRegion.innerHTML = \"<br>\";\r\n            qrCodeScanRegion.appendChild($this.fileScanImage);\r\n        }\r\n        this.fileScanImage.width = 64;\r\n        this.fileScanImage.style.opacity = 0.3;\r\n        this.fileScanImage.src = Html5QrcodeScanner.ASSET_FILE_SCAN;\r\n    }\r\n\r\n    __clearScanRegion() {\r\n        const qrCodeScanRegion = document.getElementById(\r\n            this.__getScanRegionId());\r\n        qrCodeScanRegion.innerHTML = \"\";\r\n    }\r\n    //#endregion\r\n\r\n    //#region state getters\r\n    __getDashboardSectionId() {\r\n        return `${this.elementId}__dashboard_section`;\r\n    }\r\n\r\n    __getDashboardSectionCameraScanRegionId() {\r\n        return `${this.elementId}__dashboard_section_csr`;\r\n    }\r\n\r\n    __getDashboardSectionFileScanRegionId() {\r\n        return `${this.elementId}__dashboard_section_fsr`;\r\n    }\r\n\r\n    __getDashboardSectionSwapLinkId() {\r\n        return `${this.elementId}__dashboard_section_swaplink`;\r\n    }\r\n\r\n    __getScanRegionId() {\r\n        return `${this.elementId}__scan_region`;\r\n    }\r\n\r\n    __getDashboardId() {\r\n        return `${this.elementId}__dashboard`;\r\n    }\r\n\r\n    __getFileScanInputId() {\r\n        return `${this.elementId}__filescan_input`;\r\n    }\r\n\r\n    __getStatusSpanId() {\r\n        return `${this.elementId}__status_span`;\r\n    }\r\n\r\n    __getHeaderMessageContainerId() {\r\n        return `${this.elementId}__header_message`;\r\n    }\r\n\r\n    __getCameraSelectionId() {\r\n        return `${this.elementId}__camera_selection`;\r\n    }\r\n\r\n    __getCameraScanRegion() {\r\n        return document.getElementById(\r\n            this.__getDashboardSectionCameraScanRegionId());\r\n    }\r\n\r\n    __getFileScanRegion() {\r\n        return document.getElementById(\r\n            this.__getDashboardSectionFileScanRegionId());\r\n    }\r\n\r\n    __getFileScanInput() {\r\n        return document.getElementById(this.__getFileScanInputId());\r\n    }\r\n\r\n    __getDashboardSectionSwapLink() {\r\n        return document.getElementById(this.__getDashboardSectionSwapLinkId());\r\n    }\r\n    //#endregion\r\n}","'use strict';\r\n\r\nlet deferredInstallPrompt = null;\r\nconst installButton = document.getElementById('butInstall');\r\ninstallButton.addEventListener('click', installPWA);\r\n\r\n// Add event listener for beforeinstallprompt event\r\nwindow.addEventListener('beforeinstallprompt', saveBeforeInstallPromptEvent);\r\n\r\n/**\r\n * Event handler for beforeinstallprompt event.\r\n *   Saves the event & shows install button.\r\n *\r\n * @param {Event} evt\r\n */\r\nfunction saveBeforeInstallPromptEvent(evt) {\r\n  // Add code to save event & show the install button.\r\n  deferredInstallPrompt = evt;\r\n  installButton.removeAttribute('hidden');\r\n}\r\n\r\n\r\n/**\r\n * Event handler for butInstall - Does the PWA installation.\r\n *\r\n * @param {Event} evt\r\n */\r\nfunction installPWA(evt) {\r\n  // Add code show install prompt & hide the install button.\r\n  deferredInstallPrompt.prompt();\r\n  // Hide the install button, it can't be called twice.\r\n  evt.srcElement.setAttribute('hidden', true);\r\n  // Log user response to prompt.\r\n  deferredInstallPrompt.userChoice\r\n      .then((choice) => {\r\n        if (choice.outcome === 'accepted') {\r\n          console.log('User accepted the A2HS prompt', choice);\r\n        } else {\r\n          console.log('User dismissed the A2HS prompt', choice);\r\n        }\r\n        deferredInstallPrompt = null;\r\n      });\r\n}\r\n\r\n// Add event listener for appinstalled event\r\nwindow.addEventListener('appinstalled', logAppInstalled);\r\n\r\n/**\r\n * Event handler for appinstalled event.\r\n *   Log the installation to analytics or save the event somehow.\r\n *\r\n * @param {Event} evt\r\n */\r\nfunction logAppInstalled(evt) {\r\n  // Add code to log the event\r\n  console.log('Svelte App was installed.', evt);\r\n}\r\n","import '../scss/master.scss';\r\n\r\nimport Html5Qrcode from './html5-qrcode/html5-qrcode';\r\nimport Html5QrcodeScanner from './html5-qrcode/html5-qrcode-scanner';\r\nimport './install';\r\n\r\nclass App{\r\n\r\n    constructor(){\r\n        this.html5QrCode = new Html5Qrcode(\"reader\");\r\n\r\n        this.options = {\r\n            $scanBtn: document.querySelector('.js-scan'),\r\n            $stopBtn: document.querySelector('.js-scan-stop'),\r\n            $select: document.querySelector('.js-cameras'),\r\n            $output: document.querySelector('.js-output'),\r\n            cameraSettings: { \r\n                facingMode: \"environment\" \r\n            },\r\n            cameraConfig: { \r\n                fps: 10, \r\n                qrbox: 250 \r\n            }\r\n        }\r\n\r\n        console.log(this.options);\r\n\r\n        this.init();\r\n    }\r\n\r\n    init(){\r\n        this.getCameras();\r\n        this.initEvents();\r\n    }\r\n\r\n    /**\r\n     * This method will trigger user permissions\r\n     * \r\n     * devices would be an array of objects of type:\r\n     * { id: \"id\", label: \"label\" }\r\n     */\r\n    getCameras(){\r\n        Html5Qrcode.getCameras().then(devices => {\r\n            console.log(devices);\r\n            if (devices && devices.length) {\r\n                devices.forEach(device => {\r\n                    let option = document.createElement(\"option\");\r\n                    option.text = device.label;\r\n                    option.value = device.id;\r\n                    this.options.$select.appendChild(option);\r\n                });\r\n            }\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    initEvents(){\r\n        this.options.$scanBtn.addEventListener('click', (e) => {\r\n            console.log('click');\r\n            this.html5QrCode.start(this.options.cameraSettings, this.options.cameraConfig, \r\n                (messsage) => this.qrCodeSuccessCallback(messsage), \r\n                this.qrCodeErrorCallback\r\n            );\r\n        })\r\n\r\n        this.options.$stopBtn.addEventListener('click', (e) => this.stop(e) );\r\n    }\r\n\r\n    qrCodeSuccessCallback(message) { \r\n        let output = `<p>We found your code ${message}</p>`;\r\n        this.options.$output.innerHTML = output;\r\n        this.makeRequest(message);\r\n    }\r\n\r\n    qrCodeErrorCallback(message) { \r\n      //  console.log(message);\r\n    }\r\n\r\n    stop(e){\r\n        this.html5QrCode.stop().then(ignore => {\r\n            alert('Scanning stopped')\r\n        }).catch(err => {\r\n            alert('Error when stopping')\r\n        });\r\n    }\r\n\r\n    makeRequest(url){\r\n        fetch(url, {\r\n            method: 'post',\r\n        }).then((response) => {\r\n            return response.json();\r\n        }).then((data) => {\r\n            console.log(data.msg);\r\n            this.options.$output.innerHTML = this.options.$output.innerHTML + '<p>Response data: '+ data.msg +'</p>';\r\n        });\r\n    }\r\n}\r\n\r\nconst app = new App();\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}